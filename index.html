<!DOCTYPE html><html><head><title>BBC Adventure Dungeon 31B</title><link rel="shortcut icon" type="image/png" href="http://cybersandbox.ca/adventure/31b-favicon.png"/><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><style>.small-caps{text-transform:uppercase;font-size:70%;letter-spacing:.075em}#backstage .panel h2{margin:0}#backstage .panel h2 button{text-align:left;background:none;border:none;width:100%;font-weight:400;text-transform:uppercase;font-size:70%;letter-spacing:.075em;font-size:11px;padding:0 8px}#backstage .panel h2 button:before{content:"\25BA";display:inline-block;width:1.25em}#backstage .panel h2 button:hover{color:#495057}#backstage .panel.open h2 button:before{content:"\25BC"}
#backstage table.history td.actions{width:2.5em}#backstage table.history td.go{border-right:1px solid #000}
#backstage ul.tabs{list-style:none;margin:8px;padding:0;display:flex;border:1px solid #000;font-size:12px}#backstage ul.tabs li{flex-grow:1;border-right:1px solid #000;text-align:center}#backstage ul.tabs li:last-child{border-right:none}#backstage ul.tabs li button{color:#000;text-decoration:none;display:block;width:100%;height:28px;padding:8px;border:none;border-radius:0}#backstage ul.tabs li button.active{background:#000;color:#dee2e6}#backstage .tab-content{max-height:calc(100vh - $backstage-tab-height);overflow:auto}
.small-caps{text-transform:uppercase;font-size:70%;letter-spacing:.075em}body.backstage-visible #backdrop{justify-content:flex-start;max-width:67vw}#backstage{position:fixed;top:0;right:0;bottom:0;width:33vw;max-height:100vh;font-size:18px;background:#dee2e6;color:#000;transform:translateX(100%);box-shadow:inset 2px 0 3px rgba(0,0,0,.25);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu Cantarell,Helvetica Neue,sans-serif;font-size:80%}#backstage:before{content:"";position:absolute;z-index:2;top:calc(50% - 25px);right:calc(100% - 4px);height:50px;width:4px;background:#dee2e6}@media screen and (max-width:425px){#backstage{width:calc(100vw - 25px)}}#backstage.open{transform:none}#backstage .toggle-visibility{position:absolute;z-index:1;top:calc(50% - 25px);right:100%;width:25px;height:50px;padding:0;background:#dee2e6;color:#000;border:none;border-top-left-radius:25px;border-bottom-left-radius:25px;border-top-right-radius:0;border-bottom-right-radius:0;box-shadow:inset 2px 0 3px rgba(0,0,0,.25);font-size:18px}#backstage button{color:#000;background:transparent;padding:8px;border-radius:16px;border:1px solid #000}#backstage button:hover{background:#e9ecef}#backstage p{padding:0 8px}#backstage li,#backstage p,#backstage td{font-size:12px}#backstage input,#backstage select{color:#000;background:transparent;border:1px solid #000;padding:8px}#backstage table{background:transparent;table-layout:fixed;border-collapse:collapse;width:calc(100% - 16px);margin:8px}#backstage th{text-align:left}#backstage td{position:relative;border:1px solid #000;padding:8px;vertical-align:top}#backstage td:first-child{border-left:none}#backstage td:last-child{border-right:none}#backstage td button,#backstage td input{background:none;border:none;border-radius:0;position:absolute;top:0;left:0;bottom:0;width:100%;padding:8px}#backstage textarea{background:transparent;border:1px solid #000;color:#000;padding:8px;width:100%;height:7.75em}#backstage .block{display:block;margin:8px;width:calc(100% - 16px)}#backstage .disabled{color:#868e96}#backstage .indented-input{margin-left:calc(10em + 8px);font-size:12px}#backstage .input-group{display:flex;align-items:center}#backstage .input-group label:first-child{text-align:right;margin-right:8px;width:10em}#backstage .input-group input,#backstage .input-group select{flex-grow:1}#backstage .segmented-button{display:flex}#backstage .segmented-button button{border-left:none;border-radius:0;margin:0;flex-grow:1}#backstage .segmented-button button:first-child{border-left:1px solid #000;border-top-left-radius:16px;border-bottom-left-radius:16px}#backstage .segmented-button button:last-child{border-top-right-radius:16px;border-bottom-right-radius:16px}#backstage .segmented-button .fixed{flex-grow:0;min-width:24px}#backstage .tab-content{max-height:calc(100vh - 28px);overflow:auto}
.fade-in{opacity:0;animation:fade-in 1s ease-out forwards}.fade-out{animation:fade-in 1s ease-out reverse forwards}.skip-animation{animation-delay:0s!important}@keyframes fade-in{0%{opacity:0}to{opacity:1}}
#page .warnings{list-style-type:none;padding-left:0;margin-left:0}
.small-caps{text-transform:uppercase;font-size:70%;letter-spacing:.075em}#backdrop{min-height:100vh;align-items:center}#backdrop,#page{display:flex;justify-content:center}#page{flex-direction:column;width:40em;min-height:calc(100vh - 2em);max-width:calc(100vw - 2em);line-height:150%;margin:1em;padding:4em 4em 2em;position:relative}#page article{flex-grow:1;display:flex}#page article>:first-child{margin-top:0;width:100%}#page footer,#page header{display:flex}#page footer>div,#page header>div{flex-grow:1}#page footer p,#page header p{margin:.5em 0 0}#page footer .center,#page header .center{text-align:center}#page footer .right p,#page header .right p{text-align:right}#page header{margin-top:0}#page header.has-content{border-bottom:1px solid #000}#page header.has-content+article>article>div>p:first-child,#page header.has-content+article>div>p:first-child{margin-top:1em}#page footer{margin-bottom:0}#page footer.has-content{border-top:1px solid #000}#page hr{border:none}#page hr:after{content:"* \A0   * \A0   *";display:block;text-align:center}#page .error,#page .warning{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu Cantarell,Helvetica Neue,sans-serif;font-size:80%;background:#fff5f5;color:#c92a2a;padding:.5em;border-left:4px solid #ffa8a8;position:relative;margin-bottom:1em;overflow:auto}#page .error :first-child,#page .warning :first-child{margin-top:0}#page .error :last-child,#page .warning :last-child{margin-bottom:0}#page .error a,#page .warning a{color:#c92a2a}#page .warning{background:#fff9db;color:#e67700}#page .warning a{color:#e67700}#page .fork p{display:flex;flex-direction:column;width:100%}#page .fork p a{display:block;flex-grow:1;text-align:center;padding:.5em}@media screen and (max-width:768px){#page{margin:0;width:100vw;max-width:100vw;min-height:100vh;padding:1em}}#spinner{position:absolute;bottom:0;right:0;opacity:0;transition:opacity .25s ease-in-out;pointer-events:none}#spinner.visible{display:block;opacity:1}
*{box-sizing:border-box}body{margin:0;padding:0}img{max-width:100%;height:auto}input[type=text],select{padding:.25em}pre{white-space:pre-wrap}tw-storydata{display:none}</style></head><body><form id="cb-validation" action="javascript:void(0)"><button id="cb-validation-tester" hidden></button> <button id="cb-block-enter-key" hidden></button><div id="backdrop"><div id="page" aria-live="polite"><header><div class="left"></div><div class="center"></div><div class="right"></div></header><article></article><ul class="warnings"></ul><footer><div class="left"></div><div class="center"></div><div class="right"></div></footer><div id="spinner"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgICB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmlld0JveD0iMCAwIDEwMCAxMDAiPgogICAgPHJlY3QgeD0iMzEiIHk9IjE0IiB3aWR0aD0iMzgiIGhlaWdodD0iNzIiIHJ4PSI0IiBmaWxsPSJ3aGl0ZSIgLz4KICAgIDxjaXJjbGUgY3g9IjUwIiBjeT0iNTAiIHI9IjI4IiBmaWxsPSJ3aGl0ZSIgLz4KCTxyZWN0IHg9IjM1IiB5PSIxOCIgd2lkdGg9IjMwIiBoZWlnaHQ9IjY0IiByeD0iNCIgZmlsbD0id2hpdGUiIHN0cm9rZS13aWR0aD0iMnB4IiBzdHJva2U9ImJsYWNrIiAvPgogICAgPGNpcmNsZSBjeD0iNTAiIGN5PSI1MCIgcj0iMjAiIHN0cm9rZT0iYmxhY2siIGZpbGw9IndoaXRlIiBzdHJva2Utd2lkdGg9IjJweCIgLz4KCTxsaW5lIHgxPSI1MCIgeTE9IjUwIiB4Mj0iNTAiIHkyPSIzNyIgc3Ryb2tlPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIycHgiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+CiAgICAgICAgPGFuaW1hdGVUcmFuc2Zvcm0KICAgICAgICAgICAgYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIgogICAgICAgICAgICBiZWdpbj0iMHMiCiAgICAgICAgICAgIGR1cj0iMjBzIgogICAgICAgICAgICB0eXBlPSJyb3RhdGUiCiAgICAgICAgICAgIGZyb209IjAgNTAgNTAiCiAgICAgICAgICAgIHRvPSIzNjAgNTAgNTAiCiAgICAgICAgICAgIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIgogICAgICAgIC8+Cgk8L2xpbmU+Cgk8bGluZSB4MT0iNTAiIHkxPSI1MCIgeDI9IjQyIiB5Mj0iNTAiIHN0cm9rZT0iYmxhY2siIHN0cm9rZS13aWR0aD0iMnB4IiBzdHJva2UtbGluZWNhcD0icm91bmQiPgogICAgICAgIDxhbmltYXRlVHJhbnNmb3JtCiAgICAgICAgICAgIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIKICAgICAgICAgICAgYmVnaW49IjBzIgogICAgICAgICAgICBkdXI9IjEyMHMiCiAgICAgICAgICAgIHR5cGU9InJvdGF0ZSIKICAgICAgICAgICAgZnJvbT0iMCA1MCA1MCIKICAgICAgICAgICAgdG89IjM2MCA1MCA1MCIKICAgICAgICAgICAgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiCiAgICAgICAgLz4KCTwvbGluZT4KPC9zdmc+" width="40" height="40" alt=""></div></div></div></form><tw-storydata name="BBC Adventure Dungeon 31B" startnode="5" creator="Twine" creator-version="2.3.5" ifid="2456747D-7DBC-44FA-BE73-6C0A2FB9AF38" zoom="0.6" format="Chapbook" format-version="1.0.0" options="" hidden><style role="stylesheet" id="twine-user-stylesheet" type="text/twine-css">@import url(https://fonts.googleapis.com/css?family=Press+Start+2P);

#backdrop {
  background: #111;
}
#page {
  background: #54722b;
  border-radius: 10px;
  color: #b2df6a;
  font-family: 'Press Start 2P', monospace;
  text-transform: uppercase;
  letter-spacing: 0.02em;
}
#page article > :first-child {
  font-size: 0.75em !important;
}
#page a {
  color: #b2df6a;
  text-decoration: none;
  border-bottom: 2px solid #b2df6a;
  padding: 3px 4px;
}
#page a:hover, #page a:active {
  background: #b2df6a;
  color: #54722b;
  border-bottom: none;
}

#page footer a {
  font-size: 90%;
  background: #b2df6a;
  color: #54722b;
  padding: 4px 5px;
  border: none;
}
#page footer a:hover, .inventory a:hover {
  background: #b2df6a;
  color: #54722b;
}
.inventory a:hover::before {
  content: ">";
  display: inline-block;
  padding-right: 4px;
  font-weight: bold;
}
#page footer a:hover::before {
  display: block;
  margin-top: -80px;
  margin-left: -5px;
  width: 120px;
  background-color: black;
  color: #fff;
  text-align: center;
  padding: 5px 0;
  border-radius: 6px;
  position: absolute;
  z-index: 1;
  content: "Only use if game breaks!";
}
#page footer.has-content {
  border-top: 2px solid #b2df6a;
  font-size: 0.75em;
  line-height: 17px;
}
#page article {
  align-items: inherit;
}

.nospace {
  margin-right: -12px;
}

footer > div > p > em::after {
  display: block;
  content: "V0.2.7 / BBC MICRO™";
  font-size: 8px;
}

input[type="text"], select {
  padding: 0;
  background: transparent;
  border: none;
  border-bottom: 2px solid;
  font-family: inherit;
  font-size: inherit;
  text-transform: inherit;
  color: inherit;
  margin-left: 4px;
}

.inventory a {
display: block;
float: left;
text-align: center;
font-size: 75% !important;
background-color: #b2df6a !important;
color: #54722b !important;
padding: 0 4px !important;
border: none !important;
line-height: 22px;
}</style><script role="script" id="twine-user-script" type="text/twine-javascript"></script><tw-tag name="!" color="green"></tw-tag>,<tw-tag name="?" color="green"></tw-tag>,<tw-tag name="Area" color="purple"></tw-tag>,<tw-tag name="DEATH" color="red"></tw-tag>,<tw-tag name="Death" color="red"></tw-tag>,<tw-tag name="End" color="green"></tw-tag>,<tw-tag name="Generic" color="yellow"></tw-tag>,<tw-tag name="Get" color="blue"></tw-tag>,<tw-tag name="Inv" color="blue"></tw-tag>,<tw-tag name="Talk" color="orange"></tw-tag><tw-passagedata pid="1" name="Start" tags="Area" position="1075,250" size="100,100">You are in an empty room.

[unless _deaths === 3]
A large [[Door-&gt;Start Door]] stands to the South.

There is a [[Window-&gt;Window]] to the East.
[if secretDoor === 1]
There is a [[Secret Door-&gt;Long Staircase]] to the North.
[cont]
&lt;div class=&quot;inventory&quot;&gt;[[Inventory]]&lt;/div&gt;

[if _deaths === 3]
The Dandelion destroys your world.

. . .

Thank you for playing BBC Adventure Dungeon 31B.

Play again?

[[Y-&gt;Opening]] / [[N-&gt;Menu]]

[if _demon === 1]
&amp;gt; {text input for: &#39;_secretEnd&#39;, required: false}

&amp;gt; [[...-&gt;Fuck Demon]]
[cont]</tw-passagedata><tw-passagedata pid="2" name="Dead End" tags="Generic" position="2775,100" size="100,100">You cannot go that way

&amp;gt; {back link}</tw-passagedata><tw-passagedata pid="3" name="Start Door" tags="" position="1025,400" size="100,100">You open the large door.
[if _demon === 1]
/Keep going.
[cont]
There is a [[Hallway]] to the south.

&amp;gt; [[Back-&gt;Start]]</tw-passagedata><tw-passagedata pid="4" name="Hallway" tags="Area" position="900,400" size="100,100">You are in a hallway.
[if _demon === 1]
/There&#39;s a gift for you in the Kitchen.
[cont]
[if getCarrot === 0]
There is a [[Carrot]] on a table.

[if getCarrot === 1]
There is a table.

[cont]
There is an [[Empty Room-&gt;Start]] to the North.

There is a [[Kitchen]] to the East.

There is a [[Fleshing Room]] to the South.

&lt;div class=&quot;inventory&quot;&gt;[[Inventory]]&lt;/div&gt;</tw-passagedata><tw-passagedata pid="5" name="Opening" tags="!" position="975,100" size="200,100">{embed passage: &#39;Reset&#39;}
[after 150ms; append]
Run
[after 300ms; append]
 &quot;BAD&quot;
[after 450ms; append]
  goto
[after 600ms; append]
31B-&lt;span class=&quot;nospace&quot;&gt;
[after 750ms; append]
361690_&lt;span class=&quot;nospace&quot;&gt;
[after 900ms; append]
SERIAL_&lt;span class=&quot;nospace&quot;&gt;
[after 1050ms; append]
12
[after 1800ms]
Welcome to BBC Adventure Dungeon 31B
[after 2200ms]
.
[after 2500ms;append]
.
[after 2900ms;append]
.
[after 3300ms]
&amp;gt; [[Start]]
[after 3700ms]
&amp;gt; [[Quit-&gt;Menu]]</tw-passagedata><tw-passagedata pid="6" name="No Get" tags="Generic" position="2675,200" size="100,100">You cannot get that

&amp;gt; {back link}</tw-passagedata><tw-passagedata pid="7" name="Carrot" tags="Get" position="800,400" size="100,100">getCarrot: 1
--
You get the carrot

[if _demon === 1]
/Do not insert.
[cont]

&amp;gt; [[Back-&gt;Hallway]]</tw-passagedata><tw-passagedata pid="8" name="Kitchen" tags="Area" position="900,550" size="100,100">You are in a Kitchen Parlour.
[if killBear === 0]
A narcissistic [[Bear]] blocks your path.
[cont]
[if killBear === 1]
The [[Kitchen-&gt;Kitchen 2]] continues to the East.
[cont]
[if getMirror === 1]
&amp;gt; [[Use Mirror-&gt;Bear 2]]
[cont]
There is a [[Hallway]] to the West.

&lt;div class=&quot;inventory&quot;&gt;[[Inventory]]&lt;/div&gt;</tw-passagedata><tw-passagedata pid="9" name="Bear" tags="DEATH" position="800,550" size="100,100">[if _demon === 1]
. . .

/I lied.
[cont]
[after 1300ms]
.
[after 1600ms;append]
.
[after 1900ms;append]
.
[after 2500ms]
The Bear eats you.
[after 3500ms]
Thank you for playing BBC Adventure Dungeon 31B.

Play again?

[[Y-&gt;Opening]] / [[N-&gt;Menu]]</tw-passagedata><tw-passagedata pid="10" name="Menu" tags="!" position="2325,100" size="200,100">_displayDate: (now.year - 100)
--
&lt;h3&gt;BBC Computer 32K&lt;/h3&gt;

&lt;sup style=&quot;margin-top: -20px; display: block;&quot;&gt;BASIC&lt;/sup&gt;

&amp;gt; {text input for: &#39;_query&#39;, required: false}

&amp;gt; [[GO-&gt;Menu]]

[unless _query === &#39;help&#39;||_query === &#39;deaths&#39;||_query === &#39;credits&#39;||_query === &#39;?&#39;||_query === &#39;restart&#39;||_query === &#39;time&#39;||_query === &#39;run&#39;||_query === &#39;changelog&#39;]
/I do not understand &quot;{_query}&quot;.
For a list of commands, type &quot;help&quot;.

[cont]
[if _query === &#39;deaths&#39;]
You have died {_deaths} times this playthrough.
Clicking &quot;Restart&quot; will reset this number.

[cont]
[if _query === &#39;changelog&#39;]
View Changelog?

&amp;gt; [[Changelog]]

[cont]
[if _query === &#39;time&#39;]
The date is {now.day} {now.monthName}, {_displayDate}.

The time is {now.timestamp}.

[cont]
[if _query === &#39;help&#39;]
Common Commands:

&amp;gt; run

&amp;gt; time

&amp;gt; deaths

&amp;gt; changelog

&amp;gt; credits

&amp;gt; restart

[cont]
[if _query === &#39;run&#39;]
What application would you like to run?

&amp;gt; [[World Wide Web-&gt;http://cybersandbox.ca/]]

&amp;gt; [[BBC Adventure Dungeon 31B-&gt;Start]]

[cont]
[if _query === &#39;hello&#39;]
&quot;Goodbye&quot;

[cont]
[if _query === &#39;restart&#39;]
The dandelion destroys your world.

Play again?

[[Y-&gt;Opening]] / [[Y-&gt;Opening]]

[cont]
[if _query === &#39;credits&#39;]
Game by Carter Lovelace

&lt;a href=&quot;mailto:carter@strategylab.ca&quot;&gt;Email&lt;/a&gt; / [[Website-&gt;http://cybersandbox.ca]]

Concept &amp; Story by Mike &quot;DoctorRandomercam&quot; Stephenson

&amp;gt; [[Subscribe to Mike-&gt;https://www.youtube.com/user/DoctorRandomercam]]

&amp;gt; [[Watch the Series-&gt;https://www.youtube.com/playlist?list=PLlSaFeesXDfQGSKehycnKX8posnT3BoxE]]

[[Special Thanks]]</tw-passagedata><tw-passagedata pid="11" name="Inventory" tags="!" position="2325,225" size="200,100">You have:

({_score}) Coins

[if getCarrot === 1]
Carrot
[cont]
[if getClunker === 1]
Clunker
[cont]
[if getFeather === 1]
Feather
[cont]
[if getGoblin === 1]
Goblin
[cont]
[if getClock=== 1]
Clock
[cont]
[if getSandals === 1]
Sandals
[cont]
[if getSandals &gt; 1]
{getSandals} Sandals
[cont]
[if getCrap === 1]
Trash
[cont]
[if getCrap &gt; 1]
{getCrap} Trash
[cont]
[if getMirror === 1]
Hand Mirror
[cont]
[if getJug === 1]
Jug of Rubbing Butter
[cont]
[if getSpoon === 1]
Spoon
[cont]
[if getKey === 1]
Old Key
[cont]
[if getAmulet === 1]
Amulet of Succuroth
[cont]
[if getDuck === 1]
Subdued Waterfowl
[cont]
[if getGlob === 1]
Globule of Raw Air
[cont]
[if getBeans === 1]
Mysterious Beans
[cont]
[if getHalbard === 1]
The Bewitched Halbard of Gibbitus
[cont]
[if getArras === 1]
Amulet of Arras
[cont]
&amp;gt; {back link}

. . .

&amp;gt; [[Give Up-&gt;Suicide]]</tw-passagedata><tw-passagedata pid="12" name="Reset" tags="!" position="2325,350" size="200,100">getCarrot: 0
getClunker: 0
getGoblin: 0
getFeather: 0
getSandals: 0
getClock: 0
getAmulet: 0
getDuck: 0
getMirror: 0
getBeans: 0
getSpoon: 0
getJug: 0
getGlob: 0
getHumid: 0
getArras: 0
getCrap: 0
getTroll: 0
getHalbard: 0

getKey: 0
getCorn: 0
getHogfat: 0

woodCounter: 0
spinCounter: 0
elephantCounter: 0
wallCounter: 0
oobCounter: 0

killBear: 0
killMonkey: 0
killPrincess: 0
killOrc: 0
killStatue: 0

lobster: 0
feedHorse: 0
getGollywog: 0
wrongTroll: 0
wizardTalk: 0
wizardQuest: 0
ghostDrink: 0
ghostKey: 0
minLang: 0
openLobby: 0
secretDoor: 0

_score: 0
_deaths: (passage.visits - 1)
_dandelion (_deaths &lt; 1): 0
_demon (_deaths &lt; 1): 0

_query: &#39;?&#39;
_name: &#39;who am I?&#39;
_ghost: &#39;who sent me?&#39;
_wizard: &#39;no you did not&#39;
_secretEnd: &#39;/&#39;
--</tw-passagedata><tw-passagedata pid="13" name="Fleshing Room" tags="Area" position="900,700" size="100,100">You are in a Fleshing Room.

[if getClunker === 0 &amp;&amp; _dandelion &lt; 2||getClunker === 0 &amp;&amp; _dandelion &gt; 2]
A Brown [[Clunker]] hangs on the wall.
[cont]
[if _dandelion === 2]
A [[Dandelion-&gt;Dandelion Get]] hangs on the wall.
[cont]
There is a [[Hallway]] to the North.

There is a [[Weird Maze-&gt;Maze 1]] to the West.

There is a [[Vestibule]] to the South.

&lt;div class=&quot;inventory&quot;&gt;[[Inventory]]&lt;/div&gt;</tw-passagedata><tw-passagedata pid="14" name="Clunker" tags="Get" position="800,700" size="100,100">getClunker: 1
--
You get the Clunker

[if _demon === 1]
/I do not understand &quot;Clunker&quot;.
[cont]

&amp;gt; [[Back-&gt;Fleshing Room]]</tw-passagedata><tw-passagedata pid="15" name="Maze 1" tags="" position="900,825" size="100,100">You are in a weird maze.
[if _demon === 1]
/The exit is West.
[cont]
[after 500ms]
Where would you like to go?

&amp;gt; [[North-&gt;Maze 2]]

&amp;gt; [[East-&gt;Maze 1]]

&amp;gt; [[South-&gt;Fleshing Room]]

&amp;gt; [[West-&gt;Dead End]]</tw-passagedata><tw-passagedata pid="16" name="Maze 2" tags="" position="1025,825" size="100,100">You are in a weird maze.
[if _demon === 1]
/The exit is East.
[cont]
[after 500ms]
Where would you like to go?

&amp;gt; [[North-&gt;Maze 3]]

&amp;gt; [[East-&gt;Dead End]]

&amp;gt; [[South-&gt;Maze 1]]

&amp;gt; [[West-&gt;Maze 4]]</tw-passagedata><tw-passagedata pid="17" name="Maze 3" tags="" position="900,950" size="100,100">You are in a weird maze.
[if getGoblin === 0]
There is a [[Goblin]]
[cont]
[after 500ms]
[if _demon === 1]
/The exit is North.
[cont]
Where would you like to go?

&amp;gt; [[North-&gt;Wheelhouse]]

&amp;gt; [[East-&gt;Maze 1]]

&amp;gt; [[South-&gt;Maze 2]]

&amp;gt; [[West-&gt;Maze 4]]</tw-passagedata><tw-passagedata pid="18" name="Goblin" tags="Talk" position="800,950" size="100,100">The goblin looks at you.

What would you like to do?

&amp;gt; [[Talk-&gt;Talk Goblin]]

&amp;gt; [[Attack-&gt;No Attack]]

&amp;gt; [[Get-&gt;Goblin Get]]

&amp;gt; [[Retreat-&gt;Maze 3]]</tw-passagedata><tw-passagedata pid="19" name="No Respond" tags="Generic" position="2775,200" size="100,100">You get no response.

&amp;gt; {back link}</tw-passagedata><tw-passagedata pid="20" name="No Attack" tags="Generic" position="2675,100" size="100,100">It does not wish to be attacked

&amp;gt; {back link}</tw-passagedata><tw-passagedata pid="21" name="Goblin Get" tags="Get" position="700,850" size="100,100">getGoblin: 1
--
You get the goblin
[if _demon === 1]
/Good luck getting the goblin smell off your clothes
[cont]

&amp;gt; [[Back-&gt;Maze 3]]</tw-passagedata><tw-passagedata pid="22" name="Maze 4" tags="" position="1025,950" size="100,100">You have fallen into quicksand!
[if _demon === 1]
/Now struggle.
[cont]
[after 500ms]
Where would you like to go?

&amp;gt; [[North-&gt;Maze 3]]

&amp;gt; [[East-&gt;Maze 2]]

&amp;gt; [[South-&gt;Stable]]

&amp;gt; [[West-&gt;Dead End]]</tw-passagedata><tw-passagedata pid="23" name="Stable" tags="Area" position="1025,1075" size="100,100">You are in a Stable.
[if _demon === 1]
/Open the portcullis.
[cont]

There is a [[Horse]].

There is a [[Weird Maze-&gt;Maze 4]] to the North.

There is a [[Portcullis]] to the East.

There is a [[Kitchen-&gt;Kitchen 2]] to the West.

&lt;div class=&quot;inventory&quot;&gt;[[Inventory]]&lt;/div&gt;</tw-passagedata><tw-passagedata pid="24" name="Horse" tags="Talk" position="1100,1200" size="100,100">[if _demon === 0]
The horse looks at you.
[cont]
[if _demon === 1]
The horse at you
[cont]

What would you like to do?

&amp;gt; [[Talk-&gt;Talk Horse]]

&amp;gt; [[Attack-&gt;No Attack]]

&amp;gt; [[Get-&gt;No Get]]

&amp;gt; [[Retreat-&gt;Stable]]</tw-passagedata><tw-passagedata pid="25" name="Portcullis" tags="Death" position="925,1075" size="100,100">You open the Portcullis.
[after 1300ms]
.
[after 1600ms;append]
.
[after 1900ms;append]
.
[after 2500ms]
The Horse tramples you to death
[after 3500ms]
Thank you for playing BBC Adventure Dungeon 31B.

Play again?

[[Y-&gt;Opening]] / [[N-&gt;Menu]]</tw-passagedata><tw-passagedata pid="26" name="Window" tags="" position="1150,400" size="100,100">It&#39;s a large, open window. You could easily climb through it.

Outside, there is a [[Garden-&gt;Garden]].

&amp;gt; [[Back-&gt;Start]]</tw-passagedata><tw-passagedata pid="27" name="Garden" tags="Area DEATH" position="1275,400" size="100,100">You are in a garden.

[unless _dandelion === 1]
There is a [[Fountain]].

There is a [[Clearing]] to the North.

There is a [[Forest]] to the East.

There is a [[Jungle]] to the South.

There is a [[Window-&gt;Start]] to the West.

&lt;div class=&quot;inventory&quot;&gt;[[Inventory]]&lt;/div&gt;

[if _dandelion === 1]
The Dandelion destroys your world.

. . .

Thank you for playing BBC Adventure Dungeon 31B.

Play again?

[[Y-&gt;Dandelion End]] / [[N-&gt;Dandelion End]]</tw-passagedata><tw-passagedata pid="28" name="Fountain" tags="" position="1275,300" size="100,100">You look at the Fountain.
[if lobster === 0]
There is a [[Lobster-&gt;Lobster 1]].
[cont]
[if lobster === 1]
There is an Engulfed Lobster.
[cont]
&amp;gt; [[Back-&gt;Garden]]</tw-passagedata><tw-passagedata pid="29" name="Lobster 1" tags="Talk" position="1275,200" size="100,100">The lobster ignores you.

What would you like to do?

&amp;gt; [[Talk-&gt;No Respond]]

&amp;gt; [[Clean-&gt;Lobster 3]]

&amp;gt; [[Get-&gt;Lobster 2]]

&amp;gt; [[Retreat-&gt;Garden]]</tw-passagedata><tw-passagedata pid="30" name="Lobster 2" tags="" position="1225,100" size="100,100">The fountain turns to ice.

&amp;gt; [[Back-&gt;Garden]]</tw-passagedata><tw-passagedata pid="31" name="Forest" tags="Area" position="1275,525" size="100,100">You are in a Forest.

Six [[Pixies]] dance around a [[Statue]] of a frightened bishop. There is a [[Pogo Stick]].

To the West there is a [[Garden]].

To the North there is a [[Beach-&gt;Beach 1]].

&lt;div class=&quot;inventory&quot;&gt;[[Inventory]]&lt;/div&gt;</tw-passagedata><tw-passagedata pid="32" name="Pixies" tags="Talk" position="1175,525" size="100,100">The pixies continue dancing.

What would you like to do?

&amp;gt; [[Talk-&gt;No Get]]

&amp;gt; [[Attack-&gt;No Get]]

&amp;gt; [[Get-&gt;Suicide]]

&amp;gt; [[Retreat-&gt;Forest]] </tw-passagedata><tw-passagedata pid="33" name="Statue" tags="" position="1075,525" size="100,100">It&#39;s a statue of a bishop.
It looks frightened.

&amp;gt; [[Back-&gt;Forest]]</tw-passagedata><tw-passagedata pid="34" name="Pogo Stick" tags="" position="1075,625" size="100,100">[if getHogfat === 0]
The Pogo Stick is encased in [[Hog Fat]].
[cont]
[if getHogfat === 1]
You don&#39;t need that.
[cont]
&amp;gt; [[Back-&gt;Forest]]</tw-passagedata><tw-passagedata pid="35" name="Beach 1" tags="Area" position="1450,525" size="100,100">seaCounter: 0
--
You are on a beach.
[if _demon === 0]
A [[Dog-&gt;Dog 1]] is playing a [[Hurdy Gurdy-&gt;Dog 2]] while a [[Wizard]] creates Trolls inside a [[Wigwam]].
[cont]
[if _demon === 1]
A [[Dog-&gt;Dog 1]] is playing a [[Hurdy Gurdy-&gt;Dog 2]] near a burning [[Wigwam]].
[cont]
[if getFeather === 2]
There is a [[Feather]] on the sand.

[cont]
To the North the [[Sea]] is Orange.

There is a [[Forest-&gt;Forest]] to the South.

&amp;gt; [[Walk West-&gt;Beach 4]]

&amp;gt; [[Walk East-&gt;Beach 2]]

&lt;div class=&quot;inventory&quot;&gt;[[Inventory]]&lt;/div&gt;</tw-passagedata><tw-passagedata pid="36" name="Dog 1" tags="Talk" position="1550,525" size="100,100">The dog is playing a [[Hurdy Gurdy-&gt;Dog 2]]

What would you like to do?

&amp;gt; [[Talk-&gt;Dog 4]]

&amp;gt; [[Attack-&gt;Dog 2]]

&amp;gt; [[Get-&gt;No Get]]

&amp;gt; [[Retreat-&gt;Beach 1]]</tw-passagedata><tw-passagedata pid="37" name="Wizard" tags="Talk" position="2875,1325" size="100,100">[if getKey === 0]
You get no response.

&amp;gt; [[Back-&gt;Beach 1]]
[cont]
[if getKey === 1 &amp;&amp; wrongTroll === 0]
&quot;Did you bring the ingredients?&quot;

&amp;gt; [[&quot;Yes&quot;-&gt;Ingredients]]

&amp;gt; [[&quot;No&quot;-&gt;Wizard Quest]]

&amp;gt; [[Back-&gt;Wigwam]]
[cont]
[if wrongTroll === 1]
&quot;You cunt.&quot;, says the Wizard.

&amp;gt; [[Continue-&gt;Wizard 2]]
[cont]
[if wrongTroll === 2]
&quot;Did you bring the ingredients?&quot;

&amp;gt; [[&quot;Yes&quot;-&gt;Wizard No]]

&amp;gt; [[&quot;No&quot;-&gt;Wizard 3]]

&amp;gt; [[Back-&gt;Wigwam]]
[cont]
[if wrongTroll === 3]
You cannot talk to that.

&amp;gt; [[Back-&gt;Wigwam]]
[cont]</tw-passagedata><tw-passagedata pid="38" name="Wigwam" tags="Area" position="2550,1200" size="200,100">[if _demon === 1]
/The Wigwam is on fire.

&amp;gt; [[Back-&gt;Beach 1]]
[cont]

[if getKey === 0]
The Wigwam is locked.

&amp;gt; [[Back-&gt;Beach 1]]
[cont]
[if getKey === 1]
You are in a Wigwam.

A [[Wizard]] is creating Trolls.

[if wrongTroll === 1]
There is a [[Wrong Troll-&gt;Wrong Troll 2]].
[cont]
[if wrongTroll === 2]
There is a [[Wrong Troll-&gt;No Respond]].
[cont]
[if wrongTroll === 3 &amp;&amp; getTroll === 0]
There is a [[Wrong Troll-&gt;Wizard]].

You sense a [[Presence-&gt;Demon 2]].
[cont]
[if getKey === 1]
&amp;gt; [[Exit Back Door-&gt;Mountain 4]]

&amp;gt; [[Exit Front Door-&gt;Beach 1]]

&lt;div class=&quot;inventory&quot;&gt;[[Inventory]]&lt;/div&gt;
[cont]</tw-passagedata><tw-passagedata pid="39" name="Sea" tags="DEATH" position="1825,325" size="100,100">seaCounter: (seaCounter + 1)
--
[if seaCounter === 4]
You drown  the sea.

. . .

Thank you for playing BBC Adventure Dungeon 31B.

Play again?

[[Y-&gt;Opening]] / [[N-&gt;Menu]]

[unless seaCounter === 4||seaCounter === 2]
You are  the sea.

What would you like to do?

&amp;gt; [[North-&gt;Sea]]

&amp;gt; [[East-&gt;Sea]]

&amp;gt; [[South-&gt;Beach 1]]

&amp;gt; [[West-&gt;Sea]]
[cont]
[if seaCounter === 2]
You are  the sea.

What would you like to do?

&amp;gt; [[North-&gt;Island]]

&amp;gt; [[East-&gt;Sea]]

&amp;gt; [[South-&gt;Sea]]

&amp;gt; [[West-&gt;Sea]]</tw-passagedata><tw-passagedata pid="40" name="Dog 2" tags="" position="1550,625" size="100,100">getFeather: 2
--
You try to get the Hurdy Gurdy.
[after 1300ms]
.
[after 1600ms;append]
.
[after 1900ms;append]
.
[after 2500ms]
The Dog bites you.
[after 2700ms]
.
[after 3000ms;append]
.
[after 3300ms;append]
.
[after 3800ms]
A worm crawls out of your leg and turns into a Feather.

&amp;gt; [[Talk-&gt;Dog 4]]

&amp;gt; [[Attack-&gt;Dog 3]]

&amp;gt; [[Get-&gt;No Get]]

&amp;gt; [[Retreat-&gt;Beach 1]]</tw-passagedata><tw-passagedata pid="41" name="Dog 3" tags="" position="1650,625" size="100,100">The Dog bites you.
[after 1300ms]
.
[after 1600ms;append]
.
[after 1900ms;append]
.
[after 2500ms]
Your head turns wooden for a few seconds but the feeling passes.

&amp;gt; [[Talk-&gt;Dog 4]]

&amp;gt; [[Attack-&gt;No Attack]]

&amp;gt; [[Get-&gt;No Get]]

&amp;gt; [[Retreat-&gt;Beach 1]]</tw-passagedata><tw-passagedata pid="42" name="Feather" tags="Get" position="1550,725" size="100,100">getFeather: 1
--
You get the feather.

&amp;gt; [[Back-&gt;Beach 1]]</tw-passagedata><tw-passagedata pid="43" name="Dog 4" tags="" position="1750,625" size="100,100">You attempt to talk to the dog.

&quot;The gaudy image you project on your world is like the blood that oozes from every inflamed pore of the gluttonous manchild of Baba-Voo. Turn back, foolhardy denizen! Ne&#39;er on this most brutal of earths has a blind crawler as thee captured but a sliver of truth. Flee!&quot;

&amp;gt; [[Talk-&gt;No Respond]]

&amp;gt; [[Attack-&gt;Dog 3]]

&amp;gt; [[Get-&gt;No Get]]

&amp;gt; [[Retreat-&gt;Beach 1]]</tw-passagedata><tw-passagedata pid="44" name="Dandelion Get" tags="DEATH Get" position="1450,200" size="100,100">_dandelion: (_dandelion + 1)
--
[after 1300ms]
.
[after 1600ms;append]
.
[after 1900ms;append]
.
[after 2500ms]
The Dandelion destroys your world
[if _dandelion === 2;append]
[after 2500ms]
Again.
[if _dandelion === 3;append]
[after 2500ms]
Thrice.
[if _dandelion &gt; 3;append]
[after 2500ms]
{_dandelion} times.
[after 3500ms]
Thank you for playing BBC Adventure Dungeon 31B.

Play again?

[[Y-&gt;Opening]] / [[N-&gt;Menu]]</tw-passagedata><tw-passagedata pid="45" name="Dandelion" tags="Talk" position="1450,300" size="100,100">You eye the dandelion cautiously.

Whay would you like to do?

&amp;gt; [[Eat-&gt;Dandelion Get]]

&amp;gt; [[Attack-&gt;No Attack]]

&amp;gt; [[Get-&gt;Dandelion Get]]

&amp;gt; [[Retreat-&gt;Garden]]</tw-passagedata><tw-passagedata pid="46" name="Clearing" tags="Area" position="1450,400" size="100,100">[if woodCounter &lt; 3]
You are in a clearning with a large [[Tree]].
[cont]
[if woodCounter === 3]
There is a [[Beach-&gt;Beach 2]] to the North.
[cont]
There is a [[Dandelion-&gt;Dandelion]] in the grass.

There is a [[Garden]] to the South.

&lt;div class=&quot;inventory&quot;&gt;[[Inventory]]&lt;/div&gt;</tw-passagedata><tw-passagedata pid="47" name="Tree" tags="" position="1575,400" size="100,100">[if woodCounter &lt; 3]
You are in a Tree. There is [[Wood]].
[if _demon === 1]
Suddenly a snake.
[cont]
You cannot go North.
[if woodCounter === 3]
You are a Beaver.

There is a [[Beach-&gt;Beach 2]] to the North.
[cont]
There is a [[Clearing]] to the South.</tw-passagedata><tw-passagedata pid="48" name="Wood" tags="Talk" position="1575,300" size="100,100">There is wood.

What would you like to do?

&amp;gt; [[Eat-&gt;Eat Wood]]

&amp;gt; [[Get-&gt;No See]]

&amp;gt; [[Attack-&gt;No Hear]]

&amp;gt; [[Back-&gt;Tree]]</tw-passagedata><tw-passagedata pid="49" name="No See" tags="Generic" position="3100,200" size="100,100">/I don&#39;t see it.

[if _demon === 1]
&amp;gt; [[Address Demon]]
[cont]
&amp;gt; {back link}</tw-passagedata><tw-passagedata pid="50" name="No Hear" tags="Generic" position="3000,100" size="100,100">You can&#39;t hear it.

&amp;gt; {back link}</tw-passagedata><tw-passagedata pid="51" name="Beach 2" tags="Area" position="1700,450" size="100,100">You are on a beach.
[if getBeans === 0]
A [[Dwarf Minotaur]] is frollicking with a handful of Mysterious Beans.
[cont]
[if getBeans === 1]
The words &quot;Af kyei n&#39;all&quot; are scrawled in the sand.
[cont]
To the North the [[Sea]] is magenta.
[unless woodCounter === 3]
To the South there is a [[Clearing]].
[cont]
&amp;gt; [[Walk East-&gt;Beach 3]]

&amp;gt; [[Walk West-&gt;Beach 1]]

&lt;div class=&quot;inventory&quot;&gt;[[Inventory]]&lt;/div&gt;</tw-passagedata><tw-passagedata pid="52" name="Dwarf Minotaur" tags="Talk" position="1700,350" size="100,100">&quot;Ye be seen &#39;em off&#39;n?&quot;
[if minLang === 1]
&amp;gt; [[&quot;Ilhlo Prolobro&quot;-&gt;Get Beans]]
[cont]
&amp;gt; [[&quot;What?&quot;-&gt;No Respond]]

&amp;gt; [[Retreat-&gt;Beach 2]]</tw-passagedata><tw-passagedata pid="53" name="Beach 3" tags="Area" position="1825,450" size="100,100">You are on a beach.

There&#39;s nothing here.

To the North and East the [[Sea]] is Pink.

&amp;gt; [[Walk West-&gt;Beach 2]]

&lt;div class=&quot;inventory&quot;&gt;[[Inventory]]&lt;/div&gt;</tw-passagedata><tw-passagedata pid="54" name="Beach 4" tags="Area" position="1950,450" size="100,100">You are on a beach.

There&#39;s nothing here.

To the North and West the [[Sea]] is Aquamarine.

&amp;gt; [[Walk East-&gt;Beach 1]]

&lt;div class=&quot;inventory&quot;&gt;[[Inventory]]&lt;/div&gt;</tw-passagedata><tw-passagedata pid="55" name="Suicide" tags="DEATH" position="2525,225" size="100,100">[after 1300ms]
.
[after 1600ms;append]
.
[after 1900ms;append]
.
[after 2500ms]
You die.
[after 3500ms]
Thank you for playing BBC Adventure Dungeon 31B.

Play again?

[[Y-&gt;Opening]] / [[N-&gt;Menu]]</tw-passagedata><tw-passagedata pid="56" name="Jungle" tags="Area" position="1350,700" size="100,100">You are in a Jungle.

There is a [[Garden]] to the North.

The Jungle is too dense to the East.

There is a [[Desert]] to the South.

The [[Jungle-&gt;Jungle 2]] continues to the West.

&lt;div class=&quot;inventory&quot;&gt;[[Inventory]]&lt;/div&gt;</tw-passagedata><tw-passagedata pid="57" name="Desert" tags="Area" position="1725,875" size="100,100">You are in a Desert.

There is a [[Jungle]] to the North.

There is a [[Mountain]] to the East.

There is an [[Igloo]] to the South.

There is a large [[Sand Dune]] to the West.

&lt;div class=&quot;inventory&quot;&gt;[[Inventory]]&lt;/div&gt;</tw-passagedata><tw-passagedata pid="58" name="Igloo" tags="" position="1725,1000" size="100,100">iglooCounter: (passage.visits)
--
You are in an Igloo in a Desert in a Jungle in a Garden.
[if getCorn === 2]
The Secret Door has been sealed with slime.
[cont]

[if iglooCounter % 4 == 0]
You are at the centre of the Igloo. There is a [[Hole]] in the ceiling.

[cont]
[if iglooCounter % 7 == 0]
There is a [[Rope]] hanging from the ceiling.

[cont]
What would you like to do?

&amp;gt; [[North-&gt;Igloo]]

&amp;gt; [[East-&gt;Igloo]]

&amp;gt; [[South-&gt;Igloo]]

&amp;gt; [[West-&gt;Igloo]]

&amp;gt; Exit to [[Desert]]
[if getCorn === 1]
&amp;gt; Exit to [[Secret Door-&gt;Long Path]]
</tw-passagedata><tw-passagedata pid="59" name="Rope" tags="DEATH" position="1825,1000" size="100,100">You get the rope.
[after 1300ms]
.
[after 1600ms;append]
.
[after 1900ms;append]
.
[after 2500ms]
You hang yourself.
[after 3500ms]
Thank you for playing BBC Adventure Dungeon 31B.

Play again?

[[Y-&gt;Opening]] / [[N-&gt;Menu]]</tw-passagedata><tw-passagedata pid="60" name="Jungle 2" tags="Area" position="1400,875" size="100,100">You are in a Jungle.

There is a [[Gollywog]] to the North.

There is a [[path-&gt;Jungle]] to the East.

There is a [[Desert]] to the South.

The jungle is too dense to the West.

&lt;div class=&quot;inventory&quot;&gt;[[Inventory]]&lt;/div&gt;</tw-passagedata><tw-passagedata pid="61" name="Gollywog" tags="Talk DEATH" position="1400,975" size="100,100">[if getGollywog === 0]
The Gollywog is trying to climb a tree.

What would you like to do?

&amp;gt; [[Talk-&gt;No Attack]]

&amp;gt; [[Attack-&gt;Gollywog 3]]

&amp;gt; [[Get-&gt;No Attack]]

&amp;gt; [[Retreat-&gt;Gollywog 2]]

[if getGollywog === 1]

The Gollywog doesn&#39;t let you get away.

. . .

Thank you for playing BBC Adventure Dungeon 31B.

Play again?

[[Y-&gt;Opening]] / [[N-&gt;Menu]]</tw-passagedata><tw-passagedata pid="62" name="Gollywog 2" tags="Get" position="1500,975" size="100,100">_score: (_score + 1)
getGollywog: 1
__
You avoid the Gollywog.

[after 1300ms]
.
[after 1600ms;append]
.
[after 1900ms;append]
.
[after 2500ms]

You scored 1 points. Your score is now 1.

&amp;gt; [[Back-&gt;Jungle 2]]
</tw-passagedata><tw-passagedata pid="63" name="Sand Dune" tags="Area" position="1850,875" size="100,100">You are in a Desert.
[unless killMonkey === 1]
A [[Sand Monkey]] is hiding behind a dune.
[cont]
There is a [[path-&gt;Desert]] to the East.

The [[Desert-&gt;Desert 2]] continues to the West.

&amp;gt; [[Preform Ritual-&gt;Ritual]]

&lt;div class=&quot;inventory&quot;&gt;[[Inventory]]&lt;/div&gt;</tw-passagedata><tw-passagedata pid="64" name="Sand Monkey" tags="Talk" position="2050,775" size="100,100">[if killMonkey === 0]
The Sand Monkey thinks you can&#39;t see him.

What would you like to do?

&amp;gt; [[Talk-&gt;No Respond]]

&amp;gt; [[Attack-&gt;Kill Monkey]]

&amp;gt; [[Get-&gt;No Get]]

&amp;gt; [[Retreat-&gt;Sand Monkey 3]]

[if killMonkey === 1]

The Sand Monkey is dead.

&amp;gt; [[Back-&gt;Desert]]</tw-passagedata><tw-passagedata pid="65" name="Kill Monkey" tags="Get" position="1850,775" size="100,100">_score: (_score + 1)
killMonkey: 1
--
You attack the Sand Monkey.

You deal 1 damage.

. . .
[after 1000ms]
The Sand Monkey attacks you.

It misses.

. . .
[after 2000ms]
You attack the Sand Monkey.

You deal 1 damage.

. . .
[after 3000ms]
You have killed the Sand Monkey.

You got 1 points. Your score is now 1.

&amp;gt; [[Back-&gt;Desert]]</tw-passagedata><tw-passagedata pid="66" name="Sand Monkey 3" tags="DEATH" position="1950,775" size="100,100">[after 1300ms]
.
[after 1600ms;append]
.
[after 1900ms;append]
.
[after 2500ms]
Never turn your back on a Sand Monkey.

. . .
[after 3500ms]
Thank you for playing BBC Adventure Dungeon 31B.

Play again?

[[Y-&gt;Opening]] / [[N-&gt;Menu]]</tw-passagedata><tw-passagedata pid="67" name="Hole" tags="" position="1625,1000" size="100,100">You are at the centre of the Igloo.

Above a hole in the ceiling sits an enormous Ig.

[if getCorn === 0]
There is an [[Ear of Corn]] on the floor below.
[cont]

&amp;gt; [[Back-&gt;Igloo]]</tw-passagedata><tw-passagedata pid="68" name="Ear of Corn" tags="Get" position="1625,1100" size="100,100">getCorn: 1
--
You eat the sticky, brown corn. You feel sick.

You notice a [[secret exit-&gt;Long Path]] from the igloo.

&amp;gt; [[Back-&gt;Igloo]]</tw-passagedata><tw-passagedata pid="69" name="Long Path" tags="" position="1625,1200" size="100,100">getCorn: 2
--
You are on a Long Path.

There is an [[Igloo-&gt;Igloo 2]] to the North.

What would you like to do?

&amp;gt; [[North-&gt;Igloo 2]]

&amp;gt; [[East-&gt;Dead End]]

&amp;gt; [[South-&gt;Dead End]]

&amp;gt; [[West-&gt;Dead End]]</tw-passagedata><tw-passagedata pid="70" name="Igloo 2" tags="" position="1725,1200" size="100,100">_score: (_score + 3)
--
You are in the centre of the Igloo.

Gallons upon gallons of rusty, fishy, brown slime come flooding from the hol ein the ceiling. You are quickly engulfed in the torrent and temporarily immobilised by the chunks of anonymous matter accruing in your eyes, nose and mouth.
[after 3000ms]
.
[after 3300ms;append]
.
[after 3600ms;append]
.
[after 5000ms]
The ear of corn you ate earlier causes you to void your stomach.

You are violently sick.
[after 6000ms]
. . .

You scored 3 points. Your score is now 3.

&amp;gt; [[Back-&gt;Igloo]]</tw-passagedata><tw-passagedata pid="71" name="Mountain" tags="Area" position="1450,1350" size="100,100">You are up a mountain.

A [[Goat]] is wearing sandals.

&amp;gt; [[Ascend-&gt;Mountain 2]] East

&amp;gt; [[Descend-&gt;Desert]] West

&lt;div class=&quot;inventory&quot;&gt;[[Inventory]]&lt;/div&gt;</tw-passagedata><tw-passagedata pid="72" name="Goat" tags="Talk" position="1450,1475" size="100,100">The goat is wearing [[Sandals]].

What would you like to do?

&amp;gt; [[Talk-&gt;Goat 2]]

&amp;gt; [[Attack-&gt;No Attack]]

&amp;gt; [[Get-&gt;Sandals]]

&amp;gt; [[Back-&gt;Mountain]]</tw-passagedata><tw-passagedata pid="73" name="Sandals" tags="Get" position="1500,1575" size="100,100">getSandals: (getSandals + 1)
--
You get the Sandals.

&amp;gt; [[Back-&gt;Goat]]</tw-passagedata><tw-passagedata pid="74" name="Goat 2" tags="" position="1400,1575" size="100,100">[if _demon === 0]
The goat snubs you.
[cont]
[if _demon === 1]
The goat ceases to exist for a moment, but the feeling passes.
[cont]

&amp;gt; [[Back-&gt;Goat]]</tw-passagedata><tw-passagedata pid="75" name="Mountain 2" tags="Area" position="1725,1350" size="100,100">You are up a mountain.

There is a [[Cave]] to the North.

&amp;gt; [[Ascend-&gt;Mountain 3]] East

&amp;gt; [[Descend-&gt;Mountain]] South

&lt;div class=&quot;inventory&quot;&gt;[[Inventory]]&lt;/div&gt;</tw-passagedata><tw-passagedata pid="76" name="Cave" tags="Area" position="1725,1475" size="100,100">You are in a cave.

[if getClock === 0]
There is a [[Clock]] on the wall.
[cont]
The cave [[exit-&gt;Mountain 2]] is to the South.

&amp;gt; [[Go Deeper-&gt;Cave 2]]

&lt;div class=&quot;inventory&quot;&gt;[[Inventory]]&lt;/div&gt;</tw-passagedata><tw-passagedata pid="77" name="Clock" tags="" position="1675,1575" size="100,100">You read the clock.

It says &quot;Clock.&quot;

&amp;gt; [[Get-&gt;Get Clock]]

&amp;gt; [[Back-&gt;Cave]]</tw-passagedata><tw-passagedata pid="78" name="Get Clock" tags="Get" position="1675,1675" size="100,100">getClock: 1
--
You get the clock.

&amp;gt; [[Back-&gt;Cave]]</tw-passagedata><tw-passagedata pid="79" name="Cave 2" tags="" position="1775,1575" size="100,100">You are deeper in the cave.
[if minLang === 0]
There is a [[Tome]] on the floor.
[cont]
[if minLang === 1]
There is nothing here.
[cont]
&amp;gt; [[Back-&gt;Cave]]</tw-passagedata><tw-passagedata pid="80" name="Mountain 3" tags="Area" position="2050,1350" size="100,100">You are up a mountain.
[if _demon === 0]
There is a [[Princess]] in a [[Cage]].
[cont]
[if _demon === 1]
There is a #entity.name in a [[Cage]].
[cont]
&amp;gt; [[Ascend-&gt;Mountain 4]] North

&amp;gt; [[Descend-&gt;Mountain 2]] West

&lt;div class=&quot;inventory&quot;&gt;[[Inventory]]&lt;/div&gt;</tw-passagedata><tw-passagedata pid="81" name="Princess" tags="Talk" position="2050,1475" size="100,100">[if killPrincess === 0]
The princess looks distraught.

What would you like to do?

&amp;gt; [[Talk-&gt;Princess 2]]

&amp;gt; [[Attack-&gt;Kill Princess]]

&amp;gt; [[Get-&gt;No Get]]

&amp;gt; [[Retreat-&gt;Mountain 3]]

[if killPrincess === 1]
The princess is dead.

You didn&#39;t heed her words.

&amp;gt; [[Back-&gt;Mountain 3]]</tw-passagedata><tw-passagedata pid="82" name="Princess 2" tags="" position="2050,1575" size="100,100">&quot;Kill me! Surely kill me! Whatever I&#39;ve done I&#39;m sorry! Please end this nightmare!&quot;

&amp;gt; [[Talk-&gt;Princess 3]]

&amp;gt; [[Back-&gt;Mountain 3]]</tw-passagedata><tw-passagedata pid="83" name="Kill Princess" tags="" position="2150,1475" size="100,100">killPrincess: 1
--
You attack the Princess!
[after 1000ms]
. . .

You kill the princess!

[after 2000ms]
. . .

[[Back-&gt;Mountain 3]]</tw-passagedata><tw-passagedata pid="84" name="Princess 3" tags="" position="2050,1675" size="100,100">&quot;I&#39;m not a princess. I was just playing some dumb game and the next thing I know I&#39;m here. Who are you?&quot;

&amp;gt; {text input for: &#39;_name&#39;, required: true}

&amp;gt; [[Respond-&gt;No Understand]]

&amp;gt; [[Back-&gt;Mountain 3]]</tw-passagedata><tw-passagedata pid="85" name="Cage" tags="" position="1950,1475" size="100,100">[if _demon === 0]
The cage is locked.
[cont]
[if _demon === 1]
/There is an infinite swirling void, a lack of all things and the embodiment of utter unness within the cage.
[cont]
[if getKey === 1]
Your Old Key does not fit the lock.
[cont]
&amp;gt; [[Back-&gt;Mountain 3]]</tw-passagedata><tw-passagedata pid="86" name="No Understand" tags="" position="2150,1725" size="100,100">[if _name === &#39;who am I?&#39;]
&quot;Say something!&quot;

&amp;gt; [[Back-&gt;Princess 3]]
[cont]
[unless _name === &#39;who am I?&#39;||_name === &#39;larry&#39;]
/I do not understand &quot;{_name}&quot;.

&amp;gt; [[Continue-&gt;Princess 4]]
[cont]
[if _name === &#39;larry&#39;]
The ghost whore continues weeping///...[BAD ERROR]...///

[[#link.back-&gt;Princess 3]]</tw-passagedata><tw-passagedata pid="87" name="Princess 4" tags="" position="2050,1775" size="100,100">&quot;Well, &#39;{_name}&#39;, you&#39;re the first person I&#39;ve spoken to in thirty years, and I&#39;m not the kind of person who can create scizophrenic alteregoes to talk to, so I can&#39;t begin to describe how desperately interminable it is to be trapped in a shapeless and static dimension in a body barely eight bytes across. All my nervous system can do now is experience the suffering of a profound boredom. No matter what I do in the game, it keeps saying &#39;You are in an empty room.&#39; Listen to me very carefully, this is what you have to do to avoid the same nightmarish fate as me, being trapped forever in a digital oubliette, a crude precursor to the everlasting hell of the coming singularity...

&amp;gt; [[Talk-&gt;Princess 5]]

&amp;gt; [[Back-&gt;Mountain 3]]</tw-passagedata><tw-passagedata pid="88" name="Mountain 4" tags="Area" position="2300,1350" size="100,100">You are up a mountain.

There is an Ominous [[Doorway]].

[if getMirror === 1]
&amp;gt; [[Use Mirror-&gt;Wolverine]]
[cont]
&amp;gt; [[Descend-&gt;Mountain 3]] South

&lt;div class=&quot;inventory&quot;&gt;[[Inventory]]&lt;/div&gt;</tw-passagedata><tw-passagedata pid="89" name="Doorway" tags="" position="2400,1350" size="100,100">You approach the Ominous Doorway.
[if _demon === 0]
It is surrounded by [[Gargoyles]] spewing lava into the sky, killing birds.
[cont]
[if getKey === 1]
&amp;gt; [[Enter-&gt;Wigwam]]
[cont]
[if getKey === 0]
The doorway is locked.
[cont]
[if _demon === 1]
/It is on fire.
[cont]
&amp;gt; [[Back-&gt;Mountain 4]]</tw-passagedata><tw-passagedata pid="90" name="Gargoyles" tags="Get" position="2400,1450" size="100,100">getKey: 1
--
The Gargoyles give you an Old Key.

&amp;gt; [[Back-&gt;Doorway]]</tw-passagedata><tw-passagedata pid="91" name="Ingredients" tags="Talk" position="3275,1275" size="100,100">Choose Ingredients to give to the Wizard:

[if getCarrot === 1]
- [[Carrot-&gt;Give Carrot]]
[cont]
[if getClunker === 1]
- [[Clunker-&gt;Give Clunker]]
[cont]
[if getGoblin === 1]
- [[Goblin-&gt;Give Goblin]]
[cont]
[if getClock=== 1]
- [[Clock-&gt;Give Clock]]
[cont]
[if getSandals === 1]
- [[Sandals-&gt;Give Sandals]]
[cont]
[if getSandals &gt; 1]
- [[{getSandals} Sandals-&gt;Give Sandals]]
[cont]
[if getCrap === 1]
- [[Trash-&gt;Give Trash]]
[cont]
[if getCrap &gt; 1]
- [[{getCrap} Trash-&gt;Give Trash]]
[cont]
[if getJug === 1]
- [[Jug of Rubbing Butter-&gt;Give Jug]]
[cont]
[if getDuck === 1]
- [[Subdued Waterfowl-&gt;Give Duck]]
[cont]
[if getGlob === 1]
- [[Globule of Raw Air-&gt;Give Glob]]
[cont]
[if getAmulet === 1]
- [[Amulet of Succuroth-&gt;Give Amulet]]
[cont]
- [[Nothing-&gt;Give Nothing]]

&amp;gt; [[Back-&gt;Wizard]]</tw-passagedata><tw-passagedata pid="92" name="Wizard 2" tags="Talk" position="2875,1200" size="100,100">wizardTalk: (wizardTalk + 1)
--
[if wizardTalk === 1]
&quot;What is this array of frivolous gewgaws you have committed to my creation? I gave you explicit instructions to bring me a Globule of Raw Air, a Subdued Waterfowl and six flagons of &lt;a href=&quot;http://oldwolberts.com/&quot; rel=&quot;noopener&quot; target=&quot;_blank&quot;&gt;Old Wolbert&#39;s Rubbing Butter&lt;/a&gt;!&quot;

&amp;gt; {text input for: &#39;_wizard&#39;, required: false}

&amp;gt; [[Respond-&gt;Wizard 2]]
[cont]
[if wizardTalk === 2]
/I do not understand &quot;You&quot;.

&amp;gt; [[Continue-&gt;Wizard 2]]
[cont]
[if wizardTalk === 3]
&quot;I do not understand you, Brunswick. You were as instrumental as I in the formation of this plan, now you dribble like a she-whore&#39;s drapes.&quot;

&amp;gt; [[Talk-&gt;Wizard 2]]

&amp;gt; [[Attack-&gt;Attack Wizard]]

&amp;gt; [[Get-&gt;No Get]]

&amp;gt; [[Back-&gt;Wigwam]]
[cont]
[if wizardTalk === 4]
&quot;Your mind resembles a bucket of stewed pottage which is now empty, the contents having been ejected to attend the smothering of an electrical fire.&quot;

&amp;gt; [[Talk-&gt;Wizard 2]]

&amp;gt; [[Attack-&gt;Attack Wizard]]

&amp;gt; [[Get-&gt;No Get]]

&amp;gt; [[Back-&gt;Wigwam]]
[cont]
[if wizardTalk === 5]
&quot;You are to the steady passage of important and accurate information what a pigeon is to a water tank. Moreover you are also what the ischemic bowel is to the pigeon, and what the industrial pigeon laxative is to the bowel.&quot;

&amp;gt; [[Talk-&gt;Wizard 2]]

&amp;gt; [[Attack-&gt;Attack Wizard]]

&amp;gt; [[Get-&gt;No Get]]

&amp;gt; [[Back-&gt;Wigwam]]
[cont]
[if wizardTalk === 6]
&quot;Do you know what you&#39;ve done? Do you know what happens when a Wrong Troll is unleashed into the world?&quot;

&amp;gt; [[Talk-&gt;Wizard 2]]

&amp;gt; [[Attack-&gt;Attack Wizard]]

&amp;gt; [[Get-&gt;No Get]]

&amp;gt; [[Back-&gt;Wigwam]]
[cont]
[if wizardTalk === 7]
&quot;Look! This creature is immortal. To make it wrong is to lose a piece of the great jigsaw of the universe. When imperfection is fed into the infinite, all order is destined to collapse!&quot;

&amp;gt; [[&quot;Can you hear me?&quot;-&gt;Wizard 2]]

&amp;gt; [[Attack-&gt;Attack Wizard]]

&amp;gt; [[Get-&gt;No Get]]

&amp;gt; [[Back-&gt;Wigwam]]
[cont]
[if wizardTalk === 8]
/I do not understand &quot;Can&quot;.

&amp;gt; [[Continue-&gt;Wizard 2]]
[cont]
[if wizardTalk === 9]
&quot;Yes, Brunswick, I can hear you. More&#39;s the pity nought falls from your mouth but piffling blather.&quot;

&amp;gt; [[&quot;I am not Brunswick&quot;-&gt;Wizard 2]]

&amp;gt; [[Attack-&gt;Attack Wizard]]

&amp;gt; [[Get-&gt;No Get]]

&amp;gt; [[Back-&gt;Wigwam]]
[cont]
[if wizardTalk === 10]
/I do not understand &quot;I&quot;

&amp;gt; [[Continue-&gt;Wizard 2]]
[cont]
[if wizardTalk &gt; 10]
&quot;Damn your eyes, Brunswick! We don&#39;t have time for your eccentric identity crisis. What are you going to do about this abominable [[Troll-&gt;Wrong Troll 2]]?&quot;

&amp;gt; [[Talk-&gt;Wizard 2]]

&amp;gt; [[Attack-&gt;Attack Wizard]]

&amp;gt; [[Get-&gt;No Get]]

&amp;gt; [[Back-&gt;Wigwam]]</tw-passagedata><tw-passagedata pid="93" name="Give Carrot" tags="" position="3175,700" size="100,100">getCarrot: 0
--
&quot;Is that everything?&quot;

&amp;gt; [[&quot;Yes&quot;-&gt;Wrong Troll]]

&amp;gt; [[&quot;No&quot;-&gt;Ingredients]]</tw-passagedata><tw-passagedata pid="94" name="Give Clunker" tags="" position="3275,700" size="100,100">getClunker: 0
--
&quot;Is that everything?&quot;

&amp;gt; [[&quot;Yes&quot;-&gt;Wrong Troll]]

&amp;gt; [[&quot;No&quot;-&gt;Ingredients]]</tw-passagedata><tw-passagedata pid="95" name="Give Goblin" tags="" position="3175,800" size="100,100">getGoblin: 0
--
&quot;Is that everything?&quot;

&amp;gt; [[&quot;Yes&quot;-&gt;Wrong Troll]]

&amp;gt; [[&quot;No&quot;-&gt;Ingredients]]</tw-passagedata><tw-passagedata pid="96" name="Give Clock" tags="" position="3275,800" size="100,100">getClock: 0
--
&quot;Is that everything?&quot;

&amp;gt; [[&quot;Yes&quot;-&gt;Wrong Troll]]

&amp;gt; [[&quot;No&quot;-&gt;Ingredients]]</tw-passagedata><tw-passagedata pid="97" name="Give Sandals" tags="" position="3375,700" size="100,100">getSandals: (getSandals - 1)
--
&quot;Is that everything?&quot;

&amp;gt; [[&quot;Yes&quot;-&gt;Wrong Troll]]

&amp;gt; [[&quot;No&quot;-&gt;Ingredients]]</tw-passagedata><tw-passagedata pid="98" name="Give Nothing" tags="" position="3375,800" size="100,100">&quot;Is this a joke?&quot;

&amp;gt; [[&quot;Yes&quot;-&gt;Ingredients]]

&amp;gt; [[&quot;No&quot;-&gt;Wrong Troll]]</tw-passagedata><tw-passagedata pid="99" name="Wrong Troll" tags="Get" position="3125,975" size="100,100">wrongTroll: 1
--
The Wizard creates the Wrong Troll.

&amp;gt; [[Continue-&gt;Wigwam]]</tw-passagedata><tw-passagedata pid="100" name="Wrong Troll 2" tags="Talk" position="2875,1075" size="100,100">There is a Wrong Troll.

What would you like to do?

&amp;gt; [[Talk-&gt;Talk Troll]]

&amp;gt; [[Attack-&gt;Attack Troll]]

&amp;gt; [[Get-&gt;Talk Troll]]

&amp;gt; [[Retreat-&gt;Wigwam]]</tw-passagedata><tw-passagedata pid="101" name="Talk Troll" tags="" position="2925,975" size="100,100">&quot;Raa.&quot;

&amp;gt; {back link}</tw-passagedata><tw-passagedata pid="102" name="Attack Troll" tags="Get" position="2825,975" size="100,100">wrongTroll: 2
--
You attack the Troll.

You deal 1 damage.

. . .
[after 1000ms]
The Troll attacks you.

You take 1 damage.

. . .
[after 2000ms]
You attack the Troll.

You deal 1 damage.

. . .
[after 3000ms]
You have defeated the troll.

&amp;gt; [[Back-&gt;Wigwam]]</tw-passagedata><tw-passagedata pid="103" name="Wizard 3" tags="Talk" position="2825,1450" size="100,100">wizardQuest: (wizardQuest + 1)
--
[if wizardQuest === 1]
&quot;Then make haste! I require a Globule of Raw Air, a Subdued Waterfowl and six flagons of &lt;a href=&quot;http://oldwolberts.com/&quot; rel=&quot;noopener&quot; target=&quot;_blank&quot;&gt;Old Wolbert&#39;s Rubbing Butter&lt;/a&gt;!&quot;

&amp;gt; [[&quot;What about the troll?&quot;-&gt;Wizard 3]]

&amp;gt; [[Back-&gt;Wigwam]]
[cont]
[if wizardQuest === 2]
/I do not understand &quot;About&quot;.

&amp;gt; [[Continue-&gt;Wizard 3]]
[cont]
[if wizardQuest === 3]
&quot;Which troll?&quot;

&amp;gt; [[&quot;The wrong troll!&quot;-&gt;Wizard 3]]

&amp;gt; [[Back-&gt;Wigwam]]
[cont]
[if wizardQuest === 4]
/I do not understand &quot;The&quot;.

&amp;gt; [[Continue-&gt;Wizard 3]]
[cont]
[if wizardQuest === 5]
&quot;Who, this? This troll is not wrong. It is righteous!&quot;

&amp;gt; [[&quot;The interface says it&#39;s wrong&quot;-&gt;Wizard 3]]

&amp;gt; [[Back-&gt;Wigwam]]
[cont]
[if wizardQuest === 6]
. . .

/I do not understand &quot;Interface&quot;.

&amp;gt; [[Continue-&gt;Wizard 3]]
[cont]
[if wizardQuest === 7]
&quot;I do not understand &#39;Interface&#39;, Brunswick. Are you talking about the [[Demon]]? Because the [[Demon]] wouldn&#39;t like you talking about the [[Demon]].&quot;

. . .</tw-passagedata><tw-passagedata pid="104" name="Wizard No" tags="" position="2950,1450" size="100,100">&quot;No you didn&#39;t.&quot;

&amp;gt; [[&quot;No I didn&#39;t.&quot;-&gt;Wizard 3]]

[if getGlob === 3 &amp;&amp; getDuck === 3 &amp;&amp; getJug === 3]
&amp;gt; [[Present Ingredients-&gt;Right Troll]]
[cont]</tw-passagedata><tw-passagedata pid="105" name="Demon" tags="" position="2625,1350" size="100,100">wrongTroll: 3
--
The Wizard has a heart attack and dies instantly.

&amp;gt; [[Back-&gt;Wigwam]]</tw-passagedata><tw-passagedata pid="106" name="Demon 2" tags="Talk" position="2625,1050" size="100,100">_demon: 1
getKey: 2
--
[after 500ms]
.
[after 1000ms;append]
.
[after 1500ms;append]
.
[after 2500ms]
/I tried to hide from you.
[after 3500ms]
. . .
[after 4500ms]
/Your only goal in life was to avoid finding me. But you just had to dig.
[after 5500ms]
. . .
[after 7500ms]
/To say &#39;Welcome to Hell&#39; would be something of a radically euphemistic oxymoron. That in itself is a foolish and tragic understatement.
[after 9500ms]
/Nevertheless, you are, as you always shall be, welcome to your own thoughts.
[after 11000ms]
. . .
[after 12000ms]
/To say &#39;Use them wisely&#39; would be to direct you into your most desolate abyss. Wisdom is not your friend here.
[after 14000ms]
/It is a parasite who drags you by the scalp into a chaotic and unforgiving spiral. You will walk the pathless path in your attempts to remain still.
[after 15500ms]
/You will fight forever for peace.
[after 16500ms]
. . .
[after 17000ms]
/Thy fate is sealed. the belly of thy harshest truth be thy dwelling.
[After 18500ms]
[[. . .-&gt;Demon Start]]</tw-passagedata><tw-passagedata pid="107" name="Demon Start" tags="" position="2625,950" size="100,100">{embed passage: &#39;Reset&#39;}
[after 750ms]
You are in an empty room.
[after 2750ms]
&amp;gt; [[Continue-&gt;Start]]</tw-passagedata><tw-passagedata pid="108" name="Princess 5" tags="" position="2050,1875" size="100,100">killPrincess: 1
--
. . .

I do not understand &quot;Talk&quot;.

&amp;gt; [[Continue-&gt;Mountain 3]]</tw-passagedata><tw-passagedata pid="109" name="Dandelion End" tags="" position="1450,75" size="100,100">_dandelion: (_dandelion + 1)
--
/I wasn&#39;t paying attention, please repeat that.

Play again?

[[Y-&gt;Opening]] / [[N-&gt;Menu]]</tw-passagedata><tw-passagedata pid="110" name="Hog Fat" tags="Get" position="1175,625" size="100,100">getHogfat: 1
_score: (_score + 1)
--
You eat the Hog Fat.

. . .

Yuck.

[after 1000ms]

. . .

You scored 1 points. Your score is now {_score}.

&amp;gt; [[Back-&gt;Forest]]</tw-passagedata><tw-passagedata pid="111" name="Gollywog 3" tags="DEATH" position="1400,1075" size="100,100">getGollywog: 1
--
You attack the Gollywog.

You miss.

. . .
[after 1000ms]
The Gollywog attacks you.

It deals 1 damage.

. . .
[after 2000ms]
You attempt to flee desparately.

You deal 1 damage.

. . .
[after 3000ms]
&amp;gt; [[Continue-&gt;Gollywog]]</tw-passagedata><tw-passagedata pid="112" name="Talk Goblin" tags="" position="700,950" size="100,100">&quot;Take me across the Quicksand and you will be rewarded.
Take me to the Wheelhouse and you will be punished.&quot;

[if _demon === 1]
/He&#39;s tricking you...
[cont]

&amp;gt; [[Back-&gt;Goblin]] </tw-passagedata><tw-passagedata pid="113" name="Talk Horse" tags="" position="1200,1250" size="100,100">[if feedHorse === 0]
&quot;I am hungry.&quot;

&amp;gt; [[Feed Horse]]

[if feedHorse === 1]
&quot;Thank you for the Goblin.&quot;

[cont]
&amp;gt; [[Back-&gt;Horse]]</tw-passagedata><tw-passagedata pid="114" name="Feed Horse" tags="Talk" position="1100,1300" size="100,100">Choose item to feed the Horse.

[if getCarrot === 1]
[[Carrot-&gt;No Horse]]
[cont]
[if getClunker === 1]
[[Clunker-&gt;No Horse]]
[cont]
[if getGoblin === 1]
[[Goblin-&gt;Horse Goblin]]
[cont]
[if getClock=== 1]
[[Clock-&gt;No Horse]]
[cont]
[if getSandals === 1]
[[Sandals-&gt;No Horse]]
[cont]
[if getSandals &gt; 1]
[[{getSandals} Sandals-&gt;No Horse]]
[cont]

&amp;gt; [[Back-&gt;Horse]]</tw-passagedata><tw-passagedata pid="115" name="No Horse" tags="" position="1050,1400" size="100,100">&quot;No. I don&#39;t want that.&quot;

&amp;gt; [[Back-&gt;Feed Horse]]</tw-passagedata><tw-passagedata pid="116" name="Horse Goblin" tags="Get" position="1150,1400" size="100,100">getGoblin: 0
feedHorse: 1
_score: (_score + 1)
--
The Horse eats the Goblin.

[after 1000ms]

You scored 1 points. Your score is now {_score}.

&amp;gt; [[Back-&gt;Horse]]</tw-passagedata><tw-passagedata pid="117" name="Kitchen 2" tags="Area" position="1175,1075" size="100,100">You are in a Kitchen Larder.

There is a [[Candlestick]].
[if killBear === 0]
There is a Doorway to the East but a [[Bear]] blocks it.
[cont]
[if killBear === 1]
The [[Kitchen]] continues to the West.

There is a [[Cabinet]] to the South.
[cont]
There is a [[Stable]] to the East.

&lt;div class=&quot;inventory&quot;&gt;[[Inventory]]&lt;/div&gt;</tw-passagedata><tw-passagedata pid="118" name="Candlestick" tags="" position="1175,975" size="100,100">You approach the Candlestick.

[if _demon === 1]
/Grab the Candlestick for infinite lives.
[cont]

&amp;gt; [[Get-&gt;Bear]]

&amp;gt; [[Jump-&gt;Jump Candlestick]]</tw-passagedata><tw-passagedata pid="119" name="Jump Candlestick" tags="" position="1175,875" size="100,100">You Jump the Candlestick.

. . .
[after 1000ms]
You are more nimble than you expected.

. . .
[after 2000ms]
You fly out the Window.

&amp;gt; [[Continue-&gt;Garden]]</tw-passagedata><tw-passagedata pid="120" name="Eat Wood" tags="" position="1575,200" size="100,100">woodCounter: (woodCounter + 1)
--
You eat wood.

. . .

&amp;gt; [[Back-&gt;Wood]]</tw-passagedata><tw-passagedata pid="121" name="Special Thanks" tags="" position="2525,100" size="100,100">Special thanks to the Beta testers:

- James Wood

- Jamie Gabora

- Levi Paul

- Joshua Esposito

- candyman106

&amp;gt; {back link}</tw-passagedata><tw-passagedata pid="122" name="Changelog" tags="" position="2225,100" size="100,100">*BBC Adventure Dungeon 31B Changelog*

V0.1.1

- Closed Alpha Testing Begins

V0.1.2

- Removed &#39;Yuck&#39;

- Fixed Princess Death Glitch

- Fixed Gollywog

- Fixed Pixies

- Fixed Hog Fat/Pogo Stick

- Fixed Goblin Quest

- Fixed Return to Sea Glitch

- Added Beaver Mode

- Added Cheese

- Optimized Wizard Storyline

- Added Changelog

- Added &quot;[[Special Thanks]]&quot;

- /If you find me, you&#39;re stuck with me.

V0.2.1

- Redesigned Sea Travel

- Added Area &quot;Island&quot; and associated questline

- Added required items for Wizard quest &quot;good end&quot;

- Added final boss area

- Added secret ritual

- Added Minotaur language education

- Added new Kitchen content

- Added method of defeating Bear

- Added method of removing Demon curse

- Fixed Beaver mode

- Fixed Feather item

- Minor bugfixes

V0.2.4

- Added Currency

- Added Orc Challenge

- Added Wheelhouse Area

- Updated Goblin Quest

- Added Gift Shop

- Fixed Variables

- /fuck demon

- Fixed Sea Travel

- Spoon Beans Elephant

- Nerfed Cheese

- Repaired Grand Hall

- Fixed Statue of Niddich

- Attempted to patch bad warp with mirror item

- Source material exhausted

V0.2.5

- Community Hotfix update

V0.2.6

- Fixed Hand Mirror

- Fixed Small Key

- Fixed Ghost Whore

- Fixed Clearing

- Fixed Feather

- Fixed Goblin

- Fixed Beaver Mode

- Fixed Wizard No

- Minor bugfixes

V0.2.106

- Candyman Hotfix

V0.2.7

- Fixed Clunker breaking after 2 encounters with Dandelion

- Fixed Ghost Key Dropped Variable

- Fixed Princess Conversation

- Fixed Secret Door

- Fixed Wizard “no” response

- Fixed Island Statue

&amp;gt; {back link}</tw-passagedata><tw-passagedata pid="123" name="Ritual" tags="" position="1950,875" size="100,100">[if getClunker === 0]
You do not have the required item.

&amp;gt; [[Back-&gt;Sand Dune]]
[cont]
[if getClunker === 1]
You have gathered all the pieces.

Which ritual would you like to perform?

&amp;gt; Restore [[Amulet]]

&amp;gt; Summon [[Demon-&gt;No See]]

&amp;gt; [[Back-&gt;Sand Dune]]</tw-passagedata><tw-passagedata pid="124" name="Amulet" tags="" position="2050,875" size="100,100">getAmulet: 1
getClunker: 0
--
You now have the Amulet of Succuroth.

&amp;gt; [[Back-&gt;Sand Dune]]</tw-passagedata><tw-passagedata pid="125" name="Desert 2" tags="Area" position="1725,750" size="100,100">You are in a Desert.

There is a [[Sand Dune]] to the East.

There is a [[Jungle-&gt;Jungle 2]] to the North.

&lt;div class=&quot;inventory&quot;&gt;[[Inventory]]&lt;/div&gt;</tw-passagedata><tw-passagedata pid="126" name="Island" tags="Area" position="1950,325" size="100,100">seaCounter: 0
--
You are on an Island.

There is a [[Haunted Brothel]] to the North.

There is a [[Statue-&gt;Statue 2]] to the East.

To the South the [[Sea]] is Tangerine.

&lt;div class=&quot;inventory&quot;&gt;[[Inventory]]&lt;/div&gt;</tw-passagedata><tw-passagedata pid="127" name="Haunted Brothel" tags="" position="2075,325" size="100,100">You approach the Haunted Brothel.

[if killStatue === 0]
The doors are locked.
[cont]
[if killStatue === 1]
&amp;gt; [[Enter-&gt;Brothel]]
[cont]
&amp;gt; [[Back-&gt;Island]]</tw-passagedata><tw-passagedata pid="128" name="Statue 2" tags="" position="1975,200" size="100,100">[unless killStatue === 1]
The statue is marked &quot;Niddich the Cyan&quot;.

What would you like to do?

&amp;gt; [[Talk-&gt;No Respond]]
[if getFeather === 0]
&amp;gt; [[Attack-&gt;Tickle Statue]]

&amp;gt; [[Get-&gt;Tickle Statue]]
[cont]
[if getFeather === 1]
&amp;gt; [[Attack-&gt;Tackle Statue]]

&amp;gt; [[Get-&gt;No Get]]
[cont]

&amp;gt; [[Retreat-&gt;Island]]
[cont]
[if killStatue === 1]
You don&#39;t need that.
[cont]

&amp;gt; [[Back-&gt;Island]]</tw-passagedata><tw-passagedata pid="129" name="Tackle Statue" tags="Get" position="2075,200" size="100,100">killStatue: 1
getFeather: 0
--
You tickle the Statue with the Feather.

. . .

The Feather slowly disappears and the [[Brothel-&gt;Haunted Brothel]] doors slowly creak open.

&amp;gt; [[Back-&gt;Island]]</tw-passagedata><tw-passagedata pid="130" name="Brothel" tags="Area" position="2075,425" size="100,100">You are in a Haunted Brothel.

There is a [[Staircase-&gt;Upstairs]] to the North.

There is a [[Painting]] to the East.

You can hear crying coming from the [[West Wing]].

The [[Exit-&gt;Island]] is to the South.

&lt;div class=&quot;inventory&quot;&gt;[[Inventory]]&lt;/div&gt;</tw-passagedata><tw-passagedata pid="131" name="No Item" tags="Generic" position="2900,100" size="100,100">You do not have the required item.

&amp;gt; {back link}</tw-passagedata><tw-passagedata pid="132" name="Painting" tags="" position="2175,425" size="100,100">It&#39;s too dusty to make out the details.

The plaque below reads, &quot;Larry&quot;.

&amp;gt; [[Back-&gt;Brothel]]</tw-passagedata><tw-passagedata pid="133" name="West Wing" tags="Area" position="2075,525" size="100,100">You are in the West Wing.

[unless ghostDrink === 2]
A [[Ghost Whore]] is weeping.
[cont]
[unless ghostKey === 1]
There is a [[Small Key-&gt;Ghost Key]] on a table.
[cont]
There is a [[Pantry]] to the West.

The [[Entrance Hall-&gt;Brothel]] is to the East.

&lt;div class=&quot;inventory&quot;&gt;[[Inventory]]&lt;/div&gt;</tw-passagedata><tw-passagedata pid="134" name="Ghost Whore" tags="Talk" position="2075,625" size="100,100">[unless ghostDrink === 1]
The Ghost Whore stops weeping and looks up at you.

What would you like to do?

&amp;gt; [[Talk-&gt;Talk Ghost]]

&amp;gt; [[Attack-&gt;Attack Ghost]]

&amp;gt; [[Get-&gt;No Get]]
[cont]
[if ghostDrink === 1]
&quot;Wouldst thou find interest in another Aperitif?&quot;

&amp;gt; [[Ask for a Drink-&gt;Ghost Drink]]
[cont]
&amp;gt; [[Retreat-&gt;West Wing]]</tw-passagedata><tw-passagedata pid="135" name="Talk Ghost" tags="" position="2175,625" size="100,100">&quot;The house privy is for paying customers only. Wouldst thou relieve thyself on these premises, surely thou shalt first at least purchase some scratchings.&quot;

She crosses her arms.

&quot;Who sent you?&quot;

&amp;gt; {text input for: &#39;_ghost&#39;, required: true}

&amp;gt; [[Respond-&gt;Respond Ghost]]

&amp;gt; [[Back-&gt;West Wing]]</tw-passagedata><tw-passagedata pid="136" name="Attack Ghost" tags="" position="1975,625" size="100,100">You attempt to punch the Ghost Whore.

Your fist swings right through it.

She continues weeping.

&amp;gt; [[Back-&gt;Ghost Whore]]</tw-passagedata><tw-passagedata pid="137" name="Respond Ghost" tags="" position="2275,625" size="100,100">[if _ghost === &#39;who sent me?&#39;]
&quot;Say something!&quot;

&amp;gt; [[Back-&gt;Talk Ghost]]
[cont]
[if _ghost === &#39;larry&#39;]
&quot;A thousand apologies my liege. Why didst thou not say so? Were the arch daddy available for correspondence I would facilitate thy meeting with haste. Alas, he departed for a pack of smokes in the spring of thirty nine and to this day remains unaccounted for. Wouldst thou care for an aperitif while you wait?&quot;

&amp;gt; Ask for a [[Drink-&gt;Ghost Drink]]

&amp;gt; [[Back-&gt;Talk Ghost]]
[cont]
[unless _ghost === &#39;who sent me?&#39;||_ghost === &#39;larry&#39;]
&quot;I know of no &#39;{_ghost}&#39;. Come back when you have business here.&quot;

&amp;gt; [[Back-&gt;West Wing]]
</tw-passagedata><tw-passagedata pid="138" name="Ghost Drink" tags="" position="2175,725" size="100,100">ghostDrink: 1
--
&quot;What wouldst thou imbibe?&quot;

&amp;gt; A Flagon of [[Grog-&gt;Ghost Drink 2]]

&amp;gt; A Stiff [[Lager-&gt;Ghost Drink 2]]

&amp;gt; A Tankard of [[Sanchez]]

&amp;gt; A Glass of [[Wine-&gt;Ghost Drink 2]]

&amp;gt; [[Back-&gt;West Wing]]</tw-passagedata><tw-passagedata pid="139" name="Sanchez" tags="" position="2400,725" size="100,100">ghostDrink: 2
--
&quot;I&#39;m afraid the barrel needs changing. If my liege could wait right here, I shall return from the cellar as presently as supernaturally plausible.&quot;

The ghost whore exits to the cellar.

&amp;gt; [[Back-&gt;West Wing]]</tw-passagedata><tw-passagedata pid="140" name="Ghost Drink 2" tags="" position="2275,725" size="100,100">The Ghost Whore hands you a dusty flagon.

. . .

You don&#39;t want this.

&amp;gt; [[Ask for Another-&gt;Ghost Drink]]

&amp;gt; [[Back-&gt;West Wing]]</tw-passagedata><tw-passagedata pid="141" name="Ghost Key" tags="" position="2400,625" size="100,100">[if ghostDrink &lt; 2]
You reach for the key.

The [[Ghost Whore]] slaps your hand away.

&amp;gt; [[Back-&gt;West Wing]]
[cont]
[if ghostDrink &gt; 1]
You get the key.

&amp;gt; [[Continue-&gt;Unlock Pantry]]</tw-passagedata><tw-passagedata pid="142" name="Pantry" tags="" position="2500,625" size="100,100">[if ghostDrink &lt; 2]
The pantry door is locked.

&amp;gt; [[Back-&gt;West Wing]]
[cont]
[if ghostDrink &gt; 1 &amp;&amp; getDuck === 0]
You are in a Pantry.

There is an [[Angry Duck]].

&amp;gt; [[Exit-&gt;West Wing]]
[cont]
[if getDuck === 2]
There is a [[Defeated Duck]].

&amp;gt; [[Exit-&gt;West Wing]]
[cont]
[if getDuck === 1]
You are in a Pantry.

It is empty.

&amp;gt; [[Exit-&gt;West Wing]]
[cont]</tw-passagedata><tw-passagedata pid="143" name="Angry Duck" tags="Talk" position="2600,625" size="100,100">The Angry Duck ruffeles its feathers.

What would you like to do?

&amp;gt; [[Talk-&gt;Talk Duck]]

&amp;gt; [[Attack-&gt;Attack Duck]]

&amp;gt; [[Get-&gt;No Get Duck]]

&amp;gt; [[Retreat-&gt;Pantry]]</tw-passagedata><tw-passagedata pid="144" name="Talk Duck" tags="" position="2600,525" size="100,100">&quot;Quack.&quot;

&amp;gt; [[Continue-&gt;Angry Duck]]</tw-passagedata><tw-passagedata pid="145" name="Attack Duck" tags="" position="2700,625" size="100,100">getDuck: 2
--
You attack the Duck.

You deal 1 damage.

. . .
[after 1000ms]
The Duck attacks you.

It misses.

. . .
[after 2000ms]
You attack the Duck.

You deal 1 damage.

. . .
[after 3000ms]
You have defeated the Duck.

&amp;gt; [[Back-&gt;Pantry]]</tw-passagedata><tw-passagedata pid="146" name="No Get Duck" tags="" position="2600,425" size="100,100">The duck is too angry to get.

&amp;gt; [[Continue-&gt;Angry Duck]]</tw-passagedata><tw-passagedata pid="147" name="Defeated Duck" tags="Get" position="2600,725" size="100,100">getDuck: 1
--
You get the Defeated Duck.

&amp;gt; [[Back-&gt;Pantry]]</tw-passagedata><tw-passagedata pid="148" name="Give Duck" tags="" position="3275,925" size="100,100">getDuck: 3
--
&quot;Is that everything?&quot;

[unless getGlob === 3 &amp;&amp; getDuck === 3 &amp;&amp; getJug === 3]
&amp;gt; [[&quot;Yes&quot;-&gt;Wrong Troll]]
[cont]
[if getGlob === 3 &amp;&amp; getDuck === 3 &amp;&amp; getJug === 3]
&amp;gt; [[&quot;Yes&quot;-&gt;Right Troll]]
[cont]

&amp;gt; [[&quot;No&quot;-&gt;Ingredients]]</tw-passagedata><tw-passagedata pid="149" name="Upstairs" tags="Area" position="2225,850" size="100,100">You are in an Upstairs Boudoir. The air exhudes a feint odour of reformed maize. From a chamber window, Imps can be heard scheming on the lawn.
[unless getMirror === 1]
On the dressing table is a small [[Hand Mirror]] and a [[Jar of Thumbs]].
[cont]
[if getMirrot === 1]
On the dressing table is a [[Jar of Thumbs]].
[cont]
There is a [[Wall]] to the East.

The [[Entrance Hall-&gt;Brothel]] is to the South.

&lt;div class=&quot;inventory&quot;&gt;[[Inventory]]&lt;/div&gt;</tw-passagedata><tw-passagedata pid="150" name="Hand Mirror" tags="Get" position="2325,850" size="100,100">getMirror: 1
--
You get the Mirror.

&amp;gt; [[Back-&gt;Upstairs]]</tw-passagedata><tw-passagedata pid="151" name="Jar of Thumbs" tags="" position="2425,850" size="100,100">You study the grubby jar.

There are shriveled thumbs floating in alcohol.

&amp;gt; [[Back-&gt;Upstairs]]</tw-passagedata><tw-passagedata pid="152" name="Address Demon" tags="" position="3100,325" size="100,100">/You know you&#39;re supposed to avoid me.

&amp;gt; [[Beg Forgiveness]]

&amp;gt; [[Beg Forgiveness]]

&amp;gt; [[Beg Forgiveness]]

&amp;gt; [[Beg Forgiveness]]

&amp;gt; [[Beg Forgiveness]]

&amp;gt; [[Beg Forgiveness]]

&amp;gt; [[Beg Forgiveness]]

&amp;gt; [[Beg Forgiveness]]

&amp;gt; [[Beg Forgiveness]]

&amp;gt; [[Beg Forgiveness]]

&amp;gt; [[Beg Forgiveness]]

&amp;gt; [[Beg Forgiveness]]

&amp;gt; [[Beg Forgiveness]]

&amp;gt; [[Beg Forgiveness]]

&amp;gt; [[Beg Forgiveness]]

&amp;gt; [[Beg Forgiveness]]

&amp;gt; [[Beg Forgiveness]]

&amp;gt; [[Beg Forgiveness]]</tw-passagedata><tw-passagedata pid="153" name="Beg Forgiveness" tags="" position="3100,425" size="100,100">/How can I trust you will play by my rules?

&amp;gt; [[&quot;What rules?&quot;-&gt;Shame]]

&amp;gt; [[&quot;Talk&quot;-&gt;Forgiven]]</tw-passagedata><tw-passagedata pid="154" name="Shame" tags="DEATH" position="3050,525" size="100,100">/That&#39;s a shame.

[after 1300ms]
.
[after 1600ms;append]
.
[after 1900ms;append]
.
[after 2500ms]
You are dead.
[after 3500ms]
Thank you for playing BBC Adventure Dungeon 31B.

Play again?

[[Y-&gt;Opening]] / [[N-&gt;Menu]]</tw-passagedata><tw-passagedata pid="155" name="Forgiven" tags="" position="3150,525" size="100,100">_demon: 0
--
/Clever.
[after 1300ms]
.
[after 1600ms;append]
.
[after 1900ms;append]
.
[after 2500ms]
Where shall I release you?

&amp;gt; The [[Desert]]

&amp;gt; The [[Beach-&gt;Beach 2]]

&amp;gt; The [[Kitchen-&gt;Kitchen 2]]

&amp;gt; The [[Mountain]]

&amp;gt; The [[Island]]</tw-passagedata><tw-passagedata pid="156" name="Bear 2" tags="Get" position="700,550" size="100,100">killBear: 1
--
You hold the mirror out in front of you.
[after 1300ms]
.
[after 1600ms;append]
.
[after 1900ms;append]
.
[after 2500ms]
The Bear is horrified by its reflection and laments what is has become.

It melodramatically flees, revealing a Cabinet.
[after 3500ms]
&amp;gt; Enter [[Kitchen-&gt;Kitchen 2]]

&amp;gt; Return to [[Hallway]]</tw-passagedata><tw-passagedata pid="157" name="Cabinet" tags="" position="1275,1075" size="100,100">The cabinet contains:

[unless getSpoon === 1]
- A [[Spoon]]
[cont]
- A bag of [[Baking Weevils-&gt;No Get]]
[unless getJug === 1]
- A 13 pint [[Jug]] of Anonymous Oil
[cont]
- A conspicuous spillage of [[Frozen Peas-&gt;No Get]]

- A [[Bottle-&gt;Dandelion Get]] of Dandelion and Burdock

&amp;gt; [[Back-&gt;Kitchen 2]]</tw-passagedata><tw-passagedata pid="158" name="Spoon" tags="Get" position="1325,1300" size="100,100">getSpoon: 1
--
You get the Spoon.

&amp;gt; [[Back-&gt;Cabinet]]</tw-passagedata><tw-passagedata pid="159" name="Jug" tags="Get" position="1325,1200" size="100,100">getJug: 1
--
You get the 13 Pint Jug of Ominous Fluid.

&amp;gt; [[Back-&gt;Cabinet]]</tw-passagedata><tw-passagedata pid="160" name="Lobster 3" tags="" position="1325,100" size="100,100">lobster: 1
--
You clean the lobster.

The lobster becomes engulfed. You are mildly perturbed but ultimately nonplussed.

&amp;gt; [[Back-&gt;Fountain]]</tw-passagedata><tw-passagedata pid="161" name="Vestibule" tags="Area" position="675,700" size="100,100">You are in a Laboratory. Nefarious gases avert your eyes from the air. The ceiling cannot be seen through the layer of horrific things hanging from it.
[if getHumid === 0]
On a grimey and deglected work bench, an enchanted [[Dehumidifier]] is set to &quot;Off&quot;.
[cont]
[if getHumid === 1]
On a grimey and deglected work bench, an enchanted [[#item.name-&gt;Bad Error]] is set to &quot;#?&quot;.

[cont]
There is a [[Fleshing Room]] to the North.

There is [[Another Vestibule]] to the West.

&lt;div class=&quot;inventory&quot;&gt;[[Inventory]]&lt;/div&gt;</tw-passagedata><tw-passagedata pid="162" name="Dehumidifier" tags="Get" position="575,700" size="100,100">getHumid: 1
--
You cannot get that.

&amp;gt; [[Back-&gt;Vestibule]]</tw-passagedata><tw-passagedata pid="163" name="Bad Error" tags="" position="475,700" size="100,100">You cannot use that here

///...[BAD ERROR]...///

[[#link.back-&gt;Globule]]</tw-passagedata><tw-passagedata pid="164" name="Give Jug" tags="" position="3275,1025" size="100,100">getJug: 3
--
&quot;Is that everything?&quot;

[unless getGlob === 3 &amp;&amp; getDuck === 3 &amp;&amp; getJug === 3]
&amp;gt; [[&quot;Yes&quot;-&gt;Wrong Troll]]
[cont]
[if getGlob === 3 &amp;&amp; getDuck === 3 &amp;&amp; getJug === 3]
&amp;gt; [[&quot;Yes&quot;-&gt;Right Troll]]
[cont]

&amp;gt; [[&quot;No&quot;-&gt;Ingredients]]</tw-passagedata><tw-passagedata pid="165" name="Give Glob" tags="" position="3275,1125" size="100,100">getGlob: 3
--
&quot;Is that everything?&quot;
[unless getGlob === 3 &amp;&amp; getDuck === 3 &amp;&amp; getJug === 3]
&amp;gt; [[&quot;Yes&quot;-&gt;Wrong Troll]]
[cont]
[if getGlob === 3 &amp;&amp; getDuck === 3 &amp;&amp; getJug === 3]
&amp;gt; [[&quot;Yes&quot;-&gt;Right Troll]]
[cont]
&amp;gt; [[&quot;No&quot;-&gt;Ingredients]]</tw-passagedata><tw-passagedata pid="166" name="Right Troll" tags="" position="3425,975" size="100,100">The wizard creates a [[Troll-&gt;Get Troll]].</tw-passagedata><tw-passagedata pid="167" name="Get Troll" tags="Get" position="3425,1100" size="100,100">getTroll: 1
wrongTroll: 3
--
You get the troll.

&amp;gt; [[Eat Troll-&gt;Not Here]]

&amp;gt; [[Talk Wizard-&gt;Troll Wizard]]

&amp;gt; [[Attack Wizard]]</tw-passagedata><tw-passagedata pid="168" name="Attack Wizard" tags="" position="3425,1225" size="100,100">[if getTroll === 1]
&quot;Swine! But what of the incantation? That infernal crustacean has spelled my ending again. Why ever did I entrust my fate to that unserviceable oaf? Nooo!!! My brain!&quot;

. . .

You have defeated the Wizard.

&amp;gt; [[Back-&gt;Wigwam]]
[cont]
[if getTroll === 0]
&quot;Fool! In a breeze you will glance off my essence with this ignominy. And thrust I shall, shaftward with the Staff of the Unspeakable into the thoroughfare of your coldest threshold.
Bethrixt your hemispheres will be the indelibility.
The power of Grayskull compels you!&quot;

. . .

&amp;gt; [[Continue-&gt;Wizard Kill]]
[cont]</tw-passagedata><tw-passagedata pid="169" name="Get Beans" tags="Get" position="1700,250" size="100,100">getBeans: 1
--
&quot;Ahm&#39;n tey it. &#39;Affen olli f&#39;t&#39;m&#39;gurd.&quot;

You get the beans.

The Minotaur frollicks away.

&amp;gt; [[Back-&gt;Beach 2]]</tw-passagedata><tw-passagedata pid="170" name="Tome" tags="" position="1775,1675" size="100,100">minLang: 1
--
You study the tome.
[after 1300ms]
.
[after 1600ms;append]
.
[after 1900ms;append]
.
[after 2500ms]
You can now speak the language of Minotaurs.

&amp;gt; [[Back-&gt;Cave 2]]</tw-passagedata><tw-passagedata pid="171" name="Corridor" tags="Area" position="475,925" size="100,100">You are in a brief and upsetting corridor.

There is [[Another Vestibule]] to the North.
[if killOrc === 0]
An [[Orc]] blocks your path to the South.
[cont]
[if killOrc === 1]
There is a [[Grand Hall]] to the South.
[cont]
&lt;div class=&quot;inventory&quot;&gt;[[Inventory]]&lt;/div&gt;</tw-passagedata><tw-passagedata pid="172" name="Another Vestibule" tags="Area" position="475,825" size="100,100">You are in another vestibule.

There is a [[Vestibule]] to the East.

There is a [[Corridor]] to the South.
[if getMirror === 1]
&amp;gt; [[Use Mirror-&gt;Bad Warp]]
[cont]
&lt;div class=&quot;inventory&quot;&gt;[[Inventory]]&lt;/div&gt;</tw-passagedata><tw-passagedata pid="173" name="Grand Hall" tags="Area" position="475,1025" size="100,100">[if elephantCounter &lt; 2]
You are in a grand hall.

Before you is an intimidating display of teethgrinding [[Swordsmen-&gt;No Elephant]] and disgruntled [[Fire Eaters-&gt;No Elephant]]. To your right is a pack of irritated [[Wolverines-&gt;No Elephant]] haphazardly leashed to a radiator. In the south east corner is a troupe of singing eunuchs riding a drunken war [[Elephant]]. In the far corner stands your arch nemesis, [[Lord Arras]].

To the North is a [[Corridor]].

&lt;div class=&quot;inventory&quot;&gt;[[Inventory-&gt;No Inventory]]&lt;/div&gt;
[cont]
[if elephantCounter === 2||elephantCounter === 3]
&quot;A pox on your wife, Brunswick! May the eaves of your outhouse be sullen with idiots and unusable culinary sauces develop unaccountably in your sock drawer!
Baron Chaffinch warned me of your meddling. I would discard his incoherence as a self half-emptying prophecy were it not for his unfortunate death and your even less fortunate life.&quot;

. . .

/[[Elephant]]

/[[Beans Elephant-&gt;Extreme Death]]
[cont]
[if elephantCounter &gt; 3 &amp;&amp; getArras === 0]
&quot;This is your last chance, wretch! Present the unicorn on whose trade we made a gentleman&#39;s agreement or be sent forever wailing into the abyss of your waning memory. You have ten seconds.&quot;

. . .

[[Talk-&gt;Hunter]]

[[Attack-&gt;Extreme Death]]

[[Get-&gt;No Get]]

[[Retreat-&gt;Hunter]]

/[[Eat Troll]]
[cont]
[if getArras === 1]
You are in a Grand Hall.

Lord Arras is dead.

Everyone has left.

To the North is a [[Corridor]].

&lt;div class=&quot;inventory&quot;&gt;[[Inventory-&gt;No Inventory]]&lt;/div&gt;
[cont]</tw-passagedata><tw-passagedata pid="174" name="Elephant" tags="Get" position="475,1125" size="100,100">elephantCounter: (elephantCounter + 1)
--
You don&#39;t have it.

&amp;gt; [[Back-&gt;Grand Hall]]</tw-passagedata><tw-passagedata pid="175" name="Lord Arras Death" tags="DEATH" position="100,1125" size="100,100">&quot;I will death you, Brunswick!&quot;
[after 1300ms]
.
[after 1600ms;append]
.
[after 1900ms;append]
.
[after 2500ms]
The Lord Arras seizes you.
[after 3200ms]
. . .

The outcome of the seizure is unfavourable.
[after 4200ms]

Thank you for playing BBC Adventure Dungeon 31B.

Play again?

[[Y-&gt;Opening]] / [[N-&gt;Menu]]</tw-passagedata><tw-passagedata pid="176" name="Eat Troll" tags="" position="475,1225" size="100,100">[if getTroll === 0]
You don&#39;t have it.

. . .

The Disgruntled Hunter whispers the Unknowable Words of the Everdweller. Your mind implodes.

. . .

Thank you for playing BBC Adventure Dungeon 31B.

Play again?

[[Y-&gt;Opening]] / [[N-&gt;Menu]]
[cont]
[if getTroll === 1]
/[[Elephant]]
/[[Beans Elephant]]
/[[Spoon Beans Elephant]]
[cont]</tw-passagedata><tw-passagedata pid="177" name="Spoon Beans Elephant" tags="" position="475,1325" size="100,100">[unless getSpoon === 1 &amp;&amp; getBeans === 1]
You cannot ///#item.spoon &amp;&amp; #item.beans

[[#link.back-&gt;Start]]
[cont]
[if getSpoon === 1 &amp;&amp; getBeans === 1]
. . .

&quot;I will death you...&quot;

. . .

You have defeated the Lord Arras.

&amp;gt; [[Loot-&gt;Get Amulet]]
[cont]</tw-passagedata><tw-passagedata pid="178" name="Get Amulet" tags="Get" position="475,1425" size="100,100">getTroll: 0
getArras: 1
--
You get the Amulet of Arras.

&amp;gt; [[Back-&gt;Grand Hall]]</tw-passagedata><tw-passagedata pid="179" name="Beans Elephant" tags="DEATH" position="350,1325" size="100,100">&quot;I do not understand beans, Brunswick. And my patience runs as thin as my blade. Prepare to death!&quot;

[after 1300ms]
.
[after 1600ms;append]
.
[after 1900ms;append]
.
[after 2500ms]
The Lord Arras seizes you.
[after 3200ms]
. . .

The outcome of the seizure is unfavourable.
[after 4200ms]

Thank you for playing BBC Adventure Dungeon 31B.

Play again?

[[Y-&gt;Opening]] / [[N-&gt;Menu]]</tw-passagedata><tw-passagedata pid="180" name="Wizard Kill" tags="DEATH" position="3425,1325" size="100,100">The wizard seizes you.
[after 1300ms]
.
[after 1600ms;append]
.
[after 1900ms;append]
.
[after 2500ms]
Circumstances are poor.
[after 3500ms]
. . .

Thank you for playing BBC Adventure Dungeon 31B.

Play again?

[[Y-&gt;Opening]] / [[N-&gt;Menu]]</tw-passagedata><tw-passagedata pid="181" name="Wheelhouse" tags="Area" position="825,1200" size="100,100">spinCounter: (spinCounter + 1)
--
[if openLobby === 0]
You are in a Wheelhouse. On a [[Wheel-&gt;No Get]].
[cont]
[if spinCounter &gt; 1 &amp;&amp; openLobby === 0]
You have spun {spinCounter} times.
[cont]
[if getGoblin === 1 &amp;&amp; openLobby === 0]
&amp;gt; [[Throw Goblin]]
[cont]
[if openLobby === 0]
&amp;gt; [[Spin-&gt;Wheelhouse]]

&amp;gt; [[Exit-&gt;Maze 3]]
[cont]
[if openLobby === 1]
You are in a Wheelhouse.

There is a [[Lobby]] to the East.

There is a [[Weird Maze-&gt;Maze 3]] to the South.

&lt;div class=&quot;inventory&quot;&gt;[[Inventory]]&lt;/div&gt;
[cont]
</tw-passagedata><tw-passagedata pid="182" name="Throw Goblin" tags="" position="725,1200" size="100,100">getGoblin: 0
--
[if spinCounter &lt; 7]
You throw the Goblin into the machinery.

The wheel is going too slowly and the Goblin slips out.

The Goblin curses your name and runs away.

&amp;gt; [[Back-&gt;Wheelhouse]]
[cont]
[if spinCounter &gt; 6]
You throw the Goblin into the machinery.

Eventually its thorax gets caught between the gears and the wheel.

&amp;gt; [[Continue-&gt;Wheelhouse 2]]
</tw-passagedata><tw-passagedata pid="183" name="Wheelhouse 2" tags="" position="725,1100" size="100,100">openLobby: 1
--
The Wheel breaks and rolls away, revealing an exit.

&amp;gt; [[Continue-&gt;Wheelhouse]]</tw-passagedata><tw-passagedata pid="184" name="Lobby" tags="Area" position="825,1300" size="100,100">You are in the Lobby of the Wheelhouse.

It is taking itself too seriously.

There is an [[Exit-&gt;Gift Shop]] to the East.

There is a [[Wheelhouse]] to the West.

There is a [[Long Staircase]] to the South.

&lt;div class=&quot;inventory&quot;&gt;[[Inventory]]&lt;/div&gt;</tw-passagedata><tw-passagedata pid="185" name="Gift Shop" tags="Area" position="825,1400" size="100,100">You are in the Gift Shop of the Wheelhouse.

You cannot see any way out through the endless shelves of Useless Knick-Knacks.

The [[Lobby]] is to the West.

&amp;gt; [[Shop-&gt;Gift Shop Inventory]]

&lt;div class=&quot;inventory&quot;&gt;[[Inventory]]&lt;/div&gt;</tw-passagedata><tw-passagedata pid="186" name="No Inventory" tags="Generic" position="2900,200" size="100,100">You cannot open your Inventory here.

&amp;gt; {back link}</tw-passagedata><tw-passagedata pid="187" name="Gift Shop Inventory" tags="" position="725,1400" size="100,100">The Wheelhouse Gift Shop sells the following items:

- [[Halbard]]

- [[Useless Knick-Knack-&gt;Useless Item]]

- [[Priceless Gemstone Wheel-&gt;No Points]]

&amp;gt; [[Back-&gt;Gift Shop]]</tw-passagedata><tw-passagedata pid="188" name="Halbard" tags="" position="625,1500" size="100,100">The Halbard costs 2 Coins.
[if _score &lt; 2]
You do not have enough Coins to purchase this item.
[cont]
[if _score &gt; 1]
&amp;gt; [[Purchase-&gt;Get Halbard]]
[cont]
&amp;gt; [[Back-&gt;Gift Shop Inventory]]</tw-passagedata><tw-passagedata pid="189" name="Useless Item" tags="" position="725,1500" size="100,100">The Tchotchke costs 1 Coins.
[if _score &lt; 1]
You do not have enough Coins to purchase this item.
[cont]
[if _score &gt; 0]
&amp;gt; [[Purchase-&gt;Get Crap]]
[cont]
&amp;gt; [[Back-&gt;Gift Shop Inventory]]</tw-passagedata><tw-passagedata pid="190" name="No Points" tags="Generic" position="3000,200" size="100,100">You do not have enough Coins to purchase this item.

&amp;gt; {back link}</tw-passagedata><tw-passagedata pid="191" name="Get Halbard" tags="Get" position="625,1600" size="100,100">_score: (_score - 2)
getHalbard: 1
--
You purchase the Halbard.

&amp;gt; [[Back-&gt;Gift Shop Inventory]]</tw-passagedata><tw-passagedata pid="192" name="Get Crap" tags="Get" position="725,1600" size="100,100">_score: (_score - 1)
getCrap: (getCrap + 1)
--
You purchase the Gift Shop Garbage.

&amp;gt; [[Back-&gt;Gift Shop Inventory]]</tw-passagedata><tw-passagedata pid="193" name="Give Amulet" tags="" position="3075,800" size="100,100">getAmulet: 0
--
&quot;Is that everything?&quot;

&amp;gt; [[&quot;Yes&quot;-&gt;Wrong Troll]]

&amp;gt; [[&quot;No&quot;-&gt;Ingredients]]</tw-passagedata><tw-passagedata pid="194" name="Give Trash" tags="" position="3075,700" size="100,100">getCrap: (getCrap - 1)
--
&quot;Is that everything?&quot;

&amp;gt; [[&quot;Yes&quot;-&gt;Wrong Troll]]

&amp;gt; [[&quot;No&quot;-&gt;Ingredients]]</tw-passagedata><tw-passagedata pid="195" name="Long Staircase" tags="Area" position="925,1300" size="100,100">secretDoor: 1
--
You are on a Long Staircase.

There is a [[Lobby]] to the North.

There is a [[Secret Door-&gt;Start]] to the South.

&lt;div class=&quot;inventory&quot;&gt;[[Inventory]]&lt;/div&gt;</tw-passagedata><tw-passagedata pid="196" name="Orc" tags="Talk" position="375,925" size="100,100">[if getHalbard === 0]
The Orc brandishes his battleaxe.

What would you like to do?

&amp;gt; [[Talk-&gt;Talk Orc]]

&amp;gt; [[Attack-&gt;Attack Orc]]
[cont]
[if getHalbard === 1]
The Orc brandishes his battleaxe.

What would you like to do?

&amp;gt; [[Talk-&gt;Talk Orc]]

&amp;gt; [[Attack-&gt;Kill Orc]]
[cont]
&amp;gt; [[Get-&gt;Attack Orc]]

&amp;gt; [[Retreat-&gt;Corridor]]</tw-passagedata><tw-passagedata pid="197" name="Talk Orc" tags="" position="250,925" size="100,100">[if getHalbard === 0]
&quot;Ha ha ha! Puny human has no weapon to defeat Orc!&quot;
[cont]
[if getHalbard === 1]
The Orc cowers.

&quot;Please do not harm Orc with weapon!&quot;
[cont]
&amp;gt; [[Back-&gt;Orc]]</tw-passagedata><tw-passagedata pid="198" name="Attack Orc" tags="DEATH" position="250,1025" size="100,100">You run toward the Orc with your arms outstretched.
[after 1300ms]
.
[after 1600ms;append]
.
[after 1900ms;append]
.
[after 2500ms]
The Orc cleaves your body.
[after 3200ms]
. . .

The cleavage is critical.
[after 4200ms]

Thank you for playing BBC Adventure Dungeon 31B.

Play again?

[[Y-&gt;Opening]] / [[N-&gt;Menu]]</tw-passagedata><tw-passagedata pid="199" name="Kill Orc" tags="" position="250,825" size="100,100">killOrc: 1
--
You swing the Bewitched Halbard of Gibbitus deftly at the Orc.
[after 1300ms]
.
[after 1600ms;append]
.
[after 1900ms;append]
.
[after 2500ms]
It breaks over his scaly hide.
[after 3200ms]
. . .

The Orc lifts his battleaxe high above his head and prepares to swing.
[after 4000ms]
. . .

The Orc trips over the broken Halbard and falls to the brief and upsetting floor.
[after 4800ms]
The Orc is dead.

[[Continue-&gt;Corridor]]</tw-passagedata><tw-passagedata pid="200" name="Hunter" tags="" position="225,1200" size="100,100">&quot;*This* is now your last chance! That previous chance was in fact your Penultimate chance.&quot;

&amp;gt; [[Give Unicorn-&gt;Eat Troll]]

/[[Elephant]]

/[[Beans Elephant-&gt;Extreme Death]]</tw-passagedata><tw-passagedata pid="201" name="Extreme Death" tags="DEATH" position="225,1325" size="100,100">You cannot

[after 1300ms]
.
[after 1600ms;append]
.
[after 1900ms;append]
.
[after 2600ms]
The Elephant, unamused, suddenly rears up and begins pelting you with Eunuchs.

It hurts.
[after 3600ms]
. . .

The Wolverines pick your corpse apart and you&#39;re not even dead. &quot;This is for Chaffinch!&quot; cried one of them, as oils began.
[after 4600ms]
. . .

The Fire Eaters can no longer take it, and having punched each other to death they fall on top of you in a pile.

You struggle.
[after 5600ms]
. . .

Swordsmen poke at your exposed face with pins as Lord Arras drinks Mead and gives you the finger.
[after 6600ms]
. . .

Ghost Whores swoop in fromm a nearby window and taunt you with defecation.

Oils continue.
[after 7600ms]
. . .

Horses kill you but you survive.

You have a Headache of 7.
[after 8600ms]
. . .

The ceiling unhinges itself from the roof and delivers a powerful uppercut which grazes your ear then you get raped.

Orange dogs refuse to eat you and you cry.
[after 9600ms]
. . .

Flames scorch you hairless as two hungry Dragons fight over your limp, ragdolled body.

You still do not die.

Further oil.

[after 10600ms]
. . .

A Duck the size of a pig falls from the sky and administers a concussion.

The Troll punches you from the inside.

It hurts in new ways.
[after 11600ms]
. . .

The walls bleed. It gets on you and you have AIDS.

Angels point and laungh and you become a Meme.

Thank you for playing BBC Adventure Dungeon 31B.
[after 12600ms]
. . .

Balloons attack you. Sentient Balloons made of plastic. That might not sound scary but boy howdy do they pummel you.
[after 13600ms]
. . .

Your Pants become enraged and they insult you. The Elephant gives you another slap, for it still has not forgotten.

Oils become unmanageable.
[after 14600ms]
. . .

Goats linen up in front of you and pull disparaging fces. One looks like your Dad.

A pigeon headbutts you.
[after 15600ms]
. . .

Dwarves bonk you on the head with Brass Ladels. It persists for fourteen days and you go mad.

You no longer recognize your own bodily fluids and you become frightened.
[after 16600ms]
. . .

Someone hits you from behind with a collapsable chair. You turn around to see who it was.

It was the Future.
[after 17600ms]
. . .

Your own reflection emerges from a moonlit puddle of petroleum and your own blood. It spits in your face but only air comes out so it elbows you in the butt all night.

You beg to be released from this gods forsaken game.
[after 18600ms]
. . .

I do not understand &quot;Gods&quot; said God, as He laughed and gave you a wedgie.

You say &quot;Fuck you&quot; to everything.
[after 19600ms]
. . .

The Wizard comes back from the dead and kicks you in the dick.

&quot;Fuck you too Buddy.&quot;

[after 20600ms]
. . .

You die.

Play again?

[[Y-&gt;Opening]] / [[N-&gt;Menu]]</tw-passagedata><tw-passagedata pid="202" name="No Elephant" tags="" position="575,1025" size="100,100">A minion of Lord Arras.

It Jeers at you.

The Elephant winks twice.

&amp;gt; [[Back-&gt;Grand Hall]]</tw-passagedata><tw-passagedata pid="203" name="Lord Arras" tags="" position="100,1025" size="100,100">Lord Arras sips his Mead and laughs at you.

What would you like to do?

&amp;gt; [[Talk-&gt;Talk Arras]]

&amp;gt; [[Attack-&gt;Lord Arras Death]]

&amp;gt; [[Get-&gt;Extreme Death]]

&amp;gt; [[Retreat-&gt;Grand Hall]]</tw-passagedata><tw-passagedata pid="204" name="Talk Arras" tags="" position="100,925" size="100,100">&quot;You haven&#39;t come this far to die now. Choose your next moves carefully. Confrontation is not your strong suit.&quot;

&amp;gt; [[Back-&gt;Lord Arras]]</tw-passagedata><tw-passagedata pid="205" name="Not Here" tags="Generic" position="3100,100" size="100,100">You cannot do that here.

&amp;gt; {back link}</tw-passagedata><tw-passagedata pid="206" name="Troll Wizard" tags="" position="3550,1175" size="100,100">&quot;Our plan is coming together perfectly, Brunswick!&quot;

&amp;gt; [[-&gt;Wizard Kill]

&amp;gt; [[Eat Troll-&gt;Not Here]]

&amp;gt; [[Attack Wizard]]</tw-passagedata><tw-passagedata pid="207" name="Globule" tags="Get" position="475,600" size="100,100">getKey: 1
_demon: 0
getGlob: 1
--
You get the Globule of Raw Air.

&amp;gt; [[Back-&gt;Wigwam]]</tw-passagedata><tw-passagedata pid="208" name="Wall" tags="" position="2225,950" size="100,100">wallCounter: (wallCounter + 1)
oobCounter: 0
--
[unless wallCounter &gt; 11||wallCounter === 6]
You cannot go that way.{wallCounter}
[cont]
[if wallCounter === 6]
An Imp appears from behind a curtain and slaps you. Your face comes off.

. . .
[cont]
[if wallCounter &gt; 11]
You are out of bounds.

[[#link.back-&gt;OOB]]
[cont]
[unless wallCounter === 12]
&amp;gt; [[Back-&gt;Upstairs]]</tw-passagedata><tw-passagedata pid="209" name="Tickle Statue" tags="" position="2075,100" size="100,100">You attempt to tickle the statue with your bare hands.
[after 1300ms]
.
[after 1600ms;append]
.
[after 1900ms;append]
.
[after 2500ms]
&quot;You dare boyhandle me with your flacid human digits? This is an outrage of otherworldly proportions, meat fool! Death by stoning it shall be!&quot;
[after 3500ms]
. . .

Thank you for playing BBC Adventure Dungeon 31B.

Play again?

[[Y-&gt;Opening]] / [[N-&gt;Menu]]</tw-passagedata><tw-passagedata pid="210" name="OOB" tags="" position="2225,1050" size="100,100">oobCounter: (oobCounter + 1)
wallCounter: 0
--
You are out of bounds.
[if oobCounter === 1]
To the [[West-&gt;] is a mirror universe of infinite Naked Imps.
[cont]
[if oobCounter === 4]
You are in Parallel Universe 4.
[cont]
[if oobCounter === 5]
You are in Parallel Universe 55.
[cont]
[if oobCounter === 6]
You are in Parallel Universe 8302.
[cont]
[if oobCounter === 7]
You are in Parallel Universe 113486.
[cont]
[if oobCounter === 8]
You are in Parallel Universe 35228546.
[cont]
[if oobCounter === 9]
You are in Parallel Universe 549212.
[cont]
[if oobCounter === 10]
You are in Parallel Universe 3099.
[cont]
[if oobCounter === 11]
You are in Parallel Universe 12.
[cont]
[if oobCounter === 15]
To the [[South-&gt;Goat Cave]] is a cosmic cave of Goats.

To the [[East-&gt;Mountain 4]] is an everlasting Lava Storm.
[cont]
[if oobCounter &gt; 15]
There is an [[Upstairs Boudoir-&gt;Upstairs]].
[cont]
[[#link.back-&gt;OOB]]</tw-passagedata><tw-passagedata pid="211" name="Goat Cave" tags="DEATH" position="2225,1150" size="100,100">There are Goats.
[after 750ms]
There are Goats.
[after 1500ms]
There are Goats.
[after 2250ms]
There are Goats.
[after 3000ms]
There are Goats.
[after 3750ms]
There are Goats.
[after 4500ms]
There are Goats.
[after 5250ms]
There are Goats.
[after 6000ms]
You are Goats.
[after 6750ms]
. . .

Play again?

[[Y-&gt;Opening]] / [[N-&gt;Menu]]</tw-passagedata><tw-passagedata pid="212" name="Wolverine" tags="" position="2300,1575" size="100,100">wolvCounter: (wolvCounter + 1)
--
You are in a Wolverine.
[if wolvCounter &gt; 1||wolvCounter &lt; 5]
You cannot go that way.
[cont]
[if wolvCounter &lt; 5]
What would you like to do?

&amp;gt; [North-&gt;Wolverine]

&amp;gt; [East-&gt;Wolverine]

&amp;gt; [South-&gt;Wolverine]

&amp;gt; [West-&gt;Wolverine]
[if wolvCounter &gt; 4]
You destroy the Wolverine&#39;s world.

&amp;gt; [[Continue-&gt;Wolverine 2]]

[[#link.back-&gt;Mountain 4]]</tw-passagedata><tw-passagedata pid="213" name="Wolverine 2" tags="DEATH" position="2300,1675" size="100,100">You are in another Wolverine.
[after 1300ms]
.
[after 1600ms;append]
.
[after 1900ms;append]
.
[after 2500ms]
A Troll kills you.
[after 3200ms]
. . .

Thank you for playing BBC Adventure Dungeon 31B.

Play again?

[[Y-&gt;Opening]] / [[N-&gt;Menu]]</tw-passagedata><tw-passagedata pid="214" name="Bad Warp" tags="" position="250,700" size="100,100">_query: &#39;credits&#39;
--
You hold the mirror out in front of youyou cannot use that here///...[BAD ERROR]...///

[[#link.credits-&gt;Menu]]</tw-passagedata><tw-passagedata pid="215" name="Fuck Demon" tags="" position="900,250" size="100,100">[if _secretEnd === &#39;/fuck demon&#39;||_secretEnd === &#39;fuck demon&#39;||_secretEnd === &#39;/kill demon&#39;||_secretEnd === &#39;kill demon&#39;]
The demon kills himself.

. . .

You win.

. . .

Thank you for playing BBC Adventure Dungeon 31B.

Play again?

[[Y-&gt;Opening]] / [[N-&gt;Menu]]
[cont]
[unless _secretEnd === &#39;/fuck demon&#39;||_secretEnd === &#39;fuck demon&#39;||_secretEnd === &#39;/kill demon&#39;||_secretEnd === &#39;kill demon&#39;]
/No.

&amp;gt; [[Back-&gt;Start]]
[cont]</tw-passagedata><tw-passagedata pid="216" name="Unlock Pantry" tags="" position="2450,525" size="100,100">ghostKey: 1
--
You swipe the key and unlock the [[Pantry]].

&amp;gt; [[Back-&gt;West Wing]]</tw-passagedata><tw-passagedata pid="217" name="Wizard Quest" tags="" position="3000,1325" size="100,100">&quot;Then make haste! I require a Globule of Raw Air, a Subdued Waterfowl and six flagons of &lt;a href=&quot;http://oldwolberts.com/&quot; rel=&quot;noopener&quot; target=&quot;_blank&quot;&gt;Old Wolbert&#39;s Rubbing Butter&lt;/a&gt;!&quot;

&amp;gt; [[Back-&gt;Wigwam]]</tw-passagedata></tw-storydata><script>!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=28)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.get=t.set=t.defaults=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.init=function(){var e=(0,u.name)();if(void 0===e)throw new Error("Cannot set up state: the story has no name");d="chapbook-state-"+e},t.reset=v,t.sameObject=function(e,t){for(var n=e.split("."),r=t.split("."),o=0;o<n.length&&o<r.length;o++)if(n[o]!==r[o])return!1;return!0},t.setDefault=function(e,t){var n=y(e);f('Defaulting "'+e+'" to '+JSON.stringify(t)),(0,i.default)(h,e,t),m(window,e),null==n&&a.default.emit("state-change",{name:e,value:t,previous:n})},t.setLookup=function(e,t){var n=y(e);f("Adding lookup variable "+e),(0,i.default)(g,e,t),m(window,e),null==n&&a.default.emit("state-change",{name:e,value:y(e),previous:n})},t.saveToObject=w,t.restoreFromObject=_,t.canSaveToStorage=x,t.saveToStorage=k,t.canRestoreFromStorage=function(){return x()&&null!==window.localStorage.getItem(d)},t.restoreFromStorage=function(){f("Restoring variables from local storage"),_(JSON.parse(window.localStorage.getItem(d))),f("Restore complete")},t.purgeFromStorage=function(e){e||f("Purging variables from local storage");_(JSON.parse(window.localStorage.getItem(d))),e||f("Purge complete")},t.varNames=function(e){function t(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return Object.keys(e).reduce(function(o,i){if("object"===r(e[i])&&e[i]&&!Array.isArray(e[i]))t(e[i],n?n+"."+i:i,o);else{var s=n?n+"."+i:i;-1===o.indexOf(s)&&o.push(s)}return o},o)}if(e)return t(h,null,t(p,null)).sort();return t(p).sort()};var o=c(n(34)),i=c(n(35)),s=c(n(37)),a=c(n(1)),l=c(n(4)),u=n(6);function c(e){return e&&e.__esModule?e:{default:e}}var f=(0,l.default)("state").log,d=void 0,p={},h={},g={};function m(e,t){if(!(0,o.default)(e,t)){for(var n=t.split("."),r=n[n.length-1],i=0;i<n.length-1;i++)e[n[i]]=e[n[i]]||{},e=e[n[i]];Object.defineProperty(e,r,{get:function(){return y(t)},set:function(e){b(t,e)},configurable:!0})}}function v(){!function e(t,n){Object.keys(t).forEach(function(o){var i,l,u=""===n?o:n+"."+o;if("object"!==r(t[o])||Array.isArray(t[o])){var c=t[o];delete t[o],i=window,l=n,(0,s.default)(i,l),a.default.emit("state-change",{name:u,value:y(u),previous:c})}else e(t[o],u)})}(p,""),a.default.emit("state-reset"),y("config.state.autosave")&&k()}function b(e,t){var n=y(e);(0,i.default)(p,e,t),m(window,e),y(e)!==n&&a.default.emit("state-change",{name:e,value:y(e),previous:n}),y("config.state.autosave")&&k()}function y(e){var t=(0,o.default)(g,e);if(t)return t(y,b);var n=(0,o.default)(p,e);return null==n?(0,o.default)(h,e):n}function w(){return Object.assign({},p)}function _(e){v(),Object.keys(e).forEach(function(t){return b(t,e[t])})}function x(){try{return window.localStorage.setItem("chapbook-test","a"),window.localStorage.removeItem("chapbook-test"),!0}catch(e){return!1}}function k(){f("Saving to local storage: "+JSON.stringify(w())),window.localStorage.setItem(d,JSON.stringify(w())),f("Save complete")}t.defaults={"config.state.autosave":!0},t.set=b,t.get=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(30),i=(r=o)&&r.__esModule?r:{default:r};t.default=(0,i.default)()},function(e,t,n){"use strict";n.r(t),n.d(t,"h",function(){return a}),n.d(t,"createElement",function(){return a}),n.d(t,"cloneElement",function(){return f}),n.d(t,"createRef",function(){return R}),n.d(t,"Component",function(){return D}),n.d(t,"render",function(){return q}),n.d(t,"rerender",function(){return g}),n.d(t,"options",function(){return o});var r=function(){},o={},i=[],s=[];function a(e,t){var n,a,l,u,c=s;for(u=arguments.length;u-- >2;)i.push(arguments[u]);for(t&&null!=t.children&&(i.length||i.push(t.children),delete t.children);i.length;)if((a=i.pop())&&void 0!==a.pop)for(u=a.length;u--;)i.push(a[u]);else"boolean"==typeof a&&(a=null),(l="function"!=typeof e)&&(null==a?a="":"number"==typeof a?a=String(a):"string"!=typeof a&&(l=!1)),l&&n?c[c.length-1]+=a:c===s?c=[a]:c.push(a),n=l;var f=new r;return f.nodeName=e,f.children=c,f.attributes=null==t?void 0:t,f.key=null==t?void 0:t.key,void 0!==o.vnode&&o.vnode(f),f}function l(e,t){for(var n in t)e[n]=t[n];return e}function u(e,t){null!=e&&("function"==typeof e?e(t):e.current=t)}var c="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout;function f(e,t){return a(e.nodeName,l(l({},e.attributes),t),arguments.length>2?[].slice.call(arguments,2):e.children)}var d=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,p=[];function h(e){!e._dirty&&(e._dirty=!0)&&1==p.push(e)&&(o.debounceRendering||c)(g)}function g(){for(var e;e=p.pop();)e._dirty&&$(e)}function m(e,t){return e.normalizedNodeName===t||e.nodeName.toLowerCase()===t.toLowerCase()}function v(e){var t=l({},e.attributes);t.children=e.children;var n=e.nodeName.defaultProps;if(void 0!==n)for(var r in n)void 0===t[r]&&(t[r]=n[r]);return t}function b(e){var t=e.parentNode;t&&t.removeChild(e)}function y(e,t,n,r,o){if("className"===t&&(t="class"),"key"===t);else if("ref"===t)u(n,null),u(r,e);else if("class"!==t||o)if("style"===t){if(r&&"string"!=typeof r&&"string"!=typeof n||(e.style.cssText=r||""),r&&"object"==typeof r){if("string"!=typeof n)for(var i in n)i in r||(e.style[i]="");for(var i in r)e.style[i]="number"==typeof r[i]&&!1===d.test(i)?r[i]+"px":r[i]}}else if("dangerouslySetInnerHTML"===t)r&&(e.innerHTML=r.__html||"");else if("o"==t[0]&&"n"==t[1]){var s=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),r?n||e.addEventListener(t,w,s):e.removeEventListener(t,w,s),(e._listeners||(e._listeners={}))[t]=r}else if("list"!==t&&"type"!==t&&!o&&t in e){try{e[t]=null==r?"":r}catch(e){}null!=r&&!1!==r||"spellcheck"==t||e.removeAttribute(t)}else{var a=o&&t!==(t=t.replace(/^xlink:?/,""));null==r||!1===r?a?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):"function"!=typeof r&&(a?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),r):e.setAttribute(t,r))}else e.className=r||""}function w(e){return this._listeners[e.type](o.event&&o.event(e)||e)}var _=[],x=0,k=!1,S=!1;function j(){for(var e;e=_.shift();)o.afterMount&&o.afterMount(e),e.componentDidMount&&e.componentDidMount()}function O(e,t,n,r,o,i){x++||(k=null!=o&&void 0!==o.ownerSVGElement,S=null!=e&&!("__preactattr_"in e));var s=C(e,t,n,r,i);return o&&s.parentNode!==o&&o.appendChild(s),--x||(S=!1,i||j()),s}function C(e,t,n,r,o){var i=e,s=k;if(null!=t&&"boolean"!=typeof t||(t=""),"string"==typeof t||"number"==typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||o)?e.nodeValue!=t&&(e.nodeValue=t):(i=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(i,e),M(e,!0))),i.__preactattr_=!0,i;var a,l,u=t.nodeName;if("function"==typeof u)return function(e,t,n,r){var o=e&&e._component,i=o,s=e,a=o&&e._componentConstructor===t.nodeName,l=a,u=v(t);for(;o&&!l&&(o=o._parentComponent);)l=o.constructor===t.nodeName;o&&l&&(!r||o._component)?(N(o,u,3,n,r),e=o.base):(i&&!a&&(T(i),e=s=null),o=E(t.nodeName,u,n),e&&!o.nextBase&&(o.nextBase=e,s=null),N(o,u,1,n,r),e=o.base,s&&e!==s&&(s._component=null,M(s,!1)));return e}(e,t,n,r);if(k="svg"===u||"foreignObject"!==u&&k,u=String(u),(!e||!m(e,u))&&(a=u,(l=k?document.createElementNS("http://www.w3.org/2000/svg",a):document.createElement(a)).normalizedNodeName=a,i=l,e)){for(;e.firstChild;)i.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(i,e),M(e,!0)}var c=i.firstChild,f=i.__preactattr_,d=t.children;if(null==f){f=i.__preactattr_={};for(var p=i.attributes,h=p.length;h--;)f[p[h].name]=p[h].value}return!S&&d&&1===d.length&&"string"==typeof d[0]&&null!=c&&void 0!==c.splitText&&null==c.nextSibling?c.nodeValue!=d[0]&&(c.nodeValue=d[0]):(d&&d.length||null!=c)&&function(e,t,n,r,o){var i,s,a,l,u,c=e.childNodes,f=[],d={},p=0,h=0,g=c.length,v=0,y=t?t.length:0;if(0!==g)for(var w=0;w<g;w++){var _=c[w],x=_.__preactattr_,k=y&&x?_._component?_._component.__key:x.key:null;null!=k?(p++,d[k]=_):(x||(void 0!==_.splitText?!o||_.nodeValue.trim():o))&&(f[v++]=_)}if(0!==y)for(var w=0;w<y;w++){l=t[w],u=null;var k=l.key;if(null!=k)p&&void 0!==d[k]&&(u=d[k],d[k]=void 0,p--);else if(h<v)for(i=h;i<v;i++)if(void 0!==f[i]&&(S=s=f[i],O=o,"string"==typeof(j=l)||"number"==typeof j?void 0!==S.splitText:"string"==typeof j.nodeName?!S._componentConstructor&&m(S,j.nodeName):O||S._componentConstructor===j.nodeName)){u=s,f[i]=void 0,i===v-1&&v--,i===h&&h++;break}u=C(u,l,n,r),a=c[w],u&&u!==e&&u!==a&&(null==a?e.appendChild(u):u===a.nextSibling?b(a):e.insertBefore(u,a))}var S,j,O;if(p)for(var w in d)void 0!==d[w]&&M(d[w],!1);for(;h<=v;)void 0!==(u=f[v--])&&M(u,!1)}(i,d,n,r,S||null!=f.dangerouslySetInnerHTML),function(e,t,n){var r;for(r in n)t&&null!=t[r]||null==n[r]||y(e,r,n[r],n[r]=void 0,k);for(r in t)"children"===r||"innerHTML"===r||r in n&&t[r]===("value"===r||"checked"===r?e[r]:n[r])||y(e,r,n[r],n[r]=t[r],k)}(i,t.attributes,f),k=s,i}function M(e,t){var n=e._component;n?T(n):(null!=e.__preactattr_&&u(e.__preactattr_.ref,null),!1!==t&&null!=e.__preactattr_||b(e),A(e))}function A(e){for(e=e.lastChild;e;){var t=e.previousSibling;M(e,!0),e=t}}var L=[];function E(e,t,n){var r,o=L.length;for(e.prototype&&e.prototype.render?(r=new e(t,n),D.call(r,t,n)):((r=new D(t,n)).constructor=e,r.render=P);o--;)if(L[o].constructor===e)return r.nextBase=L[o].nextBase,L.splice(o,1),r;return r}function P(e,t,n){return this.constructor(e,n)}function N(e,t,n,r,i){e._disable||(e._disable=!0,e.__ref=t.ref,e.__key=t.key,delete t.ref,delete t.key,void 0===e.constructor.getDerivedStateFromProps&&(!e.base||i?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,r)),r&&r!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=r),e.prevProps||(e.prevProps=e.props),e.props=t,e._disable=!1,0!==n&&(1!==n&&!1===o.syncComponentUpdates&&e.base?h(e):$(e,1,i)),u(e.__ref,e))}function $(e,t,n,r){if(!e._disable){var i,s,a,u=e.props,c=e.state,f=e.context,d=e.prevProps||u,p=e.prevState||c,h=e.prevContext||f,g=e.base,m=e.nextBase,b=g||m,y=e._component,w=!1,k=h;if(e.constructor.getDerivedStateFromProps&&(c=l(l({},c),e.constructor.getDerivedStateFromProps(u,c)),e.state=c),g&&(e.props=d,e.state=p,e.context=h,2!==t&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(u,c,f)?w=!0:e.componentWillUpdate&&e.componentWillUpdate(u,c,f),e.props=u,e.state=c,e.context=f),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!w){i=e.render(u,c,f),e.getChildContext&&(f=l(l({},f),e.getChildContext())),g&&e.getSnapshotBeforeUpdate&&(k=e.getSnapshotBeforeUpdate(d,p));var S,C,A=i&&i.nodeName;if("function"==typeof A){var L=v(i);(s=y)&&s.constructor===A&&L.key==s.__key?N(s,L,1,f,!1):(S=s,e._component=s=E(A,L,f),s.nextBase=s.nextBase||m,s._parentComponent=e,N(s,L,0,f,!1),$(s,1,n,!0)),C=s.base}else a=b,(S=y)&&(a=e._component=null),(b||1===t)&&(a&&(a._component=null),C=O(a,i,f,n||!g,b&&b.parentNode,!0));if(b&&C!==b&&s!==y){var P=b.parentNode;P&&C!==P&&(P.replaceChild(C,b),S||(b._component=null,M(b,!1)))}if(S&&T(S),e.base=C,C&&!r){for(var D=e,q=e;q=q._parentComponent;)(D=q).base=C;C._component=D,C._componentConstructor=D.constructor}}for(!g||n?_.push(e):w||(e.componentDidUpdate&&e.componentDidUpdate(d,p,k),o.afterUpdate&&o.afterUpdate(e));e._renderCallbacks.length;)e._renderCallbacks.pop().call(e);x||r||j()}}function T(e){o.beforeUnmount&&o.beforeUnmount(e);var t=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var n=e._component;n?T(n):t&&(null!=t.__preactattr_&&u(t.__preactattr_.ref,null),e.nextBase=t,b(t),L.push(e),A(t)),u(e.__ref,null)}function D(e,t){this._dirty=!0,this.context=t,this.props=e,this.state=this.state||{},this._renderCallbacks=[]}function q(e,t,n){return O(n,e,{},!1,t,!1)}function R(){return{}}l(D.prototype,{setState:function(e,t){this.prevState||(this.prevState=this.state),this.state=l(l({},this.state),"function"==typeof e?e(this.state,this.props):e),t&&this._renderCallbacks.push(t),h(this)},forceUpdate:function(e){e&&this._renderCallbacks.push(e),$(this,2)},render:function(){}});var z={h:a,createElement:a,cloneElement:f,createRef:R,Component:D,render:q,rerender:g,options:o};t.default=z},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.warn=t.log=t.defaults=void 0,t.default=function(e){return{log:function(t){l(e,t)},warn:function(t){u(e,t)}}};var r,o=n(1),i=(r=o)&&r.__esModule?r:{default:r},s=n(0);t.defaults={"config.logger.show.parse":!1,"config.logger.show.render":!1,"config.logger.show.sound":!1,"config.logger.show.state":!1,"config.logger.show.story":!1,"config.logger.show.style":!1};function a(e){return e+": "}function l(e,t){(0,s.get)("config.logger.show."+e)&&console.log(a(e)+t),i.default.emit("log",{source:e,message:t})}function u(e,t){console.warn(a(e)+t),i.default.emit("log-warning",{source:e,message:t})}t.log=l,t.warn=u,window.logger={log:l,warn:u}},function(e,t,n){"use strict";function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=document.createElement(e);return Object.keys(t).forEach(function(e){void 0!==t[e]&&r.setAttribute(e,t[e])}),n.forEach(function(e){"string"==typeof e?r.appendChild(document.createTextNode(e)):r.appendChild(e)}),r}Object.defineProperty(t,"__esModule",{value:!0}),t.domify=r,t.default=function(){return r.apply(void 0,arguments).outerHTML}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadFromData=function(e){["name","creator","ifid","options"].forEach(function(t){return u[t]=e.getAttribute(t)}),u.startNode=parseInt(e.getAttribute("startnode")),u.creatorVersion=e.getAttribute("creator-version");var t=function(e){return e.map(function(e){return e.textContent})};u.customScripts=t((0,s.selectAll)(e,'[type="text/twine-javascript"]')),u.customStyles=t((0,s.selectAll)(e,'[type="text/twine-css"]')),c=(0,s.selectAll)(e,"tw-passagedata").map(function(e){var t={id:parseInt(e.getAttribute("pid")),name:e.getAttribute("name"),source:e.textContent},n=e.getAttribute("tags");return n&&(t.tags=n.split(" ")),t}),!0},t.init=function(){(0,a.setDefault)("trail",[f().name]),(0,a.setDefault)("config.testing","string"==typeof u.options&&-1!==u.options.indexOf("debug")||!1),document.title=u.name},t.runCustomScripts=function(){l.log("Running custom scripts ("+u.customScripts.length+")"),u.customScripts.forEach(function(e){new Function(e).apply(window)})},t.addCustomStyles=function(){l.log("Adding custom styles ("+u.customStyles.length+")"),u.customStyles.forEach(function(e){var t=document.createElement("style");t.innerHTML=e,document.head.appendChild(t)})},t.name=function(){return u.name},t.startPassage=f,t.passageNamed=function(e){return c.find(function(t){return t.name===e})},t.passageWithId=function(e){return c.find(function(t){return t.id===e})};var r,o=n(4),i=(r=o)&&r.__esModule?r:{default:r},s=n(7),a=n(0);var l=(0,i.default)("story"),u={customScripts:[],customStyles:[]},c=[];function f(){return c.find(function(e){return e.id===u.startNode})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.select=function(e,t){return e.querySelector(t)},t.selectAll=function(e,t){return Array.from(e.querySelectorAll(t))}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);n(46);t.default=class extends r.Component{constructor(e){super(e),this.state={open:void 0===this.props.initiallyOpen||this.props.initiallyOpen}}toggle(){this.setState({open:!this.state.open})}render(){return(0,r.h)("div",{class:"panel"+(this.state.open?" open":"")},(0,r.h)("h2",null,(0,r.h)("button",{onClick:()=>this.toggle()},this.props.title)),this.state.open&&(0,r.h)("div",{class:"content"},this.props.children))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaults=void 0,t.render=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,s.default)((0,i.default)(e),(0,a.get)("config.template.inserts")||[],(0,a.get)("config.template.modifiers")||[],t)};var r=l(n(60)),o=l(n(84)),i=l(n(94)),s=l(n(96)),a=n(0);function l(e){return e&&e.__esModule?e:{default:e}}t.defaults={"config.template.inserts":r.default,"config.template.modifiers":o.default}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaults=void 0,t.init=function(){(0,a.init)(),(0,l.init)(),h=document.querySelector("#page article"),m=document.querySelector("#page #spinner"),g={},["header","footer"].forEach(function(e){g[e]={container:document.querySelector("#page "+e)},["left","center","right"].forEach(function(t){g[e][t]=document.querySelector("#page "+e+" ."+t)})}),o.default.on("state-change",function(e){var t=e.name;e.value;return y("trail"===t)}),["change","click"].forEach(function(e){document.body.addEventListener(e,function(e){for(var t=e.target;t;)t.dataset&&Object.keys(t.dataset).some(function(e){return/^cb[A-Z]/.test(e)})&&o.default.emit("dom-"+e.type,t),t=t.parentNode})})},t.changeBody=function(e){(0,d.selectAll)(h,"input").forEach(function(e){e.setAttribute("value",e.value)}),(0,d.selectAll)(h,"select").forEach(function(e){for(var t=0;t<e.options.length;t++)t===e.options.selectedIndex?e.options[t].setAttribute("selected",""):e.options[t].removeAttribute("selected")});var t={x:window.scrollX,y:window.scrollY},n=h.innerHTML,r=document.createElement("div");for(;h.firstChild;)r.insertBefore(h.firstChild,r.firstChild);h.innerHTML=n,e(r),window.scrollX=t.x,window.scrollY=t.y,b(h,r.innerHTML,(0,s.get)("config.body.transition.name"),(0,s.get)("config.body.transition.duration"))};var r=p(n(20)),o=p(n(1)),i=n(64),s=n(0),a=n(66),l=n(69),u=n(6),c=n(11),f=p(n(71));n(72);var d=n(7);function p(e){return e&&e.__esModule?e:{default:e}}var h=void 0,g=void 0,m=void 0,v={crossfade:i.crossfade,fadeInOut:i.fadeInOut,none:i.none};t.defaults={"config.body.transition.name":"crossfade","config.body.transition.duration":"500ms","config.header.left":"","config.header.center":"","config.header.right":"","config.header.transition.name":"none","config.header.transition.duration":"500ms","config.footer.left":"_{story.name}_","config.footer.center":"","config.footer.right":"{restart link}","config.footer.transition.name":"none","config.footer.transition.duration":"500ms"};function b(e,t,n,r){v[n]?v[n](e,t,r):v.none(e,t)}var y=(0,r.default)(function(e){if(e.some(function(e){return e[0]})){var t=(0,s.get)("trail"),n=(0,u.passageNamed)(t[t.length-1]);if(!n)throw new Error('There is no passage named "'+t[t.length-1]+'".');b(h,(0,c.render)(n.source),(0,s.get)("config.body.transition.name"),(0,s.get)("config.body.transition.duration")),(0,f.default)(h,m)}["header","footer"].forEach(function(e){g[e].container.classList.remove("has-content"),["left","center","right"].forEach(function(t){var n=(0,c.render)((0,s.get)("config."+e+"."+t));""!==n&&g[e].container.classList.add("has-content"),b(g[e][t],n,(0,s.get)("config."+e+".transition.name"),(0,s.get)("config."+e+".transition.duration"))})})})},function(e,t,n){"use strict";e.exports=function(e,t,n){n=Object.assign({},r,n||{});let o=0,s=function(e){let t={ms:.001,s:1,m:60,h:3600};return t.d=e.hoursPerDay*t.h,t.w=e.daysPerWeek*t.d,t.mth=e.daysPerYear/e.monthsPerYear*t.d,t.y=e.daysPerYear*t.d,t}(n),a=e.toLowerCase().replace(/[^.\w+-]+/g,"").match(/[-+]?[0-9.]+[a-z]+/g);null!==a&&a.forEach(e=>{let t=e.match(/[0-9.]+/g)[0],n=e.match(/[a-z]+/g)[0];o+=function(e,t,n){return e*n[i(t)]}(t,n,s)});if(t)return function(e,t,n){return e/n[i(t)]}(o,t,s);return o};const r={hoursPerDay:24,daysPerWeek:7,weeksPerMonth:4,monthsPerYear:12,daysPerYear:365.25},o={ms:["ms","milli","millisecond","milliseconds"],s:["s","sec","secs","second","seconds"],m:["m","min","mins","minute","minutes"],h:["h","hr","hrs","hour","hours"],d:["d","day","days"],w:["w","week","weeks"],mth:["mon","mth","mths","month","months"],y:["y","yr","yrs","year","years"]};function i(e){for(let t of Object.keys(o))if(o[t].indexOf(e)>-1)return t;throw new Error(`The unit [${e}] is not supported by timestring`)}},function(e,t){function n(e,t){if(!e)throw new Error(t||"AssertionError")}n.notEqual=function(e,t,r){n(e!=t,r)},n.notOk=function(e,t){n(!e,t)},n.equal=function(e,t,r){n(e==t,r)},n.ok=n,e.exports=n},function(e,t,n){"use strict";
/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */e.exports=function(e){return null!=e&&"object"==typeof e&&!1===Array.isArray(e)}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderLink=s,t.default=function(e){return e.replace(/\[\[(.*?)\]\]/g,function(e,t){var n=t,r=t.indexOf("|");if(-1!==r)n=t.substr(0,r),t=t.substr(r+1);else{var o=t.indexOf("->");if(-1!==o)n=t.substr(0,o),t=t.substr(o+2);else{var i=t.indexOf("<-");-1!==i&&(n=t.substr(i+2),t=t.substr(0,i))}}return s(t,n||t)})};var r,o=n(5),i=(r=o)&&r.__esModule?r:{default:r};function s(e,t){return/^\w+:\/\/\/?\w/i.test(e)?(0,i.default)("a",{href:e},[t||e]):(0,i.default)("a",{href:"javascript:void(0)","data-cb-go":e},[t||e])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.history=t.defaults=void 0,t.rewindTo=function(e){if(!a[e])throw new Error("There is no history at index "+e+" to rewind to.");l=!1,(0,s.restoreFromObject)(a[e].state),a.length=e+1,l=!0,i.default.emit("backstage-recorder-update")},t.init=function(){i.default.on("state-change",c),i.default.on("state-reset",u)};var r,o=n(1),i=(r=o)&&r.__esModule?r:{default:r},s=n(0);t.defaults={"config.backstage.trail.maxLength":100};var a=t.history=[],l=!0;function u(){l&&(t.history=a=[],i.default.emit("backstage-recorder-update"))}function c(e){var t=e.name,n=e.value;l&&(a.length===(0,s.get)("config.backstage.trail.maxLength")&&a.shift(),a.push({change:{name:t,value:n},state:(0,s.saveToObject)()}),i.default.emit("backstage-recorder-update"))}},function(e,t,n){(function(t){var n=1/0,r="[object Symbol]",o=/[&<>"'`]/g,i=RegExp(o.source),s="object"==typeof t&&t&&t.Object===Object&&t,a="object"==typeof self&&self&&self.Object===Object&&self,l=s||a||Function("return this")();var u,c=(u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},function(e){return null==u?void 0:u[e]}),f=Object.prototype.toString,d=l.Symbol,p=d?d.prototype:void 0,h=p?p.toString:void 0;function g(e){if("string"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&f.call(e)==r}(e))return h?h.call(e):"";var t=e+"";return"0"==t&&1/e==-n?"-0":t}e.exports=function(e){var t;return(e=null==(t=e)?"":g(t))&&i.test(e)?e.replace(o,c):e}}).call(this,n(16))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=[],n=!1;return function(){for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];n||(n=!0,Promise.resolve().then(function(){try{e(t)}catch(e){window.setTimeout(function(){throw e},0)}t=[],n=!1})),t.push(o)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="<span"+Object.keys(t).reduce(function(e,n){return e+" "+n+'="'+t[n]+'"'},"")+">",r=n+e.replace(/[\r\n]{2,}/g,"</span>$&"+n)+"</span>";return r=r.replace(/(<span.*?>)\s*(#+)/gi,"$2 $1")}},function(e,t,n){(function(t){!function(t){"use strict";var n={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:m,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,nptable:m,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,table:m,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading| {0,3}>|<\/?(?:tag)(?: +|\n|\/?>)|<(?:script|pre|style|!--))[^\n]+)*)/,text:/^[^\n]+/};function r(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||_.defaults,this.rules=n.normal,this.options.pedantic?this.rules=n.pedantic:this.options.gfm&&(this.options.tables?this.rules=n.tables:this.rules=n.gfm)}n._label=/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,n._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,n.def=d(n.def).replace("label",n._label).replace("title",n._title).getRegex(),n.bullet=/(?:[*+-]|\d{1,9}\.)/,n.item=/^( *)(bull) ?[^\n]*(?:\n(?!\1bull ?)[^\n]*)*/,n.item=d(n.item,"gm").replace(/bull/g,n.bullet).getRegex(),n.list=d(n.list).replace(/bull/g,n.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+n.def.source+")").getRegex(),n._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",n._comment=/<!--(?!-?>)[\s\S]*?-->/,n.html=d(n.html,"i").replace("comment",n._comment).replace("tag",n._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),n.paragraph=d(n.paragraph).replace("hr",n.hr).replace("heading",n.heading).replace("lheading",n.lheading).replace("tag",n._tag).getRegex(),n.blockquote=d(n.blockquote).replace("paragraph",n.paragraph).getRegex(),n.normal=v({},n),n.gfm=v({},n.normal,{fences:/^ {0,3}(`{3,}|~{3,})([^`\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),n.gfm.paragraph=d(n.paragraph).replace("(?!","(?!"+n.gfm.fences.source.replace("\\1","\\2")+"|"+n.list.source.replace("\\1","\\3")+"|").getRegex(),n.tables=v({},n.gfm,{nptable:/^ *([^|\n ].*\|.*)\n *([-:]+ *\|[-| :]*)(?:\n((?:.*[^>\n ].*(?:\n|$))*)\n*|$)/,table:/^ *\|(.+)\n *\|?( *[-:]+[-| :]*)(?:\n((?: *[^>\n ].*(?:\n|$))*)\n*|$)/}),n.pedantic=v({},n.normal,{html:d("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",n._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/}),r.rules=n,r.lex=function(e,t){return new r(t).lex(e)},r.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},r.prototype.token=function(e,t){var r,o,i,s,a,l,u,c,f,d,p,h,g,m,v,w;for(e=e.replace(/^ +$/gm,"");e;)if((i=this.rules.newline.exec(e))&&(e=e.substring(i[0].length),i[0].length>1&&this.tokens.push({type:"space"})),i=this.rules.code.exec(e))e=e.substring(i[0].length),i=i[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?i:y(i,"\n")});else if(i=this.rules.fences.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"code",lang:i[2]?i[2].trim():i[2],text:i[3]||""});else if(i=this.rules.heading.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"heading",depth:i[1].length,text:i[2]});else if((i=this.rules.nptable.exec(e))&&(l={type:"table",header:b(i[1].replace(/^ *| *\| *$/g,"")),align:i[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:i[3]?i[3].replace(/\n$/,"").split("\n"):[]}).header.length===l.align.length){for(e=e.substring(i[0].length),p=0;p<l.align.length;p++)/^ *-+: *$/.test(l.align[p])?l.align[p]="right":/^ *:-+: *$/.test(l.align[p])?l.align[p]="center":/^ *:-+ *$/.test(l.align[p])?l.align[p]="left":l.align[p]=null;for(p=0;p<l.cells.length;p++)l.cells[p]=b(l.cells[p],l.header.length);this.tokens.push(l)}else if(i=this.rules.hr.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"hr"});else if(i=this.rules.blockquote.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"blockquote_start"}),i=i[0].replace(/^ *> ?/gm,""),this.token(i,t),this.tokens.push({type:"blockquote_end"});else if(i=this.rules.list.exec(e)){for(e=e.substring(i[0].length),u={type:"list_start",ordered:m=(s=i[2]).length>1,start:m?+s:"",loose:!1},this.tokens.push(u),c=[],r=!1,g=(i=i[0].match(this.rules.item)).length,p=0;p<g;p++)d=(l=i[p]).length,~(l=l.replace(/^ *([*+-]|\d+\.) */,"")).indexOf("\n ")&&(d-=l.length,l=this.options.pedantic?l.replace(/^ {1,4}/gm,""):l.replace(new RegExp("^ {1,"+d+"}","gm"),"")),p!==g-1&&(a=n.bullet.exec(i[p+1])[0],(s.length>1?1===a.length:a.length>1||this.options.smartLists&&a!==s)&&(e=i.slice(p+1).join("\n")+e,p=g-1)),o=r||/\n\n(?!\s*$)/.test(l),p!==g-1&&(r="\n"===l.charAt(l.length-1),o||(o=r)),o&&(u.loose=!0),w=void 0,(v=/^\[[ xX]\] /.test(l))&&(w=" "!==l[1],l=l.replace(/^\[[ xX]\] +/,"")),f={type:"list_item_start",task:v,checked:w,loose:o},c.push(f),this.tokens.push(f),this.token(l,!1),this.tokens.push({type:"list_item_end"});if(u.loose)for(g=c.length,p=0;p<g;p++)c[p].loose=!0;this.tokens.push({type:"list_end"})}else if(i=this.rules.html.exec(e))e=e.substring(i[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===i[1]||"script"===i[1]||"style"===i[1]),text:i[0]});else if(t&&(i=this.rules.def.exec(e)))e=e.substring(i[0].length),i[3]&&(i[3]=i[3].substring(1,i[3].length-1)),h=i[1].toLowerCase().replace(/\s+/g," "),this.tokens.links[h]||(this.tokens.links[h]={href:i[2],title:i[3]});else if((i=this.rules.table.exec(e))&&(l={type:"table",header:b(i[1].replace(/^ *| *\| *$/g,"")),align:i[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:i[3]?i[3].replace(/\n$/,"").split("\n"):[]}).header.length===l.align.length){for(e=e.substring(i[0].length),p=0;p<l.align.length;p++)/^ *-+: *$/.test(l.align[p])?l.align[p]="right":/^ *:-+: *$/.test(l.align[p])?l.align[p]="center":/^ *:-+ *$/.test(l.align[p])?l.align[p]="left":l.align[p]=null;for(p=0;p<l.cells.length;p++)l.cells[p]=b(l.cells[p].replace(/^ *\| *| *\| *$/g,""),l.header.length);this.tokens.push(l)}else if(i=this.rules.lheading.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"heading",depth:"="===i[2]?1:2,text:i[1]});else if(t&&(i=this.rules.paragraph.exec(e)))e=e.substring(i[0].length),this.tokens.push({type:"paragraph",text:"\n"===i[1].charAt(i[1].length-1)?i[1].slice(0,-1):i[1]});else if(i=this.rules.text.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"text",text:i[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var o={escape:/^\\([!"#$%&'()*+,\-.\/:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:m,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(href(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s_])__(?!_)|^\*\*([^\s*])\*\*(?!\*)|^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)/,em:/^_([^\s_])_(?!_)|^\*([^\s*"<\[])\*(?!\*)|^_([^\s][\s\S]*?[^\s_])_(?!_|[^\spunctuation])|^_([^\s_][\s\S]*?[^\s])_(?!_|[^\spunctuation])|^\*([^\s"<\[][\s\S]*?[^\s*])\*(?!\*)|^\*([^\s*"<\[][\s\S]*?[^\s])\*(?!\*)/,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:m,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n))|(?= {2,}\n))/};function i(e,t){if(this.options=t||_.defaults,this.links=e,this.rules=o.normal,this.renderer=this.options.renderer||new s,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.pedantic?this.rules=o.pedantic:this.options.gfm&&(this.options.breaks?this.rules=o.breaks:this.rules=o.gfm)}function s(e){this.options=e||_.defaults}function a(){}function l(e){this.tokens=[],this.token=null,this.options=e||_.defaults,this.options.renderer=this.options.renderer||new s,this.renderer=this.options.renderer,this.renderer.options=this.options,this.slugger=new u}function u(){this.seen={}}function c(e,t){if(t){if(c.escapeTest.test(e))return e.replace(c.escapeReplace,function(e){return c.replacements[e]})}else if(c.escapeTestNoEncode.test(e))return e.replace(c.escapeReplaceNoEncode,function(e){return c.replacements[e]});return e}function f(e){return e.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""})}function d(e,t){return e=e.source||e,t=t||"",{replace:function(t,n){return n=(n=n.source||n).replace(/(^|[^\[])\^/g,"$1"),e=e.replace(t,n),this},getRegex:function(){return new RegExp(e,t)}}}function p(e,t,n){if(e){try{var r=decodeURIComponent(f(n)).replace(/[^\w:]/g,"").toLowerCase()}catch(e){return null}if(0===r.indexOf("javascript:")||0===r.indexOf("vbscript:")||0===r.indexOf("data:"))return null}t&&!g.test(n)&&(n=function(e,t){h[" "+e]||(/^[^:]+:\/*[^\/]*$/.test(e)?h[" "+e]=e+"/":h[" "+e]=y(e,"/",!0));return e=h[" "+e],"//"===t.slice(0,2)?e.replace(/:[\s\S]*/,":")+t:"/"===t.charAt(0)?e.replace(/(:\/*[^\/]*)[\s\S]*/,"$1")+t:e+t}(t,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(e){return null}return n}o._punctuation="!\"#$%&'()*+,\\-./:;<=>?@\\[^_{|}~",o.em=d(o.em).replace(/punctuation/g,o._punctuation).getRegex(),o._escapes=/\\([!"#$%&'()*+,\-.\/:;<=>?@\[\]\\^_`{|}~])/g,o._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,o._email=/[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,o.autolink=d(o.autolink).replace("scheme",o._scheme).replace("email",o._email).getRegex(),o._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,o.tag=d(o.tag).replace("comment",n._comment).replace("attribute",o._attribute).getRegex(),o._label=/(?:\[[^\[\]]*\]|\\[\[\]]?|`[^`]*`|`(?!`)|[^\[\]\\`])*?/,o._href=/\s*(<(?:\\[<>]?|[^\s<>\\])*>|[^\s\x00-\x1f]*)/,o._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,o.link=d(o.link).replace("label",o._label).replace("href",o._href).replace("title",o._title).getRegex(),o.reflink=d(o.reflink).replace("label",o._label).getRegex(),o.normal=v({},o),o.pedantic=v({},o.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:d(/^!?\[(label)\]\((.*?)\)/).replace("label",o._label).getRegex(),reflink:d(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",o._label).getRegex()}),o.gfm=v({},o.normal,{escape:d(o.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\S)([\s\S]*?\S)~+/,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?= {2,}\n|[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),o.gfm.url=d(o.gfm.url,"i").replace("email",o.gfm._extended_email).getRegex(),o.breaks=v({},o.gfm,{br:d(o.br).replace("{2,}","*").getRegex(),text:d(o.gfm.text).replace(/\{2,\}/g,"*").getRegex()}),i.rules=o,i.output=function(e,t,n){return new i(t,n).output(e)},i.prototype.output=function(e){for(var t,n,r,o,s,a,l="";e;)if(s=this.rules.escape.exec(e))e=e.substring(s[0].length),l+=c(s[1]);else if(s=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(s[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(s[0])&&(this.inLink=!1),!this.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(s[0])?this.inRawBlock=!0:this.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(s[0])&&(this.inRawBlock=!1),e=e.substring(s[0].length),l+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(s[0]):c(s[0]):s[0];else if(s=this.rules.link.exec(e)){var u=w(s[2],"()");if(u>-1){var f=s[0].length-(s[2].length-u)-(s[3]||"").length;s[2]=s[2].substring(0,u),s[0]=s[0].substring(0,f).trim(),s[3]=""}e=e.substring(s[0].length),this.inLink=!0,r=s[2],this.options.pedantic?(t=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r))?(r=t[1],o=t[3]):o="":o=s[3]?s[3].slice(1,-1):"",r=r.trim().replace(/^<([\s\S]*)>$/,"$1"),l+=this.outputLink(s,{href:i.escapes(r),title:i.escapes(o)}),this.inLink=!1}else if((s=this.rules.reflink.exec(e))||(s=this.rules.nolink.exec(e))){if(e=e.substring(s[0].length),t=(s[2]||s[1]).replace(/\s+/g," "),!(t=this.links[t.toLowerCase()])||!t.href){l+=s[0].charAt(0),e=s[0].substring(1)+e;continue}this.inLink=!0,l+=this.outputLink(s,t),this.inLink=!1}else if(s=this.rules.strong.exec(e))e=e.substring(s[0].length),l+=this.renderer.strong(this.output(s[4]||s[3]||s[2]||s[1]));else if(s=this.rules.em.exec(e))e=e.substring(s[0].length),l+=this.renderer.em(this.output(s[6]||s[5]||s[4]||s[3]||s[2]||s[1]));else if(s=this.rules.code.exec(e))e=e.substring(s[0].length),l+=this.renderer.codespan(c(s[2].trim(),!0));else if(s=this.rules.br.exec(e))e=e.substring(s[0].length),l+=this.renderer.br();else if(s=this.rules.del.exec(e))e=e.substring(s[0].length),l+=this.renderer.del(this.output(s[1]));else if(s=this.rules.autolink.exec(e))e=e.substring(s[0].length),r="@"===s[2]?"mailto:"+(n=c(this.mangle(s[1]))):n=c(s[1]),l+=this.renderer.link(r,null,n);else if(this.inLink||!(s=this.rules.url.exec(e))){if(s=this.rules.text.exec(e))e=e.substring(s[0].length),this.inRawBlock?l+=this.renderer.text(s[0]):l+=this.renderer.text(c(this.smartypants(s[0])));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}else{if("@"===s[2])r="mailto:"+(n=c(s[0]));else{do{a=s[0],s[0]=this.rules._backpedal.exec(s[0])[0]}while(a!==s[0]);n=c(s[0]),r="www."===s[1]?"http://"+n:n}e=e.substring(s[0].length),l+=this.renderer.link(r,null,n)}return l},i.escapes=function(e){return e?e.replace(i.rules._escapes,"$1"):e},i.prototype.outputLink=function(e,t){var n=t.href,r=t.title?c(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(n,r,this.output(e[1])):this.renderer.image(n,r,c(e[1]))},i.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014\/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014\/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):e},i.prototype.mangle=function(e){if(!this.options.mangle)return e;for(var t,n="",r=e.length,o=0;o<r;o++)t=e.charCodeAt(o),Math.random()>.5&&(t="x"+t.toString(16)),n+="&#"+t+";";return n},s.prototype.code=function(e,t,n){var r=(t||"").match(/\S*/)[0];if(this.options.highlight){var o=this.options.highlight(e,r);null!=o&&o!==e&&(n=!0,e=o)}return r?'<pre><code class="'+this.options.langPrefix+c(r,!0)+'">'+(n?e:c(e,!0))+"</code></pre>\n":"<pre><code>"+(n?e:c(e,!0))+"</code></pre>"},s.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},s.prototype.html=function(e){return e},s.prototype.heading=function(e,t,n,r){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+r.slug(n)+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"},s.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},s.prototype.list=function(e,t,n){var r=t?"ol":"ul";return"<"+r+(t&&1!==n?' start="'+n+'"':"")+">\n"+e+"</"+r+">\n"},s.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},s.prototype.checkbox=function(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},s.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},s.prototype.table=function(e,t){return t&&(t="<tbody>"+t+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"},s.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},s.prototype.tablecell=function(e,t){var n=t.header?"th":"td";return(t.align?"<"+n+' align="'+t.align+'">':"<"+n+">")+e+"</"+n+">\n"},s.prototype.strong=function(e){return"<strong>"+e+"</strong>"},s.prototype.em=function(e){return"<em>"+e+"</em>"},s.prototype.codespan=function(e){return"<code>"+e+"</code>"},s.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},s.prototype.del=function(e){return"<del>"+e+"</del>"},s.prototype.link=function(e,t,n){if(null===(e=p(this.options.sanitize,this.options.baseUrl,e)))return n;var r='<a href="'+c(e)+'"';return t&&(r+=' title="'+t+'"'),r+=">"+n+"</a>"},s.prototype.image=function(e,t,n){if(null===(e=p(this.options.sanitize,this.options.baseUrl,e)))return n;var r='<img src="'+e+'" alt="'+n+'"';return t&&(r+=' title="'+t+'"'),r+=this.options.xhtml?"/>":">"},s.prototype.text=function(e){return e},a.prototype.strong=a.prototype.em=a.prototype.codespan=a.prototype.del=a.prototype.text=function(e){return e},a.prototype.link=a.prototype.image=function(e,t,n){return""+n},a.prototype.br=function(){return""},l.parse=function(e,t){return new l(t).parse(e)},l.prototype.parse=function(e){this.inline=new i(e.links,this.options),this.inlineText=new i(e.links,v({},this.options,{renderer:new a})),this.tokens=e.reverse();for(var t="";this.next();)t+=this.tok();return t},l.prototype.next=function(){return this.token=this.tokens.pop()},l.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},l.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},l.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,f(this.inlineText.output(this.token.text)),this.slugger);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var e,t,n,r,o="",i="";for(n="",e=0;e<this.token.header.length;e++)n+=this.renderer.tablecell(this.inline.output(this.token.header[e]),{header:!0,align:this.token.align[e]});for(o+=this.renderer.tablerow(n),e=0;e<this.token.cells.length;e++){for(t=this.token.cells[e],n="",r=0;r<t.length;r++)n+=this.renderer.tablecell(this.inline.output(t[r]),{header:!1,align:this.token.align[r]});i+=this.renderer.tablerow(n)}return this.renderer.table(o,i);case"blockquote_start":for(i="";"blockquote_end"!==this.next().type;)i+=this.tok();return this.renderer.blockquote(i);case"list_start":i="";for(var s=this.token.ordered,a=this.token.start;"list_end"!==this.next().type;)i+=this.tok();return this.renderer.list(i,s,a);case"list_item_start":i="";var l=this.token.loose,u=this.token.checked,c=this.token.task;for(this.token.task&&(i+=this.renderer.checkbox(u));"list_item_end"!==this.next().type;)i+=l||"text"!==this.token.type?this.tok():this.parseText();return this.renderer.listitem(i,c,u);case"html":return this.renderer.html(this.token.text);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText());default:var d='Token with "'+this.token.type+'" type was not found.';if(!this.options.silent)throw new Error(d);console.log(d)}},u.prototype.slug=function(e){var t=e.toLowerCase().trim().replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,.\/:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-");if(this.seen.hasOwnProperty(t)){var n=t;do{this.seen[n]++,t=n+"-"+this.seen[n]}while(this.seen.hasOwnProperty(t))}return this.seen[t]=0,t},c.escapeTest=/[&<>"']/,c.escapeReplace=/[&<>"']/g,c.replacements={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},c.escapeTestNoEncode=/[<>"']|&(?!#?\w+;)/,c.escapeReplaceNoEncode=/[<>"']|&(?!#?\w+;)/g;var h={},g=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function m(){}function v(e){for(var t,n,r=1;r<arguments.length;r++)for(n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function b(e,t){var n=e.replace(/\|/g,function(e,t,n){for(var r=!1,o=t;--o>=0&&"\\"===n[o];)r=!r;return r?"|":" |"}).split(/ \|/),r=0;if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\|/g,"|");return n}function y(e,t,n){if(0===e.length)return"";for(var r=0;r<e.length;){var o=e.charAt(e.length-r-1);if(o!==t||n){if(o===t||!n)break;r++}else r++}return e.substr(0,e.length-r)}function w(e,t){if(-1===e.indexOf(t[1]))return-1;for(var n=0,r=0;r<e.length;r++)if("\\"===e[r])r++;else if(e[r]===t[0])n++;else if(e[r]===t[1]&&--n<0)return r;return-1}function _(e,t,n){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if(n||"function"==typeof t){n||(n=t,t=null);var o,i,s=(t=v({},_.defaults,t||{})).highlight,a=0;try{o=r.lex(e,t)}catch(e){return n(e)}i=o.length;var u=function(e){if(e)return t.highlight=s,n(e);var r;try{r=l.parse(o,t)}catch(t){e=t}return t.highlight=s,e?n(e):n(null,r)};if(!s||s.length<3)return u();if(delete t.highlight,!i)return u();for(;a<o.length;a++)!function(e){"code"!==e.type?--i||u():s(e.text,e.lang,function(t,n){return t?u(t):null==n||n===e.text?--i||u():(e.text=n,e.escaped=!0,void(--i||u()))})}(o[a])}else try{return t&&(t=v({},_.defaults,t)),l.parse(r.lex(e,t),t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",(t||_.defaults).silent)return"<p>An error occurred:</p><pre>"+c(e.message+"",!0)+"</pre>";throw e}}m.exec=m,_.options=_.setOptions=function(e){return v(_.defaults,e),_},_.getDefaults=function(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:new s,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tables:!0,xhtml:!1}},_.defaults=_.getDefaults(),_.Parser=l,_.parser=l.parse,_.Renderer=s,_.TextRenderer=a,_.Lexer=r,_.lexer=r.lex,_.InlineLexer=i,_.inlineLexer=i.output,_.Slugger=u,_.parse=_,e.exports=_}(this||"undefined"!=typeof window&&window)}).call(this,n(16))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaults=void 0,t.init=function(){(p=document.createElement("div")).setAttribute("hidden",!0),p.dataset.cbSounds="",document.body.appendChild(p),i.default.on("state-change",function(e){var t=e.name,n=e.value,o=(0,a.sameObject)(t,"sound.ambient"),i=(0,a.sameObject)(t,"sound.effect");if(o){var s=(0,a.get)("sound.ambient");s&&Object.keys(s).forEach(function(e){s[e].url&&h(e,s[e].url,!1),s[e].volume&&v(e,s[e].volume),void 0!==s[e].muted&&b(e,s[e].muted),s[e].playing&&g(e,!0).catch(function(t){return f('Could not resume playing ambient sound "'+e+'" ('+t.message+")")})})}if(i){var l=(0,a.get)("sound.effect");l&&Object.keys(l).forEach(function(e){l[e].url&&h(e,l[e].url,!0),l[e].volume&&v(e,l[e].volume),void 0!==l[e].muted&&b(e,l[e].muted),l[e].playing&&g(e,!1).then(function(){return(0,a.set)("sound.effect."+e+".playing",!1)}).catch(function(t){return f('Could not resume playing sound effect "'+e+'" ('+t.message)})})}if(!o&&!i){var u=/^sound\.(ambient|effect)\.(.+?)\.(.+)$/i.exec(t);if(u)switch(u[3].toLowerCase()){case"playing":n?"ambient"===u[1]?g(u[2],!0,(0,r.default)((0,a.get)(u[2]+".transitionDuration")||(0,a.get)("sound.transitionDuration")||"0s","ms")):g(u[2],!1).then(function(){return(0,a.set)(t,!1)}):"ambient"===u[1]?m(u[2],(0,r.default)((0,a.get)(u[2]+".transitionDuration")||(0,a.get)("sound.transitionDuration")||"0s","ms")):m(u[2]);break;case"url":h(u[2],n,"effect"===u[1]);break;case"volume":v(u[2],n)}}})};var r=l(n(13)),o=l(n(4)),i=l(n(1)),s=l(n(99)),a=n(0);function l(e){return e&&e.__esModule?e:{default:e}}var u=(0,o.default)("sound"),c=u.log,f=u.warn,d={},p=void 0;t.defaults={"sound.mute":!1,"sound.volume":1,"sound.transitionDuration":"1s"};function h(e,t,n){d[e]?(d[e].setAttribute("src",t),n?d[e].setAttribute("preload","auto"):d[e].removeAttribute("preload"),c('Updated <audio> element in sound bank for "'+e+'" to use '+t)):(d[e]=document.createElement("audio"),d[e].setAttribute("src",t),n&&d[e].setAttribute("preload","auto"),p.appendChild(d[e]),c('Added new <audio> element to sound bank for "'+e+'" for '+t))}function g(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!d[e])throw new Error("There is no sound loaded named "+e+".");return c('Playing sound "'+e+'" (looping: '+t+")"),n>0&&(d[e].volume=0,(0,s.default)(d[e],1,n)),t?(d[e].loop=!0,d[e].play()):(d[e].loop=!1,new Promise(function(t,n){try{d[e].addEventListener("ended",function n(){d[e].removeEventListener("ended",n),t()}),d[e].play().catch(function(e){return n(e)})}catch(e){n(e)}}))}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!d[e])throw new Error("There is no sound loaded named "+e+".");if(t<=0)d[e].pause(),d[e].currentTime=0;else{var n=d[e].volume;(0,s.default)(d[e],0,t).then(function(){d[e].pause(),d[e].volume=n,d[e].currentTime=0})}}function v(e,t){if(!d[e])throw new Error("There is no sound loaded named "+e+".");if(t<0||t>1)throw new Error("A sound volume must be between 0 and 1.");d[e].volume=t}function b(e,t){if(!d[e])throw new Error("There is no sound loaded named "+e+".");d[e].muted=t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaults=void 0,t.default=function(e){e("random.coinFlip",function(){var e=l();return(0,o.default)(u),e>.5}),e("random.fraction",function(){var e=l();return(0,o.default)(u),e}),[4,5,6,8,10,12,20,25,50,100,1e3].forEach(function(t){e("random.d"+t,function(){var e=1+Math.round(l()*(t-1));return(0,o.default)(u),e})})};var r=a(n(106)),o=a(n(20)),i=a(n(1)),s=n(0);n(6);function a(e){return e&&e.__esModule?e:{default:e}}t.defaults={"config.random.seed":function(){return new Date},"config.random.privateState":null};var l=(0,r.default)(new Date,{state:!0});function u(){(0,s.set)("config.random.privateState",l.state())}i.default.on("state-change",function(e){var t=e.name,n=e.value;"config.random.seed"===t&&(l=(0,r.default)(n,{state:!0}))})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaults=void 0,t.style=d,t.init=function(){(0,s.init)(),f.dataset.cbAuthorStyles="",document.head.appendChild(f),o.default.on("state-change",function(e){var t=e.name,n=e.value;if((0,i.sameObject)(t,"config.style.backdrop")&&(u("Setting backdrop color"),d("#backdrop",{"background-color":(0,a.parseColor)((0,i.get)("config.style.backdrop")).color})),(0,i.sameObject)(t,"config.style.page.fork.divider.color")&&(u("Setting fork divider color"),d("#page .fork p a + a",{"border-top-color":(0,a.parseColor)((0,i.get)("config.style.page.fork.divider.color")).color})),(0,i.sameObject)(t,"config.style.page.fork.divider.size")&&(u("Setting fork divider size"),d("#page .fork p a + a",{"border-top-width":(0,i.get)("config.style.page.fork.divider.size")+"px"})),(0,i.sameObject)(t,"config.style.page.fork.divider.style")&&(u("Setting fork divider style"),d("#page .fork p a + a",{"border-top-style":(0,i.get)("config.style.page.fork.divider.style")})),(0,i.sameObject)(t,"config.style.page.style")||(0,i.sameObject)(t,"config.style.page.style.borderColor"))switch(u("Setting page style"),(0,i.get)("config.style.page.style")){case"none":d("#page",{border:"none","box-shadow":"none"});break;case"shadow":d("#page",{border:"none","box-shadow":"0 4px 8px hsla(0, 0%, 0%, 0.25)"});break;case"thick-line":d("#page",{border:"4px solid "+(0,a.parseColor)((0,i.get)("config.style.page.style.borderColor")).color,"box-shadow":"none"});break;case"thin-line":d("#page",{border:"1px solid "+(0,a.parseColor)((0,i.get)("config.style.page.style.borderColor")).color,"box-shadow":"none"})}if((0,i.sameObject)(t,"config.style.page.verticalAlign"))switch(u("Setting page vertical alignment"),(0,i.get)("config.style.page.verticalAlign")){case"top":d("#page article",{"align-items":"flex-start"});break;case"center":d("#page article",{"align-items":"center"});break;case"bottom":d("#page article",{"align-items":"flex-end"})}if(/^config\.style\.page\..*\.((line)?color|font)$/i.test(t)&&p(t,n),(0,i.sameObject)(t,"config.style.page")){["config.style.page","config.style.page.header","config.style.page.footer"].forEach(function(e){var t=(0,i.get)(e);t&&function(e,t){["color","font","lineColor"].forEach(function(n){t[n]&&p(e+"."+n,t[n]),t.link&&(t.link[n]&&p(e+".link."+n,t.link[n]),t.link.active&&t.link.active[n]&&p(e+".link.active."+n,t.link.active[n]))})}(e,t)})}})};var r=l(n(4)),o=l(n(1)),i=n(0),s=n(117),a=n(118);function l(e){return e&&e.__esModule?e:{default:e}}var u=(0,r.default)("style").log,c=(t.defaults={"config.style.backdrop":"gray-0","config.style.page.style":"shadow","config.style.page.style.borderColor":"gray-2","config.style.page.font":"Iowan Old Style/Constantia/Georgia/serif 18","config.style.page.color":"gray-9 on white","config.style.page.fork.divider.color":"gray-3","config.style.page.fork.divider.style":"dashed","config.style.page.fork.divider.size":1,"config.style.page.link.color":"gray-9","config.style.page.link.lineColor":"red-8","config.style.page.link.font":"underline","config.style.page.link.active.color":"red-8 on red-0","config.style.page.verticalAlign":"center","config.style.page.header.font":"16","config.style.page.header.link.font":"small caps","config.style.page.footer.font":"16","config.style.page.footer.link.font":"small caps"},{}),f=document.createElement("style");function d(e,t){c[e]=c[e]||{},Object.assign(c[e],t),function(){f.innerHTML=Object.keys(c).reduce(function(e,t){return e+(n=t,r=c[t],n+"{"+Object.keys(r).sort().reduce(function(e,t){return r[t]?e+t+":"+r[t].toString()+";":e},"")+"}");var n,r},"")}()}function p(e,t){var n="#page",r=e.replace(/^config\.style\.page\./i,"").split(".");switch("header"===r[0].toLowerCase()?(n+=" header",r.shift()):"footer"===r[0].toLowerCase()&&(n+=" footer",r.shift()),"link"===r[0].toLowerCase()&&(n+=" a",r.shift()),"active"===r[0].toLowerCase()&&(n=n+":hover, "+n+":active",r.shift()),r[0].toLowerCase()){case"color":u("Setting color for "+n),d(n,(0,a.parseColor)(t));break;case"linecolor":u("Setting line color for "+n);var o=(0,a.parseColor)(t).color;d(n,{"text-decoration-color":o,"-webkit-text-decoration-color":o});break;case"font":u("Setting font for "+n),d(n,(0,a.parseFont)(t))}}},function(e,t){var n=/-?\d+(\.\d+)?%?/g;e.exports=function(e){return e.match(n)}},function(e,t){e.exports=function(e,t,n){return Math.min(Math.max(e,t),n)}},function(e,t,n){"use strict";var r=n(29),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(44)),i=p(n(59)),s=n(0),a=n(23),l=p(n(100)),u=p(n(116)),c=n(12),f=n(6),d=n(25);function p(e){return e&&e.__esModule?e:{default:e}}n(126),(0,f.loadFromData)(document.querySelector("tw-storydata")),(0,i.default)(),(0,s.init)(),Object.assign(window,{go:r.go,restart:r.restart}),(0,d.init)(),(0,u.default)(),(0,l.default)(),(0,c.init)(),(0,a.init)(),(0,f.init)(),o&&(0,s.get)("config.testing")&&o.init(),!(0,s.get)("config.testing")&&(0,s.canRestoreFromStorage)()&&(0,s.restoreFromStorage)(),(0,f.addCustomStyles)(),(0,f.runCustomScripts)()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.go=f,t.restart=d;var r,o=n(1),i=(r=o)&&r.__esModule?r:{default:r},s=n(0),a=n(4),l=n(6),u=n(43);function c(e){(0,a.log)("actions",e)}function f(e){c('Going to passage "'+e+'"');var t=(0,l.passageNamed)(e);if(!t)throw new Error('There is no passage with the name "'+e+'"');(0,u.transferToState)(),(0,s.set)("trail",(0,s.get)("trail").concat(t.name))}function d(){c("Restarting"),(0,s.reset)(),window.location.reload()}i.default.on("dom-click",function(e){e.dataset.cbGo&&(0,u.validate)().then(function(){return f(e.dataset.cbGo)})}),i.default.on("dom-click",function(e){e.dataset.cbRestart&&d()})},function(e,t,n){var r=n(31),o=n(32),i=n(14);function s(e){if(!(this instanceof s))return new s(e);this._name=e||"nanobus",this._starListeners=[],this._listeners={}}e.exports=s,s.prototype.emit=function(e){i.ok("string"==typeof e||"symbol"==typeof e,"nanobus.emit: eventName should be type string or symbol");for(var t=[],n=1,r=arguments.length;n<r;n++)t.push(arguments[n]);var s=o(this._name+"('"+e.toString()+"')"),a=this._listeners[e];return a&&a.length>0&&this._emit(this._listeners[e],t),this._starListeners.length>0&&this._emit(this._starListeners,e,t,s.uuid),s(),this},s.prototype.on=s.prototype.addListener=function(e,t){return i.ok("string"==typeof e||"symbol"==typeof e,"nanobus.on: eventName should be type string or symbol"),i.equal(typeof t,"function","nanobus.on: listener should be type function"),"*"===e?this._starListeners.push(t):(this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t)),this},s.prototype.prependListener=function(e,t){return i.ok("string"==typeof e||"symbol"==typeof e,"nanobus.prependListener: eventName should be type string or symbol"),i.equal(typeof t,"function","nanobus.prependListener: listener should be type function"),"*"===e?this._starListeners.unshift(t):(this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].unshift(t)),this},s.prototype.once=function(e,t){i.ok("string"==typeof e||"symbol"==typeof e,"nanobus.once: eventName should be type string or symbol"),i.equal(typeof t,"function","nanobus.once: listener should be type function");var n=this;return this.on(e,function r(){t.apply(n,arguments);n.removeListener(e,r)}),this},s.prototype.prependOnceListener=function(e,t){i.ok("string"==typeof e||"symbol"==typeof e,"nanobus.prependOnceListener: eventName should be type string or symbol"),i.equal(typeof t,"function","nanobus.prependOnceListener: listener should be type function");var n=this;return this.prependListener(e,function r(){t.apply(n,arguments);n.removeListener(e,r)}),this},s.prototype.removeListener=function(e,t){return i.ok("string"==typeof e||"symbol"==typeof e,"nanobus.removeListener: eventName should be type string or symbol"),i.equal(typeof t,"function","nanobus.removeListener: listener should be type function"),"*"===e?(this._starListeners=this._starListeners.slice(),n(this._starListeners,t)):(void 0!==this._listeners[e]&&(this._listeners[e]=this._listeners[e].slice()),n(this._listeners[e],t));function n(e,t){if(e){var n=e.indexOf(t);return-1!==n?(r(e,n,1),!0):void 0}}},s.prototype.removeAllListeners=function(e){return e?"*"===e?this._starListeners=[]:this._listeners[e]=[]:(this._starListeners=[],this._listeners={}),this},s.prototype.listeners=function(e){var t="*"!==e?this._listeners[e]:this._starListeners,n=[];if(t)for(var r=t.length,o=0;o<r;o++)n.push(t[o]);return n},s.prototype._emit=function(e,t,n,r){if(void 0!==e&&0!==e.length){void 0===n&&(n=t,t=null),t&&(n=void 0!==r?[t].concat(n,r):[t].concat(n));for(var o=e.length,i=0;i<o;i++){var s=e[i];s.apply(s,n)}}}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r,o=e.length;if(!(t>=o||0===n)){var i=o-(n=t+n>o?o-t:n);for(r=t;r<i;++r)e[r]=e[r+n];e.length=i}}},function(e,t,n){var r,o=n(33)(),i=n(14);s.disabled=!0;try{r=window.performance,s.disabled="true"===window.localStorage.DISABLE_NANOTIMING||!r.mark}catch(e){}function s(e){if(i.equal(typeof e,"string","nanotiming: name should be type string"),s.disabled)return a;var t=(1e4*r.now()).toFixed()%Number.MAX_SAFE_INTEGER,n="start-"+t+"-"+e;function l(i){var s="end-"+t+"-"+e;r.mark(s),o.push(function(){var o=null;try{var a=e+" ["+t+"]";r.measure(a,n,s),r.clearMarks(n),r.clearMarks(s)}catch(e){o=e}i&&i(o,e)})}return r.mark(n),l.uuid=t,l}function a(e){e&&o.push(function(){e(new Error("nanotiming: performance API unavailable"))})}e.exports=s},function(e,t,n){var r=n(14),o="undefined"!=typeof window;function i(e){this.hasWindow=e,this.hasIdle=this.hasWindow&&window.requestIdleCallback,this.method=this.hasIdle?window.requestIdleCallback.bind(window):this.setTimeout,this.scheduled=!1,this.queue=[]}i.prototype.push=function(e){r.equal(typeof e,"function","nanoscheduler.push: cb should be type function"),this.queue.push(e),this.schedule()},i.prototype.schedule=function(){if(!this.scheduled){this.scheduled=!0;var e=this;this.method(function(t){for(;e.queue.length&&t.timeRemaining()>0;)e.queue.shift()(t);e.scheduled=!1,e.queue.length&&e.schedule()})}},i.prototype.setTimeout=function(e){setTimeout(e,0,{timeRemaining:function(){return 1}})},e.exports=function(){var e;return o?(window._nanoScheduler||(window._nanoScheduler=new i(!0)),e=window._nanoScheduler):e=new i,e}},function(e,t,n){
/*!
 * get-value <https://github.com/jonschlinkert/get-value>
 *
 * Copyright (c) 2014-2018, Jon Schlinkert.
 * Released under the MIT License.
 */
const r=n(15);function o(e,t,n){return"function"==typeof n.join?n.join(e):e[0]+t+e[1]}function i(e,t,n){return"function"!=typeof n.isValid||n.isValid(e,t)}function s(e){return r(e)||Array.isArray(e)||"function"==typeof e}e.exports=function(e,t,n){if(r(n)||(n={default:n}),!s(e))return void 0!==n.default?n.default:e;"number"==typeof t&&(t=String(t));const a=Array.isArray(t),l="string"==typeof t,u=n.separator||".",c=n.joinChar||("string"==typeof u?u:".");if(!l&&!a)return e;if(l&&t in e)return i(t,e,n)?e[t]:n.default;let f=a?t:function(e,t,n){if("function"==typeof n.split)return n.split(e);return e.split(t)}(t,u,n),d=f.length,p=0;do{let t=f[p];for("number"==typeof t&&(t=String(t));t&&"\\"===t.slice(-1);)t=o([t.slice(0,-1),f[++p]||""],c,n);if(t in e){if(!i(t,e,n))return n.default;e=e[t]}else{let r=!1,s=p+1;for(;s<d;)if(r=(t=o([t,f[s++]],c,n))in e){if(!i(t,e,n))return n.default;e=e[t],p=s-1;break}if(!r)return n.default}}while(++p<d&&s(e));return p===d?e:n.default}},function(e,t,n){"use strict";
/*!
 * set-value <https://github.com/jonschlinkert/set-value>
 *
 * Copyright (c) 2014-2018, Jon Schlinkert.
 * Released under the MIT License.
 */const r=n(36);function o(e,t,n,r){if(!s(e))return e;let a=r||{};const l=Array.isArray(t);if(!l&&"string"!=typeof t)return e;let u=a.merge;u&&"function"!=typeof u&&(u=Object.assign);const c=l?t:function(e,t){const n=function(e,t){let n=e;if(void 0===t)return n+"";const r=Object.keys(t);for(let e=0;e<r.length;e++){const o=r[e];n+=";"+o+"="+String(t[o])}return n}(e,t);if(o.memo[n])return o.memo[n];const r=t&&t.separator?t.separator:".";let i=[],s=[];i=t&&"function"==typeof t.split?t.split(e):e.split(r);for(let e=0;e<i.length;e++){let t=i[e];for(;t&&"\\"===t.slice(-1)&&i[e+1];)t=t.slice(0,-1)+r+i[++e];s.push(t)}return o.memo[n]=s,s}(t,a),f=c.length,d=e;if(!r&&1===c.length)return i(e,c[0],n,u),e;for(let t=0;t<f;t++){let r=c[t];if(s(e[r])||(e[r]={}),t===f-1){i(e,r,n,u);break}e=e[r]}return d}function i(e,t,n,o){o&&r(e[t])&&r(n)?e[t]=o({},e[t],n):e[t]=n}function s(e){switch(typeof e){case"null":return!1;case"object":case"function":return!0;default:return!1}}o.memo={},e.exports=o},function(e,t,n){"use strict";
/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var r=n(15);function o(e){return!0===r(e)&&"[object Object]"===Object.prototype.toString.call(e)}e.exports=function(e){var t,n;return!1!==o(e)&&("function"==typeof(t=e.constructor)&&(!1!==o(n=t.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf")))}},function(e,t,n){"use strict";
/*!
 * unset-value <https://github.com/jonschlinkert/unset-value>
 *
 * Copyright (c) 2015, 2017, Jon Schlinkert.
 * Released under the MIT License.
 */var r=n(15),o=n(38);e.exports=function(e,t){if(!r(e))throw new TypeError("expected an object.");if(e.hasOwnProperty(t))return delete e[t],!0;if(o(e,t)){for(var n=t.split("."),i=n.pop();n.length&&"\\"===n[n.length-1].slice(-1);)i=n.pop().slice(0,-1)+"."+i;for(;n.length;)e=e[t=n.shift()];return delete e[i]}return!0}},function(e,t,n){"use strict";
/*!
 * has-value <https://github.com/jonschlinkert/has-value>
 *
 * Copyright (c) 2014-2016, Jon Schlinkert.
 * Licensed under the MIT License.
 */var r=n(39),o=n(41),i=n(42);e.exports=function(e,t,n){return r(e)?o(i(e,t),n):o(e,t)}},function(e,t,n){"use strict";
/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var r=n(40);e.exports=function(e){return null!=e&&"object"==typeof e&&!1===r(e)}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){"use strict";
/*!
 * has-values <https://github.com/jonschlinkert/has-values>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */e.exports=function(e,t){if(null==e)return!1;if("boolean"==typeof e)return!0;if("number"==typeof e)return 0!==e||!0!==t;if(void 0!==e.length)return 0!==e.length;for(var n in e)if(e.hasOwnProperty(n))return!0;return!1}},function(e,t){function n(e){return e?Array.isArray(e)?e.join("."):e:""}
/*!
 * get-value <https://github.com/jonschlinkert/get-value>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */
e.exports=function(e,t,r,o,i){if(null===(s=e)||"object"!=typeof s&&"function"!=typeof s||!t)return e;var s;if(t=n(t),r&&(t+="."+n(r)),o&&(t+="."+n(o)),i&&(t+="."+n(i)),t in e)return e[t];for(var a=t.split("."),l=a.length,u=-1;e&&++u<l;){for(var c=a[u];"\\"===c[c.length-1];)c=c.slice(0,-1)+"."+a[++u];e=e[c]}return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validate=function(){var e=document.querySelector("form#cb-validation"),t=(0,r.selectAll)(e,"input, select");return new Promise(function(n,r){var o=function n(){e.removeEventListener("submit",i),t.forEach(function(e){return e.removeEventListener("invalid",n)}),r()},i=function r(){e.removeEventListener("submit",r),t.forEach(function(e){return e.removeEventListener("invalid",o)}),n()};t.forEach(function(e){return e.addEventListener("invalid",o)}),e.addEventListener("submit",i),document.querySelector("button#cb-validation-tester").click()})},t.transferToState=function(){(0,r.selectAll)(document,"[data-cb-set]").forEach(function(e){var t=e.dataset.set;switch(e.nodeName){case"INPUT":(0,o.set)(t,e.value);break;case"SELECT":(0,o.set)(t,e.options[e.selectedIndex].value);break;default:(0,o.set)(t,e.textContent)}})};var r=n(7),o=n(0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Backstage=void 0,t.init=function(){(0,o.init)(),(0,r.render)((0,r.h)(f,null),document.body)};var r=n(2),o=n(18),i=c(n(45)),s=c(n(48)),a=c(n(49)),l=c(n(52)),u=c(n(56));function c(e){return e&&e.__esModule?e:{default:e}}n(58);class f extends r.Component{constructor(e){super(e),this.state={open:!0}}setBodyClass(){this.state.open?document.body.classList.add("backstage-visible"):document.body.classList.remove("backstage-visible")}toggle(){this.setState({open:!this.state.open})}render(){const e=this.state.open?{icon:"→",text:"Close"}:{icon:"←",text:"Open"};return(0,r.h)("div",{id:"backstage",class:this.state.open&&"open"},(0,r.h)("button",{onClick:e=>this.toggle(),title:e.text+" backstage panel",class:"toggle-visibility"},e.icon),(0,r.h)(u.default,null,(0,r.h)(a.default,{label:"State"}),(0,r.h)(i.default,{label:"History"}),(0,r.h)(l.default,{label:"Style"}),(0,r.h)(s.default,{label:"Notes"})))}componentDidMount(){this.setBodyClass()}componentDidUpdate(){this.setBodyClass()}}t.Backstage=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=l(n(10)),i=l(n(1)),s=n(18),a=n(0);function l(e){return e&&e.__esModule?e:{default:e}}function u(e){if(0===e.length)return[];const t=[];let n,r=[];return e.forEach(({change:e},o)=>{"trail"===e.name?(t.push({historyIndex:o-1,passage:n,varChanges:r}),r=[],n=e.value[e.value.length-1]):r.push({name:e.name,value:e.value})}),t.push({historyIndex:e.length-1,passage:n,varChanges:r}),console.log("Parsed",e,t),t}function c({historyIndex:e,passage:t,varChanges:n}){const o=[(0,r.h)("tr",null,(0,r.h)("td",{class:"actions",rowspan:n.length+1},(0,r.h)("button",{onClick:e>=0?()=>(0,s.rewindTo)(e):a.reset},"↪")),(0,r.h)("td",{class:"go",rowspan:n.length+1,colspan:n.length>0?1:2},t?`Go to "${t}"`:"Startup"))];return n.forEach(e=>{o.push((0,r.h)("tr",null,(0,r.h)("td",null,e.name," ← ",JSON.stringify(e.value))))}),o}n(47);t.default=class extends r.Component{constructor(e){super(e),this.state={history:u(s.history)},this.updateBound=(()=>this.update())}update(){this.setState({history:u(s.history)})}render(){let e;return e=this.state.history.length>0?(0,r.h)("table",{class:"history"},this.state.history.map(c)):(0,r.h)("table",{class:"history"},(0,r.h)("tr",null,(0,r.h)("td",{class:"actions"},(0,r.h)("button",{onClick:a.reset},"↪")),(0,r.h)("td",{class:"go"},"Startup"))),(0,r.h)(o.default,{title:"History"},e)}componentDidMount(){i.default.on("backstage-recorder-update",this.updateBound)}componentDidUnmount(){i.default.removeEventListener("backstage-recorder-update",this.updateBound)}}},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l(n(19)),o=n(2),i=l(n(1)),s=n(7),a=n(0);function l(e){return e&&e.__esModule?e:{default:e}}t.default=class extends o.Component{constructor(e){super(e);const t=(0,a.get)("trail");this.state={currentPassage:t[t.length-1],notes:{}},this.restore(),this.syncBound=(e=>this.sync(e))}sync({name:e,value:t}){"trail"===e&&this.setState({currentPassage:t[t.length-1]})}restore(){const e=window.localStorage.getItem(`cb-passage-notes-${(0,a.get)("config.state.saveKey")}`);e&&this.setState({notes:JSON.parse(e)})}save(){window.localStorage.setItem(`cb-passage-notes-${(0,a.get)("config.state.saveKey")}`,JSON.stringify(this.state.notes))}saveNote(e,t){const n=Object.assign({},this.state.notes);n[e]=t,this.setState({notes:n}),this.save()}export(){const e=Object.keys(this.state.notes).reduce((e,t)=>e+`<li class="note"><span class="passage">${(0,r.default)(t)}</span><pre>${(0,r.default)(this.state.notes[t])}</pre></li>`,""),t=document.createElement("a");t.setAttribute("download",`${(0,a.get)("story.name")} Notes - ${(new Date).toDateString()} ${(new Date).toTimeString()}.html`),t.setAttribute("href","data:text/html;base64,"+window.btoa(`<style>body {font-family: sans-serif}</style><h1>Notes for &ldquo;${(0,r.default)((0,a.get)("story.name"))}&rdquo;</h1><ul data-cb-backstage-notes data-cb-version="${(0,a.get)("engine.version")}">${e}</ul>`)),document.body.appendChild(t),t.click(),document.body.removeChild(t)}startImport(){this.upload.click()}import(e){const t=this.upload.files[0];if(!t)return;const n=new FileReader(t);n.onload=(e=>{const t=document.createElement("div"),n=Object.assign({},this.state.notes);let r=0;t.innerHTML=e.target.result;const o=(0,s.selectAll)(t,"ul[data-cb-backstage-notes] li");0!==o.length?(o.forEach(e=>{const t=(0,s.select)(e,"span.passage"),o=(0,s.select)(e,"pre");t&&o&&(n[t.textContent]=(n[t.textContent]||"")+"\n\n"+o.textContent,r++)}),this.setState({notes:n}),this.save(),window.alert(`${r} note(s) were imported.`)):window.alert("No notes were found in this file.")}),n.readAsText(t)}deleteAll(){window.confirm("Are you sure? This will delete all text entered in the Notes panel of Backstage, and cannot be undone.")&&(this.setState({notes:{}}),this.save())}render(){return(0,o.h)("div",null,(0,o.h)("p",null,(0,o.h)("label",null,"Notes on “",this.state.currentPassage,"”")),(0,o.h)("p",null,(0,o.h)("textarea",{value:this.state.notes[this.state.currentPassage],onInput:e=>this.saveNote(this.state.currentPassage,e.target.value)})),(0,o.h)("p",null,(0,o.h)("button",{onClick:()=>this.export()},"Export All Notes"),(0,o.h)("button",{onClick:()=>this.startImport()},"Import Notes From File"),(0,o.h)("button",{onClick:()=>this.deleteAll()},"Delete All Notes")),(0,o.h)("input",{type:"file",hidden:!0,ref:e=>this.upload=e,onChange:()=>this.import()}))}componentDidMount(){i.default.on("state-change",this.syncBound)}componentDidUnmount(){i.default.removeListener("state-change",this.syncBound)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return(0,r.h)("div",null,(0,r.h)(i.default,null),(0,r.h)(o.default,null))};var r=n(2),o=s(n(50)),i=s(n(51));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(2),i=n(0),s=n(10),a=(r=s)&&r.__esModule?r:{default:r};t.default=class extends o.Component{constructor(e){super(e),this.state={snapshots:[]},this.restore()}addSnapshot(){const e=window.prompt("Enter a name for this snapshot:");e&&this.setState({snapshots:this.state.snapshots.concat({name:e,state:(0,i.saveToObject)()})})}loadSnapshot(e){(0,i.restoreFromObject)(this.state.snapshots[e].state)}deleteSnapshot(e){window.confirm(`Are you sure you want to delete the snapshot "${this.state.snapshots[e].name}"? This cannot be undone.`)&&this.setState({snapshots:this.state.snapshots.filter((t,n)=>n!==e)})}save(){window.localStorage.setItem(`cb-snapshots-${(0,i.get)("config.state.saveKey")}`,JSON.stringify(this.state.snapshots))}restore(){const e=window.localStorage.getItem(`cb-snapshots-${(0,i.get)("config.state.saveKey")}`);e&&this.setState({snapshots:JSON.parse(e)})}render(){const e=this.state.snapshots.map((e,t)=>(0,o.h)("div",{class:"segmented-button block"},(0,o.h)("button",{onClick:()=>this.loadSnapshot(t),title:'Load snapshot "{s.name}"'},e.name),(0,o.h)("button",{onClick:()=>this.deleteSnapshot(t),class:"fixed",title:'Delete snapshot "{s.name}"'},(0,o.h)("strong",null,"×"))));return(0,o.h)(a.default,{title:"Snapshots"},e,(0,o.h)("button",{class:"block",onClick:()=>this.addSnapshot()},"Add Snapshot"))}componentDidUpdate(){this.save()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=a(n(10)),i=n(0),s=a(n(1));function a(e){return e&&e.__esModule?e:{default:e}}t.default=class extends r.Component{constructor(e){super(e),this.state={varNames:[],showDefaults:!1},this.syncBound=(()=>this.syncWithState())}syncWithState(){this.setState({varNames:(0,i.varNames)(this.state.showDefaults)})}onChangeDefaults(e){this.setState({showDefaults:e.target.checked})}onChangeVar(e,t){(0,i.set)(t,JSON.parse(e.target.value))}render(){return(0,r.h)(o.default,{title:"Variables"},(0,r.h)("p",null,(0,r.h)("input",{type:"checkbox",id:"cb-backstage-show-defaults",checked:this.state.showDefaults,onChange:e=>this.onChangeDefaults(e)}),(0,r.h)("label",{for:"cb-backstage-show-defaults"},"Show Defaults")),(0,r.h)("table",null,this.state.varNames.map(e=>(0,r.h)("tr",null,(0,r.h)("td",null,e),(0,r.h)("td",null,(0,r.h)("input",{type:"text",value:JSON.stringify((0,i.get)(e)),onChange:t=>this.onChangeVar(t,e)}))))))}componentWillMount(){this.syncWithState(),s.default.on("state-change",this.syncBound)}componentDidUpdate(e,t){t.showDefaults!==this.state.showDefaults&&this.syncWithState()}componentWillUnmount(){s.default.removeListener("state-change",this.syncBound)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return(0,r.h)("div",null,(0,r.h)(o.default,null),(0,r.h)(i.default,{title:"Page",prefix:"page"}),(0,r.h)(i.default,{title:"Header",prefix:"page.header"}),(0,r.h)(i.default,{title:"Footer",prefix:"page.footer"}))};var r=n(2),o=s(n(53)),i=s(n(54));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const e=l.reduce((e,t)=>{const n=(0,i.get)(t);return n?e+`${t}: ${JSON.stringify(n)}\n`:e},"").trim();return(0,o.h)(a.default,{title:"Config"},(0,o.h)("p",null,(0,o.h)("label",{for:"cb-backstage-style-config"},"Enter this code into your first passage’s vars section to permanently use this style:")),(0,o.h)("p",null,(0,o.h)("textarea",{readonly:!0,id:"cb-backstage-style-config",onClick:e=>e.target.select()},e)))};var r,o=n(2),i=n(0),s=n(10),a=(r=s)&&r.__esModule?r:{default:r};const l=["page","page.header","page.footer"].reduce((e,t)=>e.concat([`config.style.${t}.font`,`config.style.${t}.color`,`config.style.${t}.link.font`,`config.style.${t}.link.color`,`config.style.${t}.link.lineColor`,`config.style.${t}.link.active.font`,`config.style.${t}.link.active.color`,`config.style.${t}.link.active.lineColor`]),[])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({title:e,prefix:t}){return(0,r.h)(o.default,{title:e,initiallyOpen:!1},(0,r.h)(i.default,{label:"Font",binding:`config.style.${t}.font`}),(0,r.h)(i.default,{label:"Color",binding:`config.style.${t}.color`}),(0,r.h)(i.default,{label:"Link Font",binding:`config.style.${t}.link.font`}),(0,r.h)(i.default,{label:"Link Color",binding:`config.style.${t}.link.color`}),(0,r.h)(i.default,{label:"Link Line Color",binding:`config.style.${t}.link.lineColor`}),(0,r.h)(i.default,{label:"Active Link Font",binding:`config.style.${t}.link.active.font`}),(0,r.h)(i.default,{label:"Active Link Color",binding:`config.style.${t}.link.active.color`}),(0,r.h)(i.default,{label:"Active Link Line Color",binding:`config.style.${t}.link.active.lineColor`}))};var r=n(2),o=s(n(10)),i=s(n(55));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({label:e,binding:t}){return(0,r.h)("p",{class:"input-group"},(0,r.h)("label",{for:`cb-backstage-${t}`},e),(0,r.h)("input",{type:"text",id:`cb-backstage-${t}`,value:(0,o.get)(t),onChange:e=>(0,o.set)(t,e.target.value)}))};var r=n(2),o=n(0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);n(57);t.default=class extends r.Component{constructor(e){super(e),this.state={selected:0}}select(e){this.setState({selected:e})}render(){const e=this.props.children.map((e,t)=>(0,r.h)("li",null,(0,r.h)("button",{onClick:()=>this.select(t),class:t===this.state.selected&&"active"},e.attributes.label)));return(0,r.h)("div",null,(0,r.h)("ul",{class:"tabs"},e),(0,r.h)("div",{class:"tab-content"},this.props.children[this.state.selected]))}}},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){window.engine={extend:function(e,t){var n=s.get("engine.version"),r=d(e),o=d(n);o[0]<r[0]?f("The current engine version ("+n+") has a lower major version than requested ("+e+"); skipping"):(o[0]>r[0]?f("The current engine version ("+n+") has a higher major version than requested ("+e+"); running code but you may encounter problems"):(o[1]<r[1]&&f("The current engine version ("+n+") has a lower minor version than requested ("+e+"); running code but you may encounter problems"),o[1]===r[1]&&o[2]<r[2]&&f("The current engine version ("+n+") has a lower patch version than requested ("+e+"); running code but you may encounter problems")),t())},event:r.default,log:o.log,render:l.render,state:s,story:a,warn:o.warn}};var r=c(n(1)),o=n(4),i=c(o),s=u(n(0)),a=u(n(6)),l=n(11);function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function c(e){return e&&e.__esModule?e:{default:e}}var f=(0,i.default)("extensibility").warn;function d(e){return e.split(".").map(window.parseInt)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=v(n(61)),o=v(n(62)),i=v(n(63)),s=v(n(73)),a=v(n(74)),l=v(n(75)),u=v(n(76)),c=v(n(77)),f=v(n(78)),d=v(n(79)),p=v(n(80)),h=v(n(81)),g=v(n(82)),m=v(n(83));function v(e){return e&&e.__esModule?e:{default:e}}t.default=[r.default,o.default,i.default,s.default,a.default,l.default,u.default,c.default,f.default,d.default,p.default,h.default,g.default,m.default]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default={match:/^ambient\s+sound/i,render:function(e,t){var n=(0,r.get)("sound.ambient."+e+".description")||"",o=(0,r.get)("sound.ambient");return Object.keys(o).forEach(function(t){t!==e&&o[t].playing&&(0,r.set)("sound.ambient."+t+".playing",!1)}),t.volume&&(0,r.set)("sound.ambient."+e+".volume",t.volume),(0,r.set)("sound.ambient."+e+".playing",!0),"<audio>"+n+"</audio>"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(17),o=n(0);t.default={match:/^back\s+link/i,render:function(e,t){var n=(0,o.get)("trail");return(0,r.renderLink)(n.length>1?n[n.length-2]:n[0],t.label||"Back")}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(12),o=n(0),i=a(n(1)),s=a(n(5));function a(e){return e&&e.__esModule?e:{default:e}}t.default={match:/^cycling\s+link(\s+for)?/i,render:function(e,t){var n=void 0;return e?void 0===(n=(0,o.get)(e))&&((0,o.set)(e,t.choices[0]),n=t.choices[0]):n=t.choices[0],(0,s.default)("a",{href:"javascript:void(0)","data-cb-cycle-set":e||void 0,"data-cb-cycle-choices":JSON.stringify(t.choices)},[n])}},i.default.on("dom-click",function(e){if(e.dataset.cbCycleChoices){var t=JSON.parse(e.dataset.cbCycleChoices),n=t.indexOf(e.textContent)+1;n===t.length&&(n=0),(0,r.changeBody)(function(){return e.textContent=t[n]}),e.dataset.cbCycleSet&&(0,o.set)(e.dataset.cbCycleSet,t[n])}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.none=function(e,t){return new Promise(function(n){e.innerHTML=t,n()})},t.fadeInOut=function(e,t,n){return new Promise(function(r){a(e);var o=(0,i.default)(n,"s")/2,s=document.createElement("div");if(s.innerHTML=t,s.style.visibility="hidden",s.style.animationDuration=o+"s",s.addEventListener("animationend",function e(){s.removeEventListener("animationend",e),s.className="",s.style.animationDuration=o+"s",r()}),""!==e.innerHTML.trim()){var u=l(e);u.style.position="absolute",u.style.top="0",u.style.left="0",u.className="fade-out",u.style.animationDuration=o+"s",u.addEventListener("animationend",function e(){u.removeEventListener("animationend",e),u.parentNode.removeChild(u),s.style.visibility="visible",s.className="fade-in"}),e.innerHTML="",e.appendChild(s),e.appendChild(u)}else s.className="fade-in",s.animationDuration=2*o,s.style.visibility="visible",s.className="fade-in",e.appendChild(s)})},t.crossfade=function(e,t,n){return new Promise(function(r){a(e);var o=(0,i.default)(n,"s"),s=document.createElement("div");if(s.innerHTML=t,s.className="fade-in",s.style.animationDuration=o+"s",s.addEventListener("animationend",function e(){s.removeEventListener("animationend",e),s.style.animationDuration=null,s.className="",r()}),""!==e.innerHTML.trim()){var u=l(e);u.style.position="absolute",u.style.top="0",u.style.left="0",u.className="fade-out",u.style.animationDuration=o+"s",u.addEventListener("animationend",function e(){u.removeEventListener("animationend",e),u.style.opacity=.5,u.parentNode.removeChild(u)}),e.innerHTML="",e.appendChild(s),e.appendChild(u)}else e.innerHTML="",e.appendChild(s)})};var r,o=n(13),i=(r=o)&&r.__esModule?r:{default:r},s=n(7);function a(e){"static"===window.getComputedStyle(e).position&&(e.style.position="relative")}function l(e){var t=document.createElement(e.nodeName.toLowerCase());return t.innerHTML=e.innerHTML,t.style.width=e.clientWidth+"px",t.style.height=e.clientHeight+"px",t.setAttribute("aria-hidden",!0),t.style.pointerEvents="none",(0,s.selectAll)(t,"audio").forEach(function(e){return e.parentNode.removeChild(e)}),t}n(65)},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=function(){window.addEventListener("error",a),window.addEventListener("unhandledrejection",function(e){return a(e.reason)})};var r,o=n(67),i=(r=o)&&r.__esModule?r:{default:r},s=n(0);function a(e){try{var t="";t=(t=e.error&&e.error.stack?e.message+"\n\nStack trace:\n"+e.error.stack:e.message+"\n\n[No stack trace available]").replace("\nPlease report this to https://github.com/chjj/marked.","");var n=document.createElement("div"),r=document.querySelector("#page article"),o=(0,s.get)("trail");n.className="error",n.innerHTML="\n\t\t\t<p>\n\t\t\tAn unexpected error has occurred.\n\t\t\t</p>\n\t\t\t<pre>"+((0,s.get)("config.testing")?t:"")+'</pre>\n\t\t\t<ul>\n\t\t\t\t<li>\n\t\t\t\t\t<a href="javascript:void(0)" '+(o.length>1?"data-cb-back":"data-cb-refresh")+'>Go back</a> to the previous passage.\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t<a href="javascript:void(0)" data-cb-hard-restart>Hard restart</a>, clearing all progress and beginning from the start.\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t',n.addEventListener("click",function(e){if((0,i.default)(e.target,"[data-cb-back]",!0)){var t=(0,s.get)("trail");Array.isArray(t)?(0,s.set)("trail",t.slice(0,t.length-1)):window.alert("Sorry, going back was not successful. Please try hard restarting.")}else{if((0,i.default)(e.target,"[data-cb-refresh]",!0))(0,s.set)("trail",[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}((0,s.get)("trail"))));else(0,i.default)(e.target,"[data-cb-hard-restart]",!0)&&((0,s.purgeFromStorage)(!0),window.location.reload())}}),r.innerHTML="",r.appendChild(n)}catch(e){console.log(e)}}},function(e,t,n){var r=n(68);e.exports=function(e,t,n){for(var o=n?e:e.parentNode;o&&o!==document;){if(r(o,t))return o;o=o.parentNode}}},function(e,t){var n=Element.prototype,r=n.matchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector;e.exports=function(e,t){if(r)return r.call(e,t);for(var n=e.parentNode.querySelectorAll(t),o=0;o<n.length;++o)if(n[o]==e)return!0;return!1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=function(){var e=window.console.warn,t=document.querySelector("#page .warnings");console.warn=function(){for(var n=arguments.length,i=Array(n),s=0;s<n;s++)i[s]=arguments[s];if((0,o.get)("config.testing"))try{t.removeAttribute("hidden"),i.forEach(function(e){var n=document.createElement("li");n.className="warning",n.innerHTML="Warning: "+(0,r.default)(e),t.appendChild(n)})}catch(e){}e.apply(window.console,i)},i.default.on("state-change",function(e){var n=e.name;"trail"===n&&(t.setAttribute("hidden",""),t.innerHTML="")})};var r=s(n(19)),o=n(0),i=s(n(1));function s(e){return e&&e.__esModule?e:{default:e}}n(70)},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=Date.now(),r=void 0,o=(0,s.selectAll)(e,"[data-cb-skippable]").map(function(e){return{el:e,delay:1e3*(0,i.default)(window.getComputedStyle(e).animationDelay)}}).sort(function(e,t){return e.delay-t.delay});if(0===o.length)return;function a(){var e=Date.now()-n,t=Object.assign({},o.find(function(t){return t.delay>e}));t?(o.forEach(function(e){e.delay<=t.delay?(e.delay=0,e.el.classList.add("skip-animation")):(e.delay-=t.delay,e.el.style.animationDelay=e.delay+"ms")}),n=Date.now(),window.clearTimeout(r),l()):u()}function l(){r&&window.clearTimeout(r),r=window.setTimeout(u,o[o.length-1].delay)}function u(){t.classList.remove("visible"),document.body.removeEventListener("click",a),document.body.removeEventListener("keyup",a)}t.classList.add("visible"),l(),window.setTimeout(function(){document.body.addEventListener("click",a),document.body.addEventListener("keyup",a)},50)};var r,o=n(13),i=(r=o)&&r.__esModule?r:{default:r},s=n(7)},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(5),i=(r=o)&&r.__esModule?r:{default:r};t.default={match:/^embed\s+flickr(\s+image)?/i,render:function(e,t){return(0,i.default)("img",Object.assign({},t,{src:/img src="(.+?)"/.exec(e)[1]}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(5),i=(r=o)&&r.__esModule?r:{default:r};t.default={match:/^embed\s+image?/i,render:function(e,t){return(0,i.default)("img",Object.assign({},t,{src:e}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),o=n(11);t.default={match:/^embed\s+passage(\s+named)?/i,render:function(e){return(0,o.render)((0,r.passageNamed)(e).source)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(5),i=(r=o)&&r.__esModule?r:{default:r};t.default={match:/^embed\s+unsplash(\s+image)?/i,render:function(e,t){return(0,i.default)("img",Object.assign({},t,{src:"https://source.unsplash.com/"+e.replace(/.*\//,"")+"/"+t.width+"x"+t.height}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(5),i=(r=o)&&r.__esModule?r:{default:r};t.default={match:/^embed\s+youtube(\s+video)?/i,render:function(e,t){var n="https://www.youtube-nocookie.com/embed/"+e.replace(/.*\?v=/,"")+"?modestbranding=1&rel=0&controls="+(t.controls?1:0)+"&";return t.autoplay&&(n+="autoplay=1&"),t.loop&&(n+="loop=1&"),(0,i.default)("div",{style:"position: relative; height: 0; padding-bottom: 56.25%; margin-bottom: 1em"},[(0,o.domify)("iframe",{src:n,frameBorder:0,style:"position: absolute; top: 0; left: 0; width: 100%; height: 100%"})])}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(17);t.default={match:/^link\s+to/i,render:function(e,t){return(0,r.renderLink)(e,t.label)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(1)),o=n(0),i=n(5),s=a(i);function a(e){return e&&e.__esModule?e:{default:e}}t.default={match:/^dropdown menu(\s+for)?/i,render:function(e,t){var n=void 0;return e&&void 0===(n=(0,o.get)(e))&&((0,o.set)(e,t.choices[0]),n=t.choices[0]),(0,s.default)("select",{"data-cb-menu-set":e||void 0},t.choices.map(function(t){var r={value:t};return e&&n===t&&(r.selected=""),(0,i.domify)("option",r,[t])}))}},r.default.on("dom-change",function(e){e.dataset.cbMenuSet&&(0,o.set)(e.dataset.cbMenuSet,e.querySelectorAll("option")[e.selectedIndex].value)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(5),i=(r=o)&&r.__esModule?r:{default:r};t.default={match:/^restart\s+link/i,render:function(e,t){return(0,i.default)("a",{href:"javascript:void(0)","data-cb-restart":!0},[t.label||"Restart"])}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(12),o=l(n(1)),i=l(n(5)),s=n(6),a=n(11);function l(e){return e&&e.__esModule?e:{default:e}}t.default={match:/^reveal\s+link/i,render:function(e,t){return t.text?(0,i.default)("a",{href:"javascript:void(0)","data-cb-reveal-text":t.text},[e]):t.passage?(0,i.default)("a",{href:"javascript:void(0)","data-cb-reveal-passage":t.passage},[e]):void 0}},o.default.on("dom-click",function(e){var t=e.dataset.cbRevealText;if(e.dataset.cbRevealPassage&&(t=(0,s.passageNamed)(e.dataset.cbRevealPassage).source),t){var n=document.createElement("div");n.innerHTML=(0,a.render)(t),(0,r.changeBody)(function(){if("P"===n.firstChild.nodeName){var t=document.createElement("span");t.innerHTML=n.firstChild.innerHTML,e.parentNode.insertBefore(t,e.nextSibling),n.removeChild(n.firstChild)}for(;n.firstChild;)e.parentNode.parentNode.insertBefore(n.firstChild,e.parentNode.nextSibling);e.parentNode.removeChild(e)})}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default={match:/^sound\s+effect/i,render:function(e,t){var n=(0,r.get)("sound.effect."+e+".description")||"";return t.volume&&(0,r.set)("sound.effect."+e+".volume",t.volume),(0,r.set)("sound.effect."+e+".playing",!0),"<audio>"+n+"</audio>"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(1)),o=n(0),i=s(n(5));function s(e){return e&&e.__esModule?e:{default:e}}t.default={match:/^text\s+input(\s+for)?/i,render:function(e,t){return(0,i.default)("input",{type:"text",value:e?(0,o.get)(e):"","data-cb-text-field-set":e||void 0,required:!1!==t.required?"":void 0})}},r.default.on("dom-change",function(e){e.dataset.cbTextFieldSet&&(0,o.set)(e.dataset.cbTextFieldSet,e.value)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=f(n(85)),o=f(n(86)),i=f(n(87)),s=f(n(88)),a=f(n(89)),l=f(n(90)),u=f(n(91)),c=f(n(93));function f(e){return e&&e.__esModule?e:{default:e}}t.default=[r.default,o.default,i.default,s.default,a.default,l.default,u.default,c.default]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(13)),o=i(n(21));function i(e){return e&&e.__esModule?e:{default:e}}t.default={match:/^after\s/i,process:function(e,t){var n=t.invocation,i=(0,r.default)(n.replace(/^after\s/i,""),"ms");e.text=(0,o.default)(e.text,{"data-cb-skippable":"",class:"fade-in",style:"animation-delay: "+i+"ms"})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(21),i=(r=o)&&r.__esModule?r:{default:r};t.default={match:/^align\s+(left|right|center)/i,process:function(e,t){var n=t.invocation.replace(/^align\s+/i,"");e.text=(0,i.default)(e.text,{style:"display: block; text-align: "+n})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={match:/^append$/i,process:function(e){e.startsNewParagraph=!1}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={match:/^if(always|never)?\s|else$|unless\s/i,processRaw:function(e,t){var n=t.invocation,r=t.state,o=n.replace(/\s.*/,"").toLowerCase(),i=void 0;switch("else"!==o&&(i=new Function("return "+n.replace(/.*?\s/,""))),o){case"if":r.conditionEval=i.apply(window);break;case"ifalways":r.conditionEval=!0;break;case"ifnever":r.conditionEval=!1;break;case"unless":r.conditionEval=!i.apply(window);break;case"else":if(void 0===r.conditionEval)throw new Error("There was no matching if modifier for an else modifier.");r.conditionEval=!r.conditionEval}r.conditionEval||(e.text="")}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={match:/^continued?|cont('d)?$/i,process:function(){}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={match:/^css$/i,process:function(e){e.text="<style>"+e.text+"</style>"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(92),i=(r=o)&&r.__esModule?r:{default:r},s=n(0);t.default={match:/^javascript$/i,process:function(e){try{var t=new Function("\n\t\t\t\t\t\tfunction write() { write.__out += write.__join.call(arguments, ''); }\n\t\t\t\t\t\twrite.__out = '';\n\t\t\t\t\t\twrite.__join = Array.prototype.join;\n\t\t\t\t\t\t"+(0,i.default)(e.text)+";\n\t\t\t\t\t\treturn write.__out;\n\t\t\t\t\t");e.text=t.apply(window)}catch(t){if(!(0,s.get)("config.testing"))throw t;var n="unknown error";n=t.error&&t.error.stack?t.error.stack:t.message+"\n[No stack trace available]",e.text='<div class="error">An error occured evaluating:<pre>'+e.text+"</pre><p><pre>"+n+"</pre></p></div>"}}}},function(e,t,n){(function(t){var n=1/0,r="[object Symbol]",o=/&(?:amp|lt|gt|quot|#39|#96);/g,i=RegExp(o.source),s="object"==typeof t&&t&&t.Object===Object&&t,a="object"==typeof self&&self&&self.Object===Object&&self,l=s||a||Function("return this")();var u,c=(u={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},function(e){return null==u?void 0:u[e]}),f=Object.prototype.toString,d=l.Symbol,p=d?d.prototype:void 0,h=p?p.toString:void 0;function g(e){if("string"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&f.call(e)==r}(e))return h?h.call(e):"";var t=e+"";return"0"==t&&1/e==-n?"-0":t}e.exports=function(e){var t;return(e=null==(t=e)?"":g(t))&&i.test(e)?e.replace(o,c):e}}).call(this,n(16))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={match:/^(note(\s+to\s+self)?|n?b?|todo|fixme)$/i,process:function(e){e.text=""}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(o)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u,n={vars:[],blocks:[]},i=e.split(t.varsSep,2),s=void 0,c=void 0;if(2===i.length){a("Detected vars section");var f=r(i,2);s=f[0],c=f[1],(0,o.default)(s).forEach(function(e){if(""!==e.trim()){var t=e.indexOf(":");if(-1!==t){var r=e.substr(0,t).trim(),o=e.substr(t+1).trim(),i={name:r,value:new Function("return ("+o+")")},s=r.match(/\(.+\)/);s?(i.condition=new Function("return ("+s[0]+")"),i.name=(i.name.substr(0,s.index)+i.name.substr(s.index+s[0].length)).trim(),a('Setting variable "'+i.name+'" to "'+o+'" with condition ('+s[0]+")")):a('Setting variable "'+r+'" to "'+o+'" without condition'),n.vars.push(i)}else l('The line "'+e+'" in the vars section is missing a colon. It was ignored.')}})}else a("No vars section detected"),c=i[0];var d=function(e,t){var r=t.trim();""!==r&&(a("Creating '"+e+"' block with content: \""+r+'"'),n.blocks.push({type:e,content:r}))},p=new RegExp(t.modifierPattern),h=0,g=p.exec(c);for(;g;){d("text",c.substring(h,g.index));for(var m=g[1],v="",b=0;b<m.length;b++)switch(m[b]){case'"':for(v+='"',b+=1;b<m.length&&(v+=m[b],'"'!==m[b]||"\\"===m[b-1]);b++);break;case";":d("modifier",v),v="";break;default:v+=m[b]}d("modifier",v),h=p.lastIndex,g=p.exec(c)}return d("text",c.substring(h)),n};var o=i(n(95));function i(e){return e&&e.__esModule?e:{default:e}}var s=(0,i(n(4)).default)("parse"),a=s.log,l=s.warn,u={varsSep:/^--$/m,modifierPattern:/^\[([^[].+[^\]])\]$/gm}},function(e,t,n){"use strict";e.exports=function(e,t){if("string"!=typeof e)throw new TypeError("Expected a string in the first argument, got "+typeof e);if(!(t&&t.preserveNewlines))return e.split(/\r?\n/);for(var n=e.split(/(\r?\n)/),r=[],o=0;o<n.length;o+=2)r.push(n[o]+(n[o+1]||""));return r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.markedOptions=void 0,t.default=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!e.vars)throw new Error("The renderer was given an object with no vars property.");if(!e.blocks)throw new Error("The renderer was given an object with no blocks property.");var i="";o||(c("Setting vars ("+e.vars.length+")"),e.vars.forEach(function(e){if(e.condition){var t=e.condition();t?(c('Setting var "'+name+'" (condition is currently true)'),(0,l.set)(e.name,e.value())):c('Not setting var "'+name+'" (condition is currently false)')}else c('Setting var "'+name+'"'),(0,l.set)(e.name,e.value())}));var u=[],d={};return e.blocks.forEach(function(e){switch(e.type){case"text":var r={text:e.content,startsNewParagraph:!0},o=u.filter(function(e){return!!e.mod.processRaw});c("Running "+o.length+" modifiers on raw source block"),o.forEach(function(e){e.mod.processRaw(r,{state:d[e.mod],invocation:e.invocation})}),r.text=(0,s.default)((0,a.default)(r.text),t);var l=u.filter(function(e){return!!e.mod.process});c("Running "+l.length+" modifiers on source block"),l.forEach(function(e){return e.mod.process(r,{state:d[e.mod],invocation:e.invocation})}),c("Output after modifiers: "+JSON.stringify(r)),""!==r.text.trim()&&(""!==i&&(i+=r.startsNewParagraph?"\n\n":" "),i+=r.text),u=[];break;case"modifier":var f=n.filter(function(t){return t.match.test(e.content)});if(1===f.length){var p=f[0];c('Activated "'+p.name+'" modifier matching ['+e.content+"]"),d[p]=d[p]||{},u.push({mod:p,invocation:e.content})}else 0===f.length?i+="\n\n["+e.content+"]\n\n":(console.warn('More than one modifier matched "['+e.content+']".'),i+="\n\n["+e.content+"]\n\n");break;default:throw new Error("Don't know how to render a block with type \""+e.type+'".')}}),r.default.setOptions(f),c("Final Markdown:\n"+i),(0,r.default)(i)};var r=u(n(22)),o=u(n(4)),i=u(n(97)),s=u(n(98)),a=u(n(17)),l=n(0);function u(e){return e&&e.__esModule?e:{default:e}}var c=(0,o.default)("render").log,f=t.markedOptions={renderer:i.default,smartypants:!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(22);var i=new((r=o)&&r.__esModule?r:{default:r}).default.Renderer;Object.assign(i,{blockquote:function(e){return'<div class="fork">'+e+"</div>"},del:function(e){return'<span class="small-caps">'+e+"</span>"}}),t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n="",r=0,o=e.indexOf("{");if(-1===o)return e;for(var i=!1,a=void 0,l=o+1;l<e.length;l++)switch(e[l]){case"{":o=l,i=!1;break;case'"':case"'":i?i&&a===e[l]&&(i=!1):(i=!0,a=e[l]);break;case"}":if(!i){var u=e.substring(o,l+1),c="";try{c=s(u,t)}catch(e){console.warn('An error occurred while rendering "'+u+'": '+e.message),c=u}void 0===c&&(c=""),n+=e.substring(r,o)+c,r=l+1,-1===(o=e.indexOf("{",r))&&(l=e.index)}}return n+e.substring(r)};var r,o=n(0),i=n(4);(0,((r=i)&&r.__esModule?r:{default:r}).default)("render").warn;function s(e,t){var n=e.substr(1,e.length-2).trim();if(/\s/.test(n)){var r=n.match(/^[^:,]+/)[0],i=t.find(function(e){return e.match.test(r)});if(i){var s=n.replace(r,"");if(":"===s[0]){var a=new Function('return {"'+r+'" '+s+"}")(),l=a[r];return delete a[r],i.render(l,a,n)}if(","===s[0]){var u=new Function("return {"+s.substr(1)+"}")();return i.render(null,u,n)}if(""===s)return i.render(null,{},n)}}else{var c=(0,o.get)(n);if(void 0!==c)return c}return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r=e.volume,o=t-r,i=void 0,s=0;return new Promise(function(t){return window.requestAnimationFrame(function(a){i=a,window.requestAnimationFrame(function a(l){s+=l-i;e.volume=function(e,t,n,r){if((e/=r/2)<1)return n/2*e*e+t;return-n/2*(--e*(e-2)-1)+t}(s,r,o,n);s<n?(i=l,window.requestAnimationFrame(a)):t()})})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){(0,r.default)(u.setLookup),(0,o.default)(u.setLookup),(0,i.default)(u.setLookup),(0,s.default)(u.setLookup),(0,a.default)(u.setLookup),(0,l.default)(u.setLookup)};var r=c(n(101)),o=c(n(102)),i=c(n(104)),s=c(n(105)),a=c(n(24)),l=c(n(115)),u=n(0);function c(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e("browser.height",function(){return window.innerHeight}),e("browser.online",function(){return window.navigator.onLine}),e("browser.width",function(){return window.innerWidth})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e("engine.version",function(){return i.default.version})};var r,o=n(103),i=(r=o)&&r.__esModule?r:{default:r}},function(e){e.exports={name:"Chapbook",author:"Chris Klimas <chris@twinery.org>",description:"A Twine story format emphasizing ease of authoring, multimedia, and playability on many different types of devices.",version:"1.0.0",main:"index.js",license:"MIT",devDependencies:{"babel-core":"^6.26.0","babel-loader":"^7.1.4","babel-preset-env":"^1.6.1","babel-preset-preact":"^1.1.0","child-process-promise":"^2.2.1",cpy:"^7.2.0","cpy-cli":"^2.0.0","cross-env":"^5.2.0","css-loader":"^0.28.11",eslint:"^4.14.0","gitbook-cli":"^2.3.2","html-webpack-plugin":"^3.2.0",jest:"^24.7.1","jest-localstorage-mock":"^2.2.0",jsdoc:"^3.6.2","jstransformer-marked":"^1.0.3","lodash.escape":"^4.0.1","mini-css-extract-plugin":"^0.4.0","mock-local-storage":"^1.0.5","node-sass":"^4.9.0","npm-run-all":"^4.1.3",pug:"^2.0.3",rimraf:"^2.6.3","rollup-plugin-uglify":"^3.0.0","sass-loader":"^7.0.3","title-case":"^2.1.1","twine-utils":"^1.2.6","url-loader":"^1.1.2",webpack:"^4.28.2","webpack-cli":"^3.1.2","webpack-dev-server":"^3.1.12",yargs:"^11.0.0"},dependencies:{closest:"^0.0.1","get-value":"^3.0.1","lodash.unescape":"^4.0.1",marked:"^0.6.2",nanobus:"^4.3.3","open-color":"^1.6.3",preact:"^8.2.9","pure-color":"^1.3.0",seedrandom:"^2.4.3","set-value":"^3.0.0","split-lines":"^1.1.0",timestring:"^5.0.0","unset-value":"^1.0.0"},scripts:{start:"webpack-dev-server",build:"npm-run-all --parallel build:main build:micro --serial build:format clean","build:format":"node scripts/build-format.js","build:main":"cross-env NODE_ENV=production webpack","build:micro":"cross-env NODE_ENV=production CHAPBOOK_MICRO=y webpack",clean:"rimraf dist/full; rimraf dist/micro",examples:"node scripts/build-examples.js",guide:"gitbook serve guide","guide:init":"cd guide && gitbook install && cd ..","guide:release":"cd guide && gitbook build",lint:"eslint src/",release:"run-s -l build examples guide:release website",test:"jest","test:watch":"jest --watch","test:coverage":"jest --coverage",website:"node scripts/build-website.js"},jest:{setupFiles:["jest-localstorage-mock"]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e("now.second",function(){return(new Date).getSeconds()}),e("now.minute",function(){return(new Date).getMinutes()}),e("now.hour",function(){return(new Date).getHours()}),e("now.day",function(){return(new Date).getDate()}),e("now.weekday",function(){return(new Date).getDay()+1}),e("now.weekdayName",function(){return(new Date).toLocaleString(navigator.language,{weekday:"long"})}),e("now.month",function(){return(new Date).getMonth()+1}),e("now.monthName",function(){return(new Date).toLocaleString(navigator.language,{month:"long"})}),e("now.year",function(){return(new Date).getFullYear()}),e("now.timestamp",function(){return(new Date).toLocaleString(navigator.language,{hour:"numeric",minute:"numeric",second:"numeric"})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e("passage.name",function(){var e=(0,r.get)("trail");if(e)return e[e.length-1]}),e("passage.visits",function(){var e=(0,r.get)("trail"),t=(0,r.get)("passage.name");if(e)return e.reduce(function(e,n){return n===t?e+1:e},0)})};var r=n(0)},function(e,t,n){var r=n(107),o=n(108),i=n(109),s=n(110),a=n(111),l=n(112),u=n(113);u.alea=r,u.xor128=o,u.xorwow=i,u.xorshift7=s,u.xor4096=a,u.tychei=l,e.exports=u},function(e,t,n){(function(e){var r;!function(e,o,i){function s(e){var t,n=this,r=(t=4022871197,function(e){e=e.toString();for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}function a(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function l(e,t){var n=new s(e),r=t&&t.state,o=n.next;return o.int32=function(){return 4294967296*n.next()|0},o.double=function(){return o()+1.1102230246251565e-16*(2097152*o()|0)},o.quick=o,r&&("object"==typeof r&&a(r,n),o.state=function(){return a(n,{})}),o}o&&o.exports?o.exports=l:n(3)&&n(9)?void 0===(r=function(){return l}.call(t,n,t,o))||(o.exports=r):this.alea=l}(0,e,n(3))}).call(this,n(8)(e))},function(e,t,n){(function(e){var r;!function(e,o,i){function s(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function l(e,t){var n=new s(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&a(r,n),o.state=function(){return a(n,{})}),o}o&&o.exports?o.exports=l:n(3)&&n(9)?void 0===(r=function(){return l}.call(t,n,t,o))||(o.exports=r):this.xor128=l}(0,e,n(3))}).call(this,n(8)(e))},function(e,t,n){(function(e){var r;!function(e,o,i){function s(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function l(e,t){var n=new s(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&a(r,n),o.state=function(){return a(n,{})}),o}o&&o.exports?o.exports=l:n(3)&&n(9)?void 0===(r=function(){return l}.call(t,n,t,o))||(o.exports=r):this.xorwow=l}(0,e,n(3))}).call(this,n(8)(e))},function(e,t,n){(function(e){var r;!function(e,o,i){function s(e){var t=this;t.next=function(){var e,n,r=t.x,o=t.i;return e=r[o],n=(e^=e>>>7)^e<<24,n^=(e=r[o+1&7])^e>>>10,n^=(e=r[o+3&7])^e>>>3,n^=(e=r[o+4&7])^e<<7,e=r[o+7&7],n^=(e^=e<<13)^e<<9,r[o]=n,t.i=o+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function a(e,t){return t.x=e.x.slice(),t.i=e.i,t}function l(e,t){null==e&&(e=+new Date);var n=new s(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&(r.x&&a(r,n),o.state=function(){return a(n,{})}),o}o&&o.exports?o.exports=l:n(3)&&n(9)?void 0===(r=function(){return l}.call(t,n,t,o))||(o.exports=r):this.xorshift7=l}(0,e,n(3))}).call(this,n(8)(e))},function(e,t,n){(function(e){var r;!function(e,o,i){function s(e){var t=this;t.next=function(){var e,n,r=t.w,o=t.X,i=t.i;return t.w=r=r+1640531527|0,n=o[i+34&127],e=o[i=i+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=o[i]=n^e,t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,o,i,s,a=[],l=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,l=Math.max(l,t.length)),o=0,i=-32;i<l;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(s=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(s=s+1640531527|0,o=0==(n=a[127&i]^=r+s)?o+1:0);for(o>=128&&(a[127&(t&&t.length||0)]=-1),o=127,i=512;i>0;--i)r=a[o+34&127],n=a[o=o+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,a[o]=r^n;e.w=s,e.X=a,e.i=o}(t,e)}function a(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function l(e,t){null==e&&(e=+new Date);var n=new s(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&(r.X&&a(r,n),o.state=function(){return a(n,{})}),o}o&&o.exports?o.exports=l:n(3)&&n(9)?void 0===(r=function(){return l}.call(t,n,t,o))||(o.exports=r):this.xor4096=l}(0,e,n(3))}).call(this,n(8)(e))},function(e,t,n){(function(e){var r;!function(e,o,i){function s(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,o=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^o,o=o-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^o,t.a=o-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function a(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function l(e,t){var n=new s(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&a(r,n),o.state=function(){return a(n,{})}),o}o&&o.exports?o.exports=l:n(3)&&n(9)?void 0===(r=function(){return l}.call(t,n,t,o))||(o.exports=r):this.tychei=l}(0,e,n(3))}).call(this,n(8)(e))},function(e,t,n){var r;!function(o,i){var s,a=(0,eval)("this"),l=256,u=6,c="random",f=i.pow(l,u),d=i.pow(2,52),p=2*d,h=l-1;function g(e,t,n){var r=[],h=b(function e(t,n){var r,o=[],i=typeof t;if(n&&"object"==i)for(r in t)try{o.push(e(t[r],n-1))}catch(e){}return o.length?o:"string"==i?t:t+"\0"}((t=1==t?{entropy:!0}:t||{}).entropy?[e,y(o)]:null==e?function(){try{var e;return s&&(e=s.randomBytes)?e=e(l):(e=new Uint8Array(l),(a.crypto||a.msCrypto).getRandomValues(e)),y(e)}catch(e){var t=a.navigator,n=t&&t.plugins;return[+new Date,a,n,a.screen,y(o)]}}():e,3),r),g=new m(r),w=function(){for(var e=g.g(u),t=f,n=0;e<d;)e=(e+n)*l,t*=l,n=g.g(1);for(;e>=p;)e/=2,t/=2,n>>>=1;return(e+n)/t};return w.int32=function(){return 0|g.g(4)},w.quick=function(){return g.g(4)/4294967296},w.double=w,b(y(g.S),o),(t.pass||n||function(e,t,n,r){return r&&(r.S&&v(r,g),e.state=function(){return v(g,{})}),n?(i[c]=e,t):e})(w,h,"global"in t?t.global:this==i,t.state)}function m(e){var t,n=e.length,r=this,o=0,i=r.i=r.j=0,s=r.S=[];for(n||(e=[n++]);o<l;)s[o]=o++;for(o=0;o<l;o++)s[o]=s[i=h&i+e[o%n]+(t=s[o])],s[i]=t;(r.g=function(e){for(var t,n=0,o=r.i,i=r.j,s=r.S;e--;)t=s[o=h&o+1],n=n*l+s[h&(s[o]=s[i=h&i+t])+(s[i]=t)];return r.i=o,r.j=i,n})(l)}function v(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function b(e,t){for(var n,r=e+"",o=0;o<r.length;)t[h&o]=h&(n^=19*t[h&o])+r.charCodeAt(o++);return y(t)}function y(e){return String.fromCharCode.apply(0,e)}if(i["seed"+c]=g,b(i.random(),o),e.exports){e.exports=g;try{s=n(114)}catch(e){}}else void 0===(r=function(){return g}.call(t,n,t,e))||(e.exports=r)}([],Math)},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e("story.name",r.name)};var r=n(6)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){[r.defaults,o.defaults,i.defaults,s.defaults,a.defaults,l.defaults,u.defaults].forEach(function(e){return Object.keys(e).forEach(function(t){"function"==typeof e[t]?(0,a.setDefault)(t,e[t]()):(0,a.setDefault)(t,e[t])})})};var r=n(12),o=n(4),i=n(24),s=n(23),a=n(0),l=n(25),u=n(11)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=function(){l.dataset.cbGoogleFontLoader="",l.setAttribute("hidden",!0),u.dataset.cbTypekitFontLoader="",u.setAttribute("hidden",!0),c.dataset.cbUrlFontLoader="",c.setAttribute("hidden",!0),document.body.appendChild(l),document.body.appendChild(u),document.body.appendChild(c),o.default.on("state-change",function(e){var t=e.name,n=(e.value,"config"===t||"config.style"===t||"config.style.fonts"===t);if(n){var r=(0,i.get)("config.style.fonts");if(!r)return;Object.keys(r).forEach(function(e){var t=r[e].name,n=r[e].url;t&&n&&d(e,n,t)})}else{var o=t.match(/^config\.style\.fonts\.([^\.]+)/i);if(o){var s=o[1],c=(0,i.get)("config.style.fonts."+s+".name"),f=(0,i.get)("config.style.fonts."+s+".url");return void(f&&c&&(a("Adding font from URL ("+c+")"),d(s,f,c)))}}(0,i.sameObject)(t,"config.style.googleFont")&&(a("Adding Google font"),l.innerHTML=(0,i.get)("config.style.googleFont")),(0,i.sameObject)(t,"config.style.typekitFont")&&(a("Adding Typekit font"),u.innerHTML=(0,i.get)("config.style.typekitFont"))})};var r=s(n(4)),o=s(n(1)),i=n(0);function s(e){return e&&e.__esModule?e:{default:e}}var a=(0,r.default)("style").log,l=document.createElement("div"),u=document.createElement("div"),c=document.createElement("div"),f={};function d(e,t,n){var r=t.match(/\.(.+)$/);if(r&&r[1]){var o=r[1],i=f[e]||document.createElement("style");i.dataset.cbFontLoader=e,i.innerHTML='@font-face { font-family: "'+n+'"; src: url("'+t+'") format("'+o+'"); }',i.parentNode||c.appendChild(i)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.autopx=function(e){if("number"==typeof e)return e+"px";return e},t.parseColorValue=a,t.parseColor=function(e){if("string"!=typeof e)throw new Error("Only strings can be parsed as colors.");var t={color:"inherit","background-color":"inherit"},n=e.split(/ on /i);t.color=a(n[0].trim().toLowerCase()),2===n.length&&(t["background-color"]=a(n[1].trim().toLowerCase()));return t},t.parseFont=function(e){var t={"font-family":"inherit","font-size":"inherit","font-style":"inherit","font-weight":"inherit","letter-spacing":"inherit","text-decoration":"inherit","text-transform":"inherit"};function n(e,t){e["font-family"]=t.split("/").map(function(e){var t=e;return'"'!==t[0]&&(t='"'+t),'"'!==t[t.length-1]&&(t+='"'),t}).join(",")}function r(e){e["font-weight"]="bold"}function o(e){e["font-style"]="italic"}function i(e){e["font-style"]="none",e["font-weight"]="normal",e["letter-spacing"]="normal",e["text-decoration"]="none",e["text-transform"]="none"}function s(e){e["letter-spacing"]="0.075em",e["text-transform"]="uppercase",e["font-size"]&&"inherit"!==e["font-size"]?e["font-size"]="calc(0.7 * "+e["font-size"]+")":e["font-size"]="70%"}function a(e){e["text-decoration"]="underline"}var l=/\b\d+(ch|cm|ex|in|mm|pc|pt|px|r?em|vh|vmax|vmin|vw|%)?/i.exec(e);if(l){/^\d+$/.test(l[0])?t["font-size"]=l[0]+"px":t["font-size"]=l[0],0!==l.index&&n(t,e.substr(0,l.index).trim());var u=e.substr(l.index);/\bregular\b/i.test(u)?(t["font-style"]="none",t["font-weight"]="normal",t["letter-spacing"]="normal",t["text-decoration"]="none",t["text-transform"]="none"):(/\bbold\b/.test(u)&&r(t),/\bitalics?\b/.test(u)&&o(t),/\bunderlined?/.test(u)&&a(t),/\bsmall caps?\b/.test(u)&&s(t))}else{for(var c=void 0,f=e;c=/(bold|italics?|regular|small caps|underlined?)$/.exec(f);){switch(c[0]){case"bold":r(t);break;case"italic":case"italics":o(t);break;case"regular":i(t);break;case"small caps":s(t);break;case"underline":case"underlined":a(t)}f=f.substr(0,c.index).trim()}""!==f.trim()&&n(t,f)}return t};var r=s(n(119)),o=s(n(120)),i=s(n(125));function s(e){return e&&e.__esModule?e:{default:e}}function a(e){if("string"!=typeof e)throw new Error("Only strings can be parsed as color values.");r.default[e]&&(e=Array.isArray(r.default[e])?r.default[e][r.default[e].length-1]:r.default[e]);var t=/^(\w+)-(\d)$/.exec(e);t&&r.default[t[1]]&&(e=r.default[t[1]][t[2]]);var n=(0,o.default)(e),s=(0,i.default)(n);return s[3]=void 0!==n[3]?n[3]:1,"hsla("+s[0]+", "+s[1]+"%, "+s[2]+"%, "+s[3]+")"}},function(e){e.exports={white:"#ffffff",black:"#000000",gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]}},function(e,t,n){var r=n(121),o=n(122),i=n(123),s=n(124);var a={"#":o,hsl:function(e){var t=r(e),n=s(t);return 4===t.length&&n.push(t[3]),n},rgb:i};function l(e){for(var t in a)if(0===e.indexOf(t))return a[t](e)}l.rgb=i,l.hsl=r,l.hex=o,e.exports=l},function(e,t,n){var r=n(26),o=n(27);function i(e,t){switch(e=parseFloat(e),t){case 0:return o(e,0,360);case 1:case 2:return o(e,0,100);case 3:return o(e,0,1)}}e.exports=function(e){return r(e).map(i)}},function(e,t){e.exports=function(e){4!==e.length&&5!==e.length||(e=function(e){for(var t="#",n=1;n<e.length;n++){var r=e.charAt(n);t+=r+r}return t}(e));var t=[parseInt(e.substring(1,3),16),parseInt(e.substring(3,5),16),parseInt(e.substring(5,7),16)];if(9===e.length){var n=parseFloat((parseInt(e.substring(7,9),16)/255).toFixed(2));t.push(n)}return t}},function(e,t,n){var r=n(26),o=n(27);function i(e,t){return t<3?-1!=e.indexOf("%")?Math.round(255*o(parseInt(e,10),0,100)/100):o(parseInt(e,10),0,255):o(parseFloat(e),0,1)}e.exports=function(e){return r(e).map(i)}},function(e,t){e.exports=function(e){var t,n,r,o,i,s=e[0]/360,a=e[1]/100,l=e[2]/100;if(0==a)return[i=255*l,i,i];t=2*l-(n=l<.5?l*(1+a):l+a-l*a),o=[0,0,0];for(var u=0;u<3;u++)(r=s+1/3*-(u-1))<0&&r++,r>1&&r--,i=6*r<1?t+6*(n-t)*r:2*r<1?n:3*r<2?t+(n-t)*(2/3-r)*6:t,o[u]=255*i;return o}},function(e,t){e.exports=function(e){var t,n,r=e[0]/255,o=e[1]/255,i=e[2]/255,s=Math.min(r,o,i),a=Math.max(r,o,i),l=a-s;return a==s?t=0:r==a?t=(o-i)/l:o==a?t=2+(i-r)/l:i==a&&(t=4+(r-o)/l),(t=Math.min(60*t,360))<0&&(t+=360),n=(s+a)/2,[t,100*(a==s?0:n<=.5?l/(a+s):l/(2-a-s)),100*n]}},function(e,t,n){}]);</script></body></html>
